package com.google.android.apps.search.assistant.surfaces.dictation.service.p9434e;

import androidx.p104d.p105a.C2164c;
import androidx.p104d.p105a.C2169h;
import com.google.android.apps.gsa.binaries.satin.app.C74274se;
import com.google.android.apps.search.assistant.libraries.dictation.p8961b.C119299u;
import com.google.android.apps.search.assistant.surfaces.dictation.p9427a.C125130dd;
import com.google.android.apps.search.assistant.surfaces.dictation.p9427a.C125131de;
import com.google.android.apps.search.assistant.surfaces.dictation.service.formatter.C125476al;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9461n.C126057bv;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9474p.C126174c;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9476q.C126203aq;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9476q.C126226bm;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9476q.C126233bt;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126292aa;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126308aq;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126309ar;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126317az;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126331h;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126332i;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126348y;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.C126349z;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.p9480a.C126288a;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9479s.p9480a.C126290c;
import com.google.android.apps.search.assistant.surfaces.dictation.service.p9482t.C126353d;
import com.google.android.googlequicksearchbox.R;
import com.google.android.libraries.p1730f.C21370a;
import com.google.android.libraries.search.p2904c.C37519dz;
import com.google.android.libraries.search.p2904c.C37561eb;
import com.google.android.libraries.search.p2904c.C37563ed;
import com.google.apps.tiktok.concurrent.C46459k;
import com.google.apps.tiktok.tracing.C47558bi;
import com.google.apps.tiktok.tracing.C47810es;
import com.google.apps.tiktok.tracing.C47831fm;
import com.google.common.p4522b.C58480gp;
import com.google.common.p4522b.C58485gu;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.util.concurrent.C60856cj;
import com.google.common.util.concurrent.C60870cx;
import com.google.common.util.concurrent.C60888db;
import com.google.frameworks.client.p4624a.p4625a.C61301b;
import com.google.protos.p4759ad.p4760a.p4761a.p4762a.p4763a.p4767b.p4768a.p4769a.p4770a.p4771a.C63122a;
import java.util.concurrent.Executor;
import java.util.concurrent.atomic.AtomicBoolean;
import p3186j$.time.Duration;
import p5462h.p5473f.p5475b.C69664n;

/* renamed from: com.google.android.apps.search.assistant.surfaces.dictation.service.e.ab */
/* compiled from: PG */
public final class C125374ab {

    /* renamed from: a */
    public static final C59071e f345782a = C59071e.m91332i("com.google.android.apps.search.assistant.surfaces.dictation.service.e.ab");

    /* renamed from: b */
    public final C125411o f345783b;

    /* renamed from: c */
    public final C126233bt f345784c;

    /* renamed from: d */
    public final C126348y f345785d;

    /* renamed from: e */
    public final AtomicBoolean f345786e = new AtomicBoolean(false);

    /* renamed from: f */
    public final C60870cx f345787f;

    /* renamed from: g */
    public final C126317az f345788g;

    /* renamed from: h */
    public final C126353d f345789h;

    /* renamed from: i */
    public final C125476al f345790i;

    /* renamed from: j */
    public final C126174c f345791j;

    /* renamed from: k */
    public final AtomicBoolean f345792k = new AtomicBoolean(false);

    /* renamed from: l */
    public C126292aa f345793l;

    /* renamed from: m */
    public C2164c f345794m = null;

    /* renamed from: n */
    public final C61301b f345795n;

    /* renamed from: o */
    public final C125422z f345796o;

    /* renamed from: p */
    private final C125396ax f345797p;

    /* renamed from: q */
    private final C126057bv f345798q;

    /* renamed from: r */
    private final Executor f345799r;

    /* renamed from: s */
    private final C21370a f345800s;

    /* renamed from: t */
    private final C125377ae f345801t;

    public C125374ab(C126292aa aaVar, C125377ae aeVar, C126348y yVar, C126057bv bvVar, C125411o oVar, C125396ax axVar, C74274se seVar, C126353d dVar, C125476al alVar, C126174c cVar, C60888db dbVar, C21370a aVar) {
        C74274se seVar2 = seVar;
        C60888db dbVar2 = dbVar;
        this.f345793l = aaVar;
        this.f345801t = aeVar;
        this.f345785d = yVar;
        this.f345797p = axVar;
        this.f345789h = dVar;
        this.f345790i = alVar;
        this.f345791j = cVar;
        this.f345800s = aVar;
        this.f345788g = new C126317az(aaVar.mo107512e(), new C125419w(this), dbVar2);
        this.f345783b = oVar;
        C125422z zVar = new C125422z(this);
        this.f345796o = zVar;
        this.f345784c = new C126233bt(aaVar.mo107508a(), oVar, zVar, (C126203aq) seVar2.f207988a.c.w.mo17428b(), (C60888db) seVar2.f207988a.a.n.mo17428b());
        this.f345798q = bvVar;
        this.f345799r = dbVar2;
        this.f345787f = C2169h.m6027a(new C125415s(this, aaVar));
        long a = aaVar.mo107508a();
        this.f345795n = C126290c.m206496a("Dictation#" + a);
    }

    /* renamed from: h */
    private final synchronized C60870cx m205355h() {
        ((C59052c) ((C59052c) f345782a.mo56224b()).mo56372aa(36508)).mo56389s("Starting %s [SD]", this.f345795n);
        mo106940c();
        C125411o oVar = this.f345783b;
        C125416t tVar = new C125416t(this);
        C47558bi a = C47831fm.m85006a("SD.AudioSession.Start");
        try {
            C125401e eVar = new C125401e(oVar, tVar);
            C60870cx n = C60856cj.m92905n(C47810es.m84965e(eVar), oVar.f345871k);
            a.mo51417a(n);
            a.close();
            C126308aq aqVar = new C126308aq(new C125417u(this), new C125418v(this));
            C60856cj.m92911t(n, C47810es.m84974n(aqVar), this.f345799r);
        } catch (Throwable th) {
            C125372a.m205353a(th, th);
        }
        return C60856cj.m92900i(new C126331h(C63122a.SUCCESS_STARTED, this.f345796o));
        throw th;
    }

    /* access modifiers changed from: package-private */
    /* renamed from: a */
    public final C60870cx mo106938a() {
        C47558bi a = C47831fm.m85006a("SD.Dictation.Start");
        try {
            C60870cx h = m205355h();
            a.mo51417a(h);
            a.close();
            return h;
        } catch (Throwable th) {
            C125412p.m205382a(th, th);
        }
        throw th;
    }

    /* renamed from: b */
    public final synchronized C60870cx mo106939b(C63122a aVar) {
        if (!this.f345786e.compareAndSet(false, true)) {
            return C126309ar.m206522a(this.f345787f);
        }
        ((C59052c) ((C59052c) f345782a.mo56224b()).mo56372aa(36510)).mo56354G("Stopping %s with status %s [SD]", this.f345795n, C126288a.m206493e(aVar));
        C58480gp e = C58485gu.m89837e();
        this.f345788g.mo107529b((C60870cx) null);
        C125411o oVar = this.f345783b;
        C47558bi a = C47831fm.m85006a("SD.AudioSession.Stop");
        try {
            C125407k kVar = new C125407k(oVar);
            C60870cx n = C60856cj.m92905n(C47810es.m84965e(kVar), oVar.f345871k);
            a.mo51417a(n);
            a.close();
            e.mo55395g(n);
            C126233bt btVar = this.f345784c;
            C126226bm bmVar = new C126226bm(btVar);
            e.mo55395g(C60856cj.m92904m(C47810es.m84978r(bmVar), btVar.f347843d));
            C125383ak akVar = this.f345801t.f345804a;
            C125382aj ajVar = new C125382aj(akVar, this);
            C46459k.m82829b(C60856cj.m92903l(C47810es.m84977q(ajVar), akVar.f345817c), "Forgetting dictation failed. [SD]", new Object[0]);
            this.f345798q.mo107280d(aVar);
            C2164c cVar = this.f345794m;
            cVar.getClass();
            C60870cx d = C126309ar.m206525d(e.mo55394f());
            C126308aq aqVar = new C126308aq(new C125413q(this, cVar, aVar), new C125414r(this, cVar));
            C60856cj.m92911t(d, C47810es.m84974n(aqVar), this.f345799r);
            return C126309ar.m206522a(this.f345787f);
        } catch (Throwable th) {
            C125372a.m205353a(th, th);
        }
        throw th;
    }

    /* renamed from: c */
    public final void mo106940c() {
        Duration duration = (Duration) this.f345788g.f347976a.get();
        this.f345788g.mo107528a();
    }

    /* renamed from: d */
    public final void mo106941d(C2164c cVar, C63122a aVar) {
        cVar.mo5437b(aVar);
        this.f345791j.mo107415n(this.f345793l.mo107508a(), aVar, this.f345793l);
    }

    /* renamed from: e */
    public final synchronized void mo106942e(C37561eb ebVar) {
        C37519dz dzVar;
        C37563ed edVar;
        if (this.f345786e.get()) {
            return;
        }
        if (ebVar.f99802a == 1) {
            this.f345791j.mo107422u(this.f345793l.mo107508a());
            C59052c cVar = (C59052c) ((C59052c) f345782a.mo56224b()).mo56372aa(36515);
            C61301b bVar = this.f345783b.f345877q;
            if (ebVar.f99802a == 1) {
                edVar = C37563ed.m66571a(((Integer) ebVar.f99803b).intValue());
                if (edVar == null) {
                    edVar = C37563ed.UNKNOWN_OPENING_SUCCESS;
                }
            } else {
                edVar = C37563ed.UNKNOWN_OPENING_SUCCESS;
            }
            C69664n.m101061g(edVar, "<this>");
            cVar.mo56354G("%s started with %s [SD]", bVar, C126290c.m206496a(Integer.valueOf(edVar.f99809d)));
            this.f345798q.mo107281e(this.f345793l);
            C125396ax axVar = this.f345797p;
            C47558bi a = C47831fm.m85006a("SD.Beep.Play");
            try {
                axVar.f345841c.add(Integer.valueOf(R.raw.open));
                axVar.mo106958a();
                a.close();
                C125130dd ddVar = (C125130dd) C125131de.f345199c.createBuilder();
                long c = this.f345800s.mo26871c();
                ddVar.copyOnWrite();
                C125131de deVar = (C125131de) ddVar.instance;
                deVar.f345201a = 2;
                deVar.f345202b = Long.valueOf(c);
                C60870cx a2 = this.f345784c.mo107476a(new C126332i(this.f345793l.mo107514g(), this.f345793l.mo107513f(), this.f345796o));
                C126308aq aqVar = new C126308aq(new C125420x(this, (C125131de) ddVar.build()), C125421y.f345895a);
                C60856cj.m92911t(a2, C47810es.m84974n(aqVar), this.f345799r);
                return;
            } catch (Throwable th) {
                C125392at.m205371a(th, th);
            }
        } else {
            C59052c cVar2 = (C59052c) ((C59052c) f345782a.mo56225c()).mo56372aa(36516);
            C61301b bVar2 = this.f345783b.f345877q;
            if (ebVar.f99802a == 2) {
                dzVar = C37519dz.m66524a(((Integer) ebVar.f99803b).intValue());
                if (dzVar == null) {
                    dzVar = C37519dz.UNKNOWN_OPENING_FAILURE;
                }
            } else {
                dzVar = C37519dz.UNKNOWN_OPENING_FAILURE;
            }
            C69664n.m101061g(dzVar, "<this>");
            cVar2.mo56354G("%s failed to start with %s [SD]", bVar2, C126290c.m206496a(Integer.valueOf(dzVar.f99687U)));
            mo106943f(C63122a.FAILURE_START_AUDIO_LIBRARY_ERROR);
            return;
        }
        throw th;
    }

    /* access modifiers changed from: package-private */
    /* renamed from: f */
    public final void mo106943f(C63122a aVar) {
        C46459k.m82829b(mo106939b(aVar), "Failed to stop dictation. [SD]", new Object[0]);
    }

    /* renamed from: g */
    public final synchronized void mo106944g(C119299u uVar) {
        C126349z d = this.f345793l.mo107511d();
        d.mo107550e(uVar);
        C126292aa a = d.mo107546a();
        this.f345793l = a;
        this.f345798q.mo107292p(a);
    }

    public final String toString() {
        long a = this.f345793l.mo107508a();
        return "Dictation#" + a;
    }
}
