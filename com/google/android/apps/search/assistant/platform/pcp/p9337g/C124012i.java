package com.google.android.apps.search.assistant.platform.pcp.p9337g;

import com.google.android.apps.search.assistant.platform.pcp.p9327d.C123692b;
import com.google.android.apps.search.assistant.platform.pcp.p9327d.C123693c;
import com.google.android.apps.search.assistant.platform.pcp.p9329f.C123746bm;
import com.google.android.apps.search.assistant.platform.pcp.p9329f.C123755bv;
import com.google.android.apps.search.assistant.platform.pcp.p9329f.C123777f;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124048ad;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124051af;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124052ag;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124053ah;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124136v;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124138x;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124139y;
import com.google.android.apps.search.assistant.platform.pcp.p9339i.C124140z;
import com.google.android.libraries.search.p3047m.p3050b.C39226b;
import com.google.apps.tiktok.tracing.C47810es;
import com.google.apps.tiktok.tracing.contrib.p3700b.C47633f;
import com.google.apps.tiktok.tracing.contrib.p3700b.C47636i;
import com.google.apps.tiktok.tracing.contrib.p3700b.C47638k;
import com.google.assistant.p3897e.p3917i.p3918a.C51303cs;
import com.google.assistant.p3897e.p3917i.p3918a.C51334dw;
import com.google.assistant.p3897e.p3921j.C51714bl;
import com.google.assistant.p3897e.p3921j.C51715bm;
import com.google.assistant.p3897e.p3921j.C52404qm;
import com.google.assistant.p3897e.p3921j.C52405qn;
import com.google.assistant.p3897e.p3921j.C52406qo;
import com.google.assistant.p3897e.p3921j.C52407qp;
import com.google.assistant.p3897e.p3921j.ame;
import com.google.assistant.p3897e.p3921j.amf;
import com.google.assistant.p3994s.p3995a.C53123cf;
import com.google.assistant.p3994s.p3995a.C53124cg;
import com.google.assistant.p3994s.p3995a.C53271hs;
import com.google.assistant.p3994s.p3995a.C53274hv;
import com.google.assistant.p3994s.p3995a.C53306j;
import com.google.assistant.p3994s.p3995a.C53347kn;
import com.google.assistant.p3994s.p3995a.C53348ko;
import com.google.common.p4522b.C58485gu;
import com.google.common.p4522b.C58526ih;
import com.google.common.p4522b.C58528ij;
import com.google.common.p4526f.C59071e;
import com.google.common.p4580v.C60950i;
import com.google.common.util.concurrent.C60856cj;
import com.google.common.util.concurrent.C60866ct;
import com.google.common.util.concurrent.C60870cx;
import com.google.common.util.concurrent.C60888db;
import com.google.common.util.concurrent.C60922j;
import com.google.knowledge.p4671b.C61820m;
import com.google.p4017at.p4060h.p4068b.p4069a.C54185b;
import com.google.p4017at.p4060h.p4068b.p4069a.C54188e;
import com.google.protobuf.C62942bv;
import com.google.protobuf.C62947c;
import com.google.protobuf.C62971cq;
import com.google.protos.p5124m.p5125a.C65599b;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import java.util.concurrent.Executor;
import p3186j$.time.Duration;
import p3186j$.time.ZoneId;
import p3186j$.util.Collection;
import p3186j$.util.Map;
import p3186j$.util.Objects;
import p3186j$.util.Optional;
import p3186j$.util.stream.Collectors;
import p5304e.p5305a.p5306a.p5431u.p5434b.C69238d;

/* renamed from: com.google.android.apps.search.assistant.platform.pcp.g.i */
/* compiled from: PG */
public final class C124012i implements C124013j {

    /* renamed from: a */
    public static final C59071e f342525a = C59071e.m91332i("com.google.android.apps.search.assistant.platform.pcp.g.i");

    /* renamed from: b */
    public final Executor f342526b;

    /* renamed from: c */
    public final C124004a f342527c;

    /* renamed from: d */
    public final C124025u f342528d;

    /* renamed from: e */
    public final C60950i f342529e;

    /* renamed from: f */
    public final long f342530f;

    /* renamed from: g */
    public final C60888db f342531g;

    /* renamed from: h */
    private final C124017m f342532h;

    /* renamed from: i */
    private final C58485gu f342533i;

    public C124012i(C124004a aVar, Executor executor, C124017m mVar, C124025u uVar, C60888db dbVar, C60950i iVar, C65599b bVar, long j) {
        this.f342527c = aVar;
        this.f342526b = executor;
        this.f342532h = mVar;
        this.f342528d = uVar;
        this.f342531g = dbVar;
        this.f342533i = C58485gu.m89842j(bVar.f178301a);
        this.f342530f = j;
        this.f342529e = iVar;
    }

    /* renamed from: c */
    private final C60870cx m203384c(C53306j jVar, C123755bv bvVar, Optional optional, C123777f fVar, boolean z) {
        C54185b bVar;
        C60870cx cxVar;
        C58528ij ijVar;
        Optional of;
        C60870cx cxVar2;
        C51715bm bmVar;
        C53306j jVar2 = jVar;
        C123755bv bvVar2 = bvVar;
        C53347kn knVar = (C53347kn) C53348ko.f139988b.createBuilder();
        C62971cq cqVar = bvVar2.f341845g;
        knVar.copyOnWrite();
        C53348ko koVar = (C53348ko) knVar.instance;
        C62971cq cqVar2 = koVar.f139990a;
        if (!cqVar2.mo58948c()) {
            koVar.f139990a = C62942bv.mutableCopy(cqVar2);
        }
        C62947c.addAll((Iterable) cqVar, (List) koVar.f139990a);
        C53348ko koVar2 = (C53348ko) knVar.build();
        C124017m mVar = this.f342532h;
        C124053ah ahVar = mVar.f342549f;
        C53123cf cfVar = (C53123cf) C53124cg.f139219h.createBuilder();
        if ((bvVar2.f341839a & 128) != 0) {
            C53271hs hsVar = bvVar2.f341848j;
            if (hsVar == null) {
                hsVar = C53271hs.f139650u;
            }
            boolean z2 = hsVar.f139664m;
            cfVar.copyOnWrite();
            C53124cg cgVar = (C53124cg) cfVar.instance;
            cgVar.f139221a |= 16;
            cgVar.f139226f = z2;
        }
        if ((bvVar2.f341839a & 1) != 0) {
            C61820m mVar2 = bvVar2.f341840b;
            if (mVar2 == null) {
                mVar2 = C61820m.f167020J;
            }
            cfVar.copyOnWrite();
            C53124cg cgVar2 = (C53124cg) cfVar.instance;
            mVar2.getClass();
            cgVar2.f139225e = mVar2;
            cgVar2.f139221a |= 8;
        }
        if ((bvVar2.f341839a & 2) != 0) {
            C54188e eVar = bvVar2.f341841c;
            if (eVar == null) {
                eVar = C54188e.f142203f;
            }
            bVar = (C54185b) eVar.toBuilder();
        } else {
            bVar = null;
        }
        if (bVar != null) {
            cfVar.copyOnWrite();
            C53124cg cgVar3 = (C53124cg) cfVar.instance;
            C54188e eVar2 = (C54188e) bVar.build();
            eVar2.getClass();
            cgVar3.f139222b = eVar2;
            cgVar3.f139221a |= 1;
        }
        if ((bvVar2.f341839a & 8) != 0) {
            C53274hv hvVar = bvVar2.f341844f;
            if (hvVar == null) {
                hvVar = C53274hv.f139676c;
            }
            cfVar.copyOnWrite();
            C53124cg cgVar4 = (C53124cg) cfVar.instance;
            hvVar.getClass();
            cgVar4.f139227g = hvVar;
            cgVar4.f139221a |= 32;
        }
        if ((bvVar2.f341839a & 256) != 0) {
            boolean z3 = bvVar2.f341849k;
            cfVar.copyOnWrite();
            C53124cg cgVar5 = (C53124cg) cfVar.instance;
            cgVar5.f139221a |= 16;
            cgVar5.f139226f = z3;
        }
        C51334dw dwVar = C51334dw.f133658ab;
        if ((bvVar2.f341839a & 1024) != 0) {
            C51334dw dwVar2 = bvVar2.f341851m;
            if (dwVar2 != null) {
                dwVar = dwVar2;
            }
            C51303cs csVar = (C51303cs) dwVar.toBuilder();
            C52406qo qoVar = (C52406qo) C52407qp.f137523d.createBuilder();
            long seconds = Duration.ofMillis(ahVar.f342633c.mo26870b()).toSeconds();
            qoVar.copyOnWrite();
            C52407qp qpVar = (C52407qp) qoVar.instance;
            qpVar.f137525a |= 1;
            qpVar.f137526b = seconds;
            csVar.copyOnWrite();
            C51334dw dwVar3 = (C51334dw) csVar.instance;
            C52407qp qpVar2 = (C52407qp) qoVar.build();
            qpVar2.getClass();
            dwVar3.f133693g = qpVar2;
            dwVar3.f133685a |= 16;
            dwVar = (C51334dw) csVar.build();
        }
        if (ahVar.f342635e) {
            C51303cs csVar2 = (C51303cs) dwVar.toBuilder();
            C52404qm qmVar = (C52404qm) C52405qn.f137519c.createBuilder();
            String id = ZoneId.systemDefault().getId();
            qmVar.copyOnWrite();
            C52405qn qnVar = (C52405qn) qmVar.instance;
            id.getClass();
            qnVar.f137521a |= 1;
            qnVar.f137522b = id;
            csVar2.copyOnWrite();
            C51334dw dwVar4 = (C51334dw) csVar2.instance;
            C52405qn qnVar2 = (C52405qn) qmVar.build();
            qnVar2.getClass();
            dwVar4.f133694h = qnVar2;
            dwVar4.f133685a |= 32;
            dwVar = (C51334dw) csVar2.build();
        }
        if (!Objects.equals(dwVar, C51334dw.f133658ab)) {
            cfVar.copyOnWrite();
            C53124cg cgVar6 = (C53124cg) cfVar.instance;
            dwVar.getClass();
            cgVar6.f139223c = dwVar;
            cgVar6.f139221a |= 2;
        }
        C51715bm bmVar2 = C51715bm.f135662t;
        if (!((bvVar2.f341839a & 2048) == 0 || (bmVar = bvVar2.f341852n) == null)) {
            bmVar2 = bmVar;
        }
        if (ahVar.f342634d) {
            C51714bl blVar = (C51714bl) bmVar2.toBuilder();
            amf amf = bmVar2.f135667d;
            if (amf == null) {
                amf = amf.f135365e;
            }
            ame ame = (ame) amf.toBuilder();
            ame.copyOnWrite();
            amf amf2 = (amf) ame.instance;
            amf2.f135367a |= 2;
            amf2.f135369c = "OPA_AGSA";
            blVar.copyOnWrite();
            C51715bm bmVar3 = (C51715bm) blVar.instance;
            amf amf3 = (amf) ame.build();
            amf3.getClass();
            bmVar3.f135667d = amf3;
            bmVar3.f135664a |= 4;
            bmVar2 = (C51715bm) blVar.build();
        }
        if (!Objects.equals(bmVar2, C51715bm.f135662t)) {
            cfVar.copyOnWrite();
            C53124cg cgVar7 = (C53124cg) cfVar.instance;
            bmVar2.getClass();
            cgVar7.f139224d = bmVar2;
            cgVar7.f139221a |= 4;
        }
        if (ahVar.f342636f) {
            C60870cx h = C60922j.m93045h(ahVar.f342637g.mo41441a(), C47810es.m84966f(new C124051af((C51303cs) dwVar.toBuilder())), ahVar.f342632b);
            cxVar = C47638k.m84753d(h).mo51520a(new C124052ag(cfVar, h), ahVar.f342632b);
        } else {
            cxVar = C60856cj.m92900i(cfVar);
        }
        C60870cx cxVar3 = cxVar;
        if (optional.isPresent()) {
            of = Optional.m71637of(new HashSet((Collection) optional.get()));
        } else {
            C124048ad adVar = mVar.f342548e;
            if (jVar2.equals(C53306j.ALL_PCP_CLIENTS)) {
                C58526ih ihVar = new C58526ih();
                Map.EL.forEach(adVar.f342627a, new C124138x(ihVar));
                ijVar = ihVar.mo55486f();
            } else {
                C69238d dVar = (C69238d) adVar.f342627a.get(jVar2);
                dVar.getClass();
                ijVar = C58528ij.m90006F((Set) Collection.EL.stream(dVar.f185338b).map(C124139y.f342827a).filter(C124140z.f342828a).collect(Collectors.toCollection(C124136v.f342824a)));
            }
            of = Optional.m71637of(new HashSet(ijVar));
        }
        Optional optional2 = of;
        if (z) {
            C123693c cVar = mVar.f342546c;
            C39226b bVar2 = C39226b.TAG_ASSISTANT_PCP;
            cxVar2 = C60922j.m93045h(cVar.f341663d.mo106104a(false), C47810es.m84966f(new C123692b(cVar, bVar2)), cVar.f341665f);
        } else {
            cxVar2 = C60866ct.f164955a;
        }
        C60870cx cxVar4 = cxVar2;
        C60870cx a = mVar.f342547d.f341550b.mo45937a(new C124015k(mVar, optional2));
        return C47633f.m84733g(C47636i.m84746e(cxVar4, a, cxVar3).mo51518a(new C124016l(mVar, cxVar4, a, cxVar3, bvVar, jVar, optional2, fVar), mVar.f342545b)).mo51516i(new C124006c(this, koVar2), this.f342526b);
    }

    /* renamed from: a */
    public final C60870cx mo106228a(C53306j jVar, C123755bv bvVar, Optional optional, C123777f fVar, boolean z) {
        if (this.f342533i.contains(Integer.valueOf(jVar.f139793X))) {
            return m203384c(jVar, bvVar, optional, fVar, z);
        }
        return C60856cj.m92900i(C123746bm.f341818b);
    }

    /* renamed from: b */
    public final C60870cx mo106229b(C53306j jVar, C123755bv bvVar, Optional optional, boolean z, C123777f fVar) {
        return m203384c(jVar, bvVar, optional, fVar, z);
    }
}
