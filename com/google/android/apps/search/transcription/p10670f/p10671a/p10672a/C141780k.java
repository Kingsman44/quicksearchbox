package com.google.android.apps.search.transcription.p10670f.p10671a.p10672a;

import android.content.AttributionSource;
import android.net.Uri;
import android.os.ParcelFileDescriptor;
import androidx.core.p094f.C1888a;
import com.google.android.apps.search.transcription.p10666b.C141746e;
import com.google.android.apps.search.transcription.p10670f.C141787af;
import com.google.android.apps.search.transcription.p10670f.C141849bq;
import com.google.android.apps.search.transcription.p10670f.C141851bs;
import com.google.android.apps.search.transcription.p10670f.C141860d;
import com.google.android.apps.search.transcription.p10670f.p10671a.C141769a;
import com.google.android.apps.search.transcription.recording.AudioRecordingProvider;
import com.google.android.libraries.search.p2904c.C37325aa;
import com.google.android.libraries.search.p2904c.C37345aj;
import com.google.android.libraries.search.p2904c.C37346ak;
import com.google.android.libraries.search.p2904c.C37357av;
import com.google.android.libraries.search.p2904c.C37360ay;
import com.google.android.libraries.search.p2904c.C37402bg;
import com.google.android.libraries.search.p2904c.C37405bj;
import com.google.android.libraries.search.p2904c.C37406bk;
import com.google.android.libraries.search.p2904c.C37407bl;
import com.google.android.libraries.search.p2904c.C37409bn;
import com.google.android.libraries.search.p2904c.C37410bo;
import com.google.android.libraries.search.p2904c.C37419bx;
import com.google.android.libraries.search.p2904c.C37702ie;
import com.google.android.libraries.search.p2904c.C37703if;
import com.google.android.libraries.search.p2904c.p2905a.C37323b;
import com.google.android.libraries.search.p2904c.p2905a.C37324c;
import com.google.android.libraries.search.p2904c.p2913d.p2914a.C37482d;
import com.google.android.libraries.search.p2904c.p2913d.p2914a.C37488j;
import com.google.android.libraries.search.p2904c.p2927f.C37587a;
import com.google.android.libraries.search.p2904c.p2933j.C37705a;
import com.google.android.libraries.search.p2904c.p2933j.C37773c;
import com.google.android.libraries.search.p2904c.p2933j.p2934a.p2937c.C37770m;
import com.google.android.libraries.search.p2904c.p2933j.p2934a.p2937c.C37771n;
import com.google.android.libraries.search.p2904c.p2952o.p2955c.C37910a;
import com.google.apps.tiktok.tracing.C47810es;
import com.google.apps.tiktok.tracing.contrib.p3700b.C47633f;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.util.concurrent.C60826bg;
import com.google.common.util.concurrent.C60856cj;
import com.google.common.util.concurrent.C60870cx;
import com.google.common.util.concurrent.C60888db;
import java.io.InputStream;
import java.util.Locale;
import java.util.concurrent.atomic.AtomicBoolean;
import p5460g.p5461a.C69464a;

/* renamed from: com.google.android.apps.search.transcription.f.a.a.k */
/* compiled from: PG */
public final class C141780k implements C141769a {

    /* renamed from: a */
    public static final C59071e f384746a = C59071e.m91332i("com.google.android.apps.search.transcription.f.a.a.k");

    /* renamed from: b */
    public final C37324c f384747b;

    /* renamed from: c */
    public final C141851bs f384748c;

    /* renamed from: d */
    public final C141787af f384749d;

    /* renamed from: e */
    public final AudioRecordingProvider f384750e;

    /* renamed from: f */
    public final AtomicBoolean f384751f = new AtomicBoolean(false);

    /* renamed from: g */
    C60870cx f384752g;

    /* renamed from: h */
    C37402bg f384753h;

    /* renamed from: i */
    public C37323b f384754i;

    /* renamed from: j */
    private final C60888db f384755j;

    /* renamed from: k */
    private final C60888db f384756k;

    /* renamed from: l */
    private final C69464a f384757l;

    /* renamed from: m */
    private final C37910a f384758m;

    /* renamed from: n */
    private C37325aa f384759n;

    /* renamed from: o */
    private final C37482d f384760o;

    public C141780k(C37482d dVar, C69464a aVar, C37910a aVar2, AudioRecordingProvider audioRecordingProvider, C60888db dbVar, C60888db dbVar2, C37324c cVar, C141851bs bsVar, C141787af afVar) {
        this.f384760o = dVar;
        this.f384757l = aVar;
        this.f384758m = aVar2;
        this.f384750e = audioRecordingProvider;
        this.f384755j = dbVar;
        this.f384756k = dbVar2;
        this.f384747b = cVar;
        this.f384748c = bsVar;
        this.f384749d = afVar;
    }

    /* renamed from: g */
    private final synchronized void m230026g() {
        C37482d dVar = this.f384760o;
        C37345aj ajVar = (C37345aj) C37346ak.f99197g.createBuilder();
        ajVar.copyOnWrite();
        C37346ak akVar = (C37346ak) ajVar.instance;
        akVar.f99199a |= 1;
        akVar.f99200b = 4;
        ajVar.copyOnWrite();
        C37346ak akVar2 = (C37346ak) ajVar.instance;
        akVar2.f99199a |= 2;
        akVar2.f99201c = 3;
        C37705a aVar = (C37705a) C37773c.f100243c.createBuilder();
        C37771n nVar = C37771n.f100204c;
        aVar.copyOnWrite();
        C37773c cVar = (C37773c) aVar.instance;
        nVar.getClass();
        cVar.f100246b = nVar;
        cVar.f100245a = 20;
        ajVar.copyOnWrite();
        C37346ak akVar3 = (C37346ak) ajVar.instance;
        C37773c cVar2 = (C37773c) aVar.build();
        cVar2.getClass();
        akVar3.f99203e = cVar2;
        akVar3.f99199a |= 8;
        C37325aa a = dVar.mo40984a((C37346ak) ajVar.build());
        this.f384759n = a;
        C60856cj.m92911t(((C37488j) a).f99524d, C47810es.m84974n(new C141779j()), this.f384755j);
    }

    /* renamed from: a */
    public final int mo116717a() {
        int a;
        if (!this.f384748c.mo116827i().isPresent() || (a = ((C141860d) this.f384748c.mo116827i().get()).mo116854a()) == 1) {
            return 16;
        }
        if (a == 2) {
            return 12;
        }
        throw new IllegalStateException("Unsupported audio channel count!");
    }

    /* renamed from: b */
    public final int mo116718b() {
        if (this.f384748c.mo116827i().isPresent()) {
            return ((C141860d) this.f384748c.mo116827i().get()).mo116856c();
        }
        return 16000;
    }

    /* renamed from: c */
    public final synchronized InputStream mo116719c() {
        return new C37587a(this.f384752g);
    }

    /* renamed from: d */
    public final synchronized void mo116720d() {
        if (this.f384751f.compareAndSet(false, true)) {
            if (this.f384753h != null) {
                this.f384749d.mo116741k();
                C60870cx a = this.f384753h.mo20354a().mo20353a();
                C141777h hVar = new C141777h(this);
                C60856cj.m92911t(a, C47810es.m84974n(hVar), this.f384755j);
            }
            C37325aa aaVar = this.f384759n;
            if (aaVar != null) {
                C60870cx b = aaVar.mo40883b();
                C141778i iVar = new C141778i();
                C60856cj.m92911t(b, C47810es.m84974n(iVar), this.f384755j);
            }
        }
    }

    /* renamed from: e */
    public final synchronized void mo116721e() {
        if (this.f384751f.get()) {
            ((C59052c) ((C59052c) f384746a.mo56225c()).mo56372aa(41923)).mo56386p("#closeMicIfNeeded called before #initializeAsync");
            this.f384752g = C60856cj.m92899h(new C141746e());
            return;
        }
        C37409bn bnVar = (C37409bn) C37410bo.f99330k.createBuilder();
        boolean t = this.f384748c.mo116838t();
        bnVar.copyOnWrite();
        C37410bo boVar = (C37410bo) bnVar.instance;
        boVar.f99332a |= 64;
        boVar.f99339h = t;
        C37360ay f = mo116725f();
        bnVar.copyOnWrite();
        C37410bo boVar2 = (C37410bo) bnVar.instance;
        f.getClass();
        boVar2.f99337f = f;
        boVar2.f99332a |= 1;
        if (this.f384748c.mo116827i().isPresent() && ((C141860d) this.f384748c.mo116827i().get()).mo116858f().isPresent()) {
            C37702ie ieVar = (C37702ie) C37703if.f100132c.createBuilder();
            String uri = ((Uri) ((C141860d) this.f384748c.mo116827i().get()).mo116858f().get()).toString();
            ieVar.copyOnWrite();
            C37703if ifVar = (C37703if) ieVar.instance;
            uri.getClass();
            ifVar.f100134a = 1 | ifVar.f100134a;
            ifVar.f100135b = uri;
            bnVar.copyOnWrite();
            C37410bo boVar3 = (C37410bo) bnVar.instance;
            C37703if ifVar2 = (C37703if) ieVar.build();
            ifVar2.getClass();
            boVar3.f99334c = ifVar2;
            boVar3.f99333b = 13;
            this.f384753h = this.f384758m.mo41149b((C37410bo) bnVar.build());
        } else if (!this.f384748c.mo116827i().isPresent() || !((C141860d) this.f384748c.mo116827i().get()).mo116857e().isPresent()) {
            Locale locale = Locale.US;
            Object[] objArr = new Object[1];
            int x = this.f384748c.mo116842x();
            String a = C141849bq.m230195a(x);
            if (x != 0) {
                objArr[0] = a;
                String format = String.format(locale, "TNT_%s", objArr);
                C37406bk bkVar = (C37406bk) C37407bl.f99325c.createBuilder();
                C37705a aVar = (C37705a) C37773c.f100243c.createBuilder();
                C37770m mVar = (C37770m) C37771n.f100204c.createBuilder();
                mVar.copyOnWrite();
                C37771n nVar = (C37771n) mVar.instance;
                format.getClass();
                nVar.f100206a |= 1;
                nVar.f100207b = format;
                aVar.copyOnWrite();
                C37773c cVar = (C37773c) aVar.instance;
                C37771n nVar2 = (C37771n) mVar.build();
                nVar2.getClass();
                cVar.f100246b = nVar2;
                cVar.f100245a = 20;
                bkVar.copyOnWrite();
                C37407bl blVar = (C37407bl) bkVar.instance;
                C37773c cVar2 = (C37773c) aVar.build();
                cVar2.getClass();
                blVar.f99328b = cVar2;
                blVar.f99327a = 1 | blVar.f99327a;
                C37407bl blVar2 = (C37407bl) bkVar.build();
                m230026g();
                if (C1888a.m5149c() && this.f384748c.mo116825g() != null && this.f384748c.mo116825g().isPresent()) {
                    C37323b a2 = this.f384747b.mo40880a((AttributionSource) this.f384748c.mo116825g().get());
                    this.f384754i = a2;
                    bnVar.copyOnWrite();
                    C37410bo boVar4 = (C37410bo) bnVar.instance;
                    a2.getClass();
                    boVar4.f99336e = a2;
                    boVar4.f99335d = 12;
                }
                C37405bj b = ((C37419bx) this.f384757l.mo17428b()).mo40943b(blVar2, (C37410bo) bnVar.build());
                this.f384753h = b.mo40940a();
                b.mo40941b().mo40939e().mo4106b(new C141770a(this), C60826bg.f164896a);
            } else {
                throw null;
            }
        } else {
            this.f384753h = this.f384758m.mo41148a((ParcelFileDescriptor) ((C141860d) this.f384748c.mo116827i().get()).mo116857e().get(), mo116725f());
        }
        this.f384752g = C47633f.m84733g(this.f384753h.mo20357d()).mo51516i(new C141771b(this), this.f384755j).mo51514f(Exception.class, new C141772c(this), this.f384755j);
        C60856cj.m92904m(C47810es.m84978r(new C141773d(this)), this.f384756k);
        C60856cj.m92911t(C60856cj.m92904m(C47810es.m84978r(new C141774e(this)), this.f384756k), C47810es.m84974n(new C141776g(this)), this.f384755j);
    }

    /* renamed from: f */
    public final C37360ay mo116725f() {
        long j = true != this.f384748c.mo116836r() ? 300000 : 86400000;
        C37357av avVar = (C37357av) C37360ay.f99224l.createBuilder();
        avVar.copyOnWrite();
        C37360ay ayVar = (C37360ay) avVar.instance;
        ayVar.f99226a |= 128;
        ayVar.f99234i = j;
        int a = mo116717a();
        avVar.copyOnWrite();
        C37360ay ayVar2 = (C37360ay) avVar.instance;
        ayVar2.f99226a |= 4;
        ayVar2.f99229d = a;
        int b = mo116718b();
        avVar.copyOnWrite();
        C37360ay ayVar3 = (C37360ay) avVar.instance;
        ayVar3.f99226a |= 2;
        ayVar3.f99228c = b;
        return (C37360ay) avVar.build();
    }
}
