package com.google.android.apps.gsa.nga.engine.p6056o.p6077e;

import android.content.Context;
import com.google.android.apps.gsa.nga.engine.aj.av;
import com.google.android.apps.gsa.nga.engine.aj.c;
import com.google.android.apps.gsa.nga.engine.aj.x;
import com.google.android.apps.gsa.nga.engine.aj.y;
import com.google.android.apps.gsa.nga.engine.am.h.bf;
import com.google.android.apps.gsa.nga.engine.am.h.ct;
import com.google.android.apps.gsa.nga.engine.am.h.df;
import com.google.android.apps.gsa.nga.engine.am.h.f;
import com.google.android.apps.gsa.nga.engine.am.v;
import com.google.android.apps.gsa.nga.engine.p5900ag.C74820be;
import com.google.android.apps.gsa.nga.engine.p5913am.p5939u.C74965n;
import com.google.android.apps.gsa.nga.engine.p6029g.C76087c;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76541a;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76564ah;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76565ai;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76574ar;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76590bg;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76591c;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76593e;
import com.google.android.apps.gsa.nga.engine.p6056o.p6059c.C76594f;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.C80399l;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.C80401n;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.p6282a.C80293ao;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.p6282a.C80295aq;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.p6282a.C80303ay;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.p6282a.C80307bb;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6281e.p6282a.C80338cf;
import com.google.android.apps.gsa.nga.shared.p6320al.C80884a;
import com.google.android.apps.gsa.nga.shared.p6321am.p6322a.C80909e;
import com.google.android.apps.gsa.nga.shared.p6321am.p6322a.C80911g;
import com.google.android.apps.gsa.nga.shared.p6321am.p6322a.C80913i;
import com.google.android.apps.gsa.nga.shared.p6358n.C81442m;
import com.google.android.apps.gsa.nga.shared.p6368u.C81515c;
import com.google.android.apps.gsa.nga.shared.p6407v.C83044e;
import com.google.android.apps.gsa.nga.shared.p6407v.C83216f;
import com.google.android.apps.gsa.nga.shared.p6407v.C83251g;
import com.google.android.apps.gsa.nga.shared.p6407v.p6411d.C82831ca;
import com.google.android.apps.gsa.nga.shared.p6407v.p6411d.C82835ce;
import com.google.android.apps.gsa.p8883x.C118826c;
import com.google.android.apps.gsa.shared.p7066m.C90126fx;
import com.google.android.apps.gsa.shared.util.p7188v.C91142g;
import com.google.android.libraries.gsa.p1876k.C22871g;
import com.google.assistant.p3897e.p3902c.p3907c.C51098gh;
import com.google.assistant.p3897e.p3921j.C52286mc;
import com.google.assistant.p3897e.p3921j.C52289mf;
import com.google.common.p4522b.C58370cn;
import com.google.common.p4522b.C58480gp;
import com.google.common.p4522b.C58485gu;
import com.google.common.p4522b.C58495hd;
import com.google.common.p4522b.C58724pq;
import com.google.common.p4526f.p4527a.C58970a;
import com.google.common.p4526f.p4527a.C58974d;
import com.google.common.util.concurrent.C60870cx;
import p3186j$.util.Collection;
import p3186j$.util.Objects;
import p3186j$.util.Optional;

/* renamed from: com.google.android.apps.gsa.nga.engine.o.e.ay */
/* compiled from: PG */
public final class C76795ay implements C76591c {

    /* renamed from: a */
    public static final C58974d f212177a = C58974d.m91136j();

    /* renamed from: b */
    public static final C58485gu f212178b = C58485gu.m89847o("Initiate_call", "Call");

    /* renamed from: o */
    private static final String f212179o = C80884a.m128736a("whatsapp");

    /* renamed from: p */
    private static final C82831ca f212180p = C82831ca.INITIATE_CALL;

    /* renamed from: c */
    public final C91142g f212181c;

    /* renamed from: d */
    public final bf f212182d;

    /* renamed from: e */
    public final C77280f f212183e;

    /* renamed from: f */
    public final Context f212184f;

    /* renamed from: g */
    public final c f212185g;

    /* renamed from: h */
    public final C58495hd f212186h;

    /* renamed from: i */
    public final C58495hd f212187i;

    /* renamed from: j */
    public final ct f212188j;

    /* renamed from: k */
    public final C22871g f212189k;

    /* renamed from: l */
    public final C83216f f212190l;

    /* renamed from: m */
    public final C81515c f212191m;

    /* renamed from: n */
    public final C74820be f212192n;

    /* renamed from: q */
    private final C58495hd f212193q;

    /* renamed from: r */
    private final C76087c f212194r;

    public C76795ay(Context context, C91142g gVar, bf bfVar, C77280f fVar, c cVar, av avVar, ct ctVar, C76087c cVar2, C22871g gVar2, C83251g gVar3, C74820be beVar, C81515c cVar3) {
        this.f212184f = context;
        this.f212181c = gVar;
        this.f212182d = bfVar;
        this.f212183e = fVar;
        this.f212185g = cVar;
        this.f212186h = (C58495hd) Collection.EL.stream(C58485gu.m89847o(cVar, avVar)).collect(C58370cn.m89403c(C76788ar.f212170a, C76789as.f212171a, C76790at.f212172a));
        this.f212187i = C58495hd.m89900n("/m/0gwzvs1", avVar);
        this.f212193q = C58495hd.m89900n(f212179o, avVar);
        this.f212188j = ctVar;
        this.f212189k = gVar2;
        this.f212194r = cVar2;
        this.f212190l = gVar3.mo76652a(f212180p);
        this.f212192n = beVar;
        this.f212191m = cVar3;
    }

    /* renamed from: a */
    public final C76594f mo71711a() {
        C76593e h = C76594f.m123238h();
        h.mo72277g("Initiate_call", C90126fx.f251275fj);
        h.mo72277g("Call", C90126fx.f251275fj);
        C76087c cVar = this.f212194r;
        Objects.requireNonNull(cVar);
        C76787aq aqVar = new C76787aq(cVar);
        Optional of = Optional.m71637of(f212180p);
        C76541a aVar = (C76541a) h;
        aVar.f211764a = aqVar;
        h.mo72246e(of);
        h.mo72244c(f212178b);
        aVar.f211766c = 10501;
        return h.mo72276f();
    }

    /* renamed from: b */
    public final C60870cx mo71712b(C76590bg bgVar, C74965n nVar) {
        C60870cx cxVar;
        Optional optional;
        C80911g gVar;
        C76590bg bgVar2 = bgVar;
        C74965n nVar2 = nVar;
        C80399l lVar = (C80399l) C80401n.f220656k.createBuilder();
        C80303ay ayVar = (C80303ay) C80307bb.f220382e.createBuilder();
        C22871g gVar2 = this.f212189k;
        C58480gp e = C58485gu.m89837e();
        e.mo55396h(bgVar2.mo72262d("callee", "PhoneNumberContact", "contact_id"));
        e.mo55396h(bgVar2.mo72262d("callee", "ContactableEntity", "contact_id", "PhoneNumber", "id_form"));
        C58485gu f = e.mo55394f();
        if (f.isEmpty()) {
            C58485gu b = bgVar2.mo72260b("callee", "PersonalContact", "person");
            if (b.isEmpty()) {
                this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.NO_CONTACT, C83044e.f226656a);
                cxVar = C118826c.f331423b;
            } else {
                f e2 = df.e(b);
                if (e2.b.isEmpty()) {
                    this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.NO_CONTACT_ID, C83044e.f226656a);
                    cxVar = C118826c.f331423b;
                } else {
                    Optional map = bgVar2.mo72265g(C76564ah.f211801a, "format").map(C76794ax.f212176a);
                    if (map.isEmpty()) {
                        optional = Optional.empty();
                    } else {
                        Optional a = v.a(x.class, (String) map.get());
                        if (a.isEmpty()) {
                            ((C58970a) ((C58970a) f212177a.mo56226d()).mo56372aa(3666)).mo56389s("%s is an unknown call format", map.get());
                        }
                        optional = a;
                    }
                    C22871g gVar3 = this.f212189k;
                    Optional empty = Optional.empty();
                    Optional map2 = bgVar2.mo72265g(C76565ai.f211802a, "provider").filter(C76782al.f212164a).map(C76783am.f212165a);
                    if (map2.isPresent()) {
                        empty = map2.flatMap(new C76784an(this));
                        if (empty.isEmpty()) {
                            ((C58970a) ((C58970a) f212177a.mo56226d()).mo56372aa(3663)).mo56386p("Punt, the application (provided by package) is not supported");
                            this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.APPLICATION_NOT_SUPPORTED, C83044e.f226656a);
                            gVar = C80913i.m128772a(C118826c.f331423b);
                            C80913i g = C80913i.m128776e(gVar3, gVar).mo74712g("[NGA] get client", new C77358p(this, e2, optional, nVar2));
                            C80913i g2 = g.mo74712g("[NGA] get contact ids", new C77359q(this, e2, optional, nVar2)).mo74712g("[NGA] disambiguate contact ids", new C77360r(this, e2, nVar2, ayVar));
                            cxVar = g2.f221879a.mo28210j(g2.f221880b, "[NGA] fulfillPersonalContact", new C80909e(new C77361s(this, g, optional, bgVar, e2, nVar, ayVar, lVar)));
                        }
                    }
                    Optional g3 = bgVar2.mo72265g(C76574ar.f211813a, "provider");
                    if (g3.isPresent()) {
                        empty = g3.flatMap(new C76785ao(this));
                        if (empty.isEmpty()) {
                            ((C58970a) ((C58970a) f212177a.mo56226d()).mo56372aa(3662)).mo56386p("Punt, the application (provided by mid) is not supported");
                            this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.APPLICATION_BY_MID_NOT_SUPPORTED, C83044e.f226656a);
                            gVar = C80913i.m128772a(C118826c.f331423b);
                            C80913i g4 = C80913i.m128776e(gVar3, gVar).mo74712g("[NGA] get client", new C77358p(this, e2, optional, nVar2));
                            C80913i g22 = g4.mo74712g("[NGA] get contact ids", new C77359q(this, e2, optional, nVar2)).mo74712g("[NGA] disambiguate contact ids", new C77360r(this, e2, nVar2, ayVar));
                            cxVar = g22.f221879a.mo28210j(g22.f221880b, "[NGA] fulfillPersonalContact", new C80909e(new C77361s(this, g4, optional, bgVar, e2, nVar, ayVar, lVar)));
                        }
                    }
                    if (!empty.isEmpty() || !bgVar2.mo72266h("provider").isPresent()) {
                        if (empty.isEmpty()) {
                            C58480gp e3 = C58485gu.m89837e();
                            e3.mo55396h(bgVar2.mo72262d("options", "CallParameterSetting", "parameter"));
                            e3.mo55396h(bgVar2.mo72262d("options"));
                            C58485gu f2 = e3.mo55394f();
                            int i = ((C58724pq) f2).f156474d;
                            if (i > 1) {
                                ((C58970a) ((C58970a) f212177a.mo56226d()).mo56372aa(3660)).mo56386p("Go to OPA - we do not understand many options.");
                                this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.MULTIPLE_OPTIONS, C83044e.f226656a);
                                gVar = C80913i.m128772a(C118826c.f331423b);
                            } else if (i == 1) {
                                empty = Optional.ofNullable((y) this.f212193q.get(C80884a.m128736a((String) f2.get(0))));
                                if (empty.isEmpty()) {
                                    ((C58970a) ((C58970a) f212177a.mo56226d()).mo56372aa(3659)).mo56386p("Punt, unrecognized option.");
                                    this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.OPTION_NOT_SUPPORTED, C83044e.f226656a);
                                    gVar = C80913i.m128772a(C118826c.f331423b);
                                }
                            }
                            C80913i g42 = C80913i.m128776e(gVar3, gVar).mo74712g("[NGA] get client", new C77358p(this, e2, optional, nVar2));
                            C80913i g222 = g42.mo74712g("[NGA] get contact ids", new C77359q(this, e2, optional, nVar2)).mo74712g("[NGA] disambiguate contact ids", new C77360r(this, e2, nVar2, ayVar));
                            cxVar = g222.f221879a.mo28210j(g222.f221880b, "[NGA] fulfillPersonalContact", new C80909e(new C77361s(this, g42, optional, bgVar, e2, nVar, ayVar, lVar)));
                        }
                        gVar = C80913i.m128775d(empty);
                        C80913i g422 = C80913i.m128776e(gVar3, gVar).mo74712g("[NGA] get client", new C77358p(this, e2, optional, nVar2));
                        C80913i g2222 = g422.mo74712g("[NGA] get contact ids", new C77359q(this, e2, optional, nVar2)).mo74712g("[NGA] disambiguate contact ids", new C77360r(this, e2, nVar2, ayVar));
                        cxVar = g2222.f221879a.mo28210j(g2222.f221880b, "[NGA] fulfillPersonalContact", new C80909e(new C77361s(this, g422, optional, bgVar, e2, nVar, ayVar, lVar)));
                    } else {
                        ((C58970a) ((C58970a) f212177a.mo56226d()).mo56372aa(3661)).mo56386p("Go to OPA - we do not understand 'provider' argument format.");
                        this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.INVALID_PROVIDER_ARGUMENT, C83044e.f226656a);
                        gVar = C80913i.m128772a(C118826c.f331423b);
                        C80913i g4222 = C80913i.m128776e(gVar3, gVar).mo74712g("[NGA] get client", new C77358p(this, e2, optional, nVar2));
                        C80913i g22222 = g4222.mo74712g("[NGA] get contact ids", new C77359q(this, e2, optional, nVar2)).mo74712g("[NGA] disambiguate contact ids", new C77360r(this, e2, nVar2, ayVar));
                        cxVar = g22222.f221879a.mo28210j(g22222.f221880b, "[NGA] fulfillPersonalContact", new C80909e(new C77361s(this, g4222, optional, bgVar, e2, nVar, ayVar, lVar)));
                    }
                }
            }
        } else {
            if (((C58724pq) f).f156474d > 1) {
                this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.MULTIPLE_PHONE_NUMBERS, C83044e.f226656a);
            } else if (C77356n.m124127c(this.f212184f, (String) f.get(0))) {
                this.f212190l.mo76648a(nVar.mo71336k(), C82835ce.EMERGENCY_PHONE_NUMBER, C83044e.f226656a);
            } else {
                String str = (String) f.get(0);
                c cVar = this.f212185g;
                C52286mc mcVar = (C52286mc) C52289mf.f137258j.createBuilder();
                mcVar.copyOnWrite();
                ((C52289mf) mcVar.instance).f137268i = false;
                mcVar.copyOnWrite();
                str.getClass();
                ((C52289mf) mcVar.instance).f137262c = str;
                mcVar.copyOnWrite();
                ((C52289mf) mcVar.instance).f137263d = "PHONE_NUMBER";
                C51098gh a2 = C77280f.m124015a(cVar);
                mcVar.copyOnWrite();
                C52289mf mfVar = (C52289mf) mcVar.instance;
                a2.getClass();
                mfVar.f137261b = a2;
                mfVar.f137260a = 6;
                C81442m.m129557s(lVar, C77280f.m124016b((C52289mf) mcVar.build()));
                lVar.mo74319k(23192);
                C80293ao aoVar = (C80293ao) C80295aq.f220357c.createBuilder();
                C80338cf cfVar = C80338cf.f220449a;
                aoVar.copyOnWrite();
                C80295aq aqVar = (C80295aq) aoVar.instance;
                cfVar.getClass();
                aqVar.f220360b = cfVar;
                aqVar.f220359a = 7;
                C81442m.m129555q(lVar, aoVar);
            }
            cxVar = C118826c.f331423b;
        }
        return gVar2.mo28209i(cxVar, "[NGA] InitiateCallFulfiller.fulfill", new C77357o(lVar, ayVar));
    }
}
