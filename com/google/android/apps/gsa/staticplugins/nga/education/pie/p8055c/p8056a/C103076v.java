package com.google.android.apps.gsa.staticplugins.nga.education.pie.p8055c.p8056a;

import android.content.Context;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80212bf;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80213bg;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80216bj;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80217bk;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80223bq;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80224br;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80225bs;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80229bw;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80230bx;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80231by;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80234ca;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80248co;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80253h;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6279d.p6280a.C80261p;
import com.google.android.apps.gsa.nga.shared.p6352l.p6353a.C81371e;
import com.google.android.apps.gsa.nga.shared.p6352l.p6353a.C81372f;
import com.google.android.apps.gsa.nga.shared.p6352l.p6353a.p6355b.C81362h;
import com.google.android.apps.gsa.nga.shared.p6352l.p6353a.p6355b.C81363i;
import com.google.android.apps.gsa.nga.shared.p6352l.p6353a.p6355b.C81364j;
import com.google.android.apps.gsa.nga.shared.p6352l.p6353a.p6355b.C81368n;
import com.google.android.apps.gsa.nga.shared.p6369ui.p6405b.C82193a;
import com.google.android.apps.gsa.nga.shared.p6407v.C83305i;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82486gz;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82489hb;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82716pm;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82717pn;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82718po;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82719pp;
import com.google.android.apps.gsa.shared.util.p7159c.C90873ag;
import com.google.android.apps.gsa.shared.util.p7159c.C90875ai;
import com.google.android.apps.gsa.staticplugins.nga.education.pie.C103032a;
import com.google.android.apps.gsa.staticplugins.nga.education.pie.p8055c.C103087e;
import com.google.android.apps.gsa.staticplugins.nga.education.pie.p8055c.C103098p;
import com.google.android.libraries.gsa.p1876k.C22871g;
import com.google.common.base.C58835az;
import com.google.common.p4522b.C58370cn;
import com.google.common.p4522b.C58485gu;
import com.google.common.p4522b.C58495hd;
import com.google.common.p4522b.C58528ij;
import com.google.common.p4526f.p4527a.C58970a;
import com.google.common.p4526f.p4527a.C58974d;
import com.google.common.util.concurrent.C60826bg;
import com.google.common.util.concurrent.C60836bq;
import com.google.protobuf.C62912at;
import com.google.protobuf.C62942bv;
import com.google.protobuf.C62947c;
import com.google.protobuf.C62971cq;
import java.util.List;
import java.util.Set;
import java.util.concurrent.atomic.AtomicBoolean;
import p3186j$.util.Collection;
import p3186j$.util.Optional;
import p3186j$.util.stream.Stream;

/* renamed from: com.google.android.apps.gsa.staticplugins.nga.education.pie.c.a.v */
/* compiled from: PG */
public final class C103076v implements C103087e {

    /* renamed from: a */
    public static final C58974d f287703a = C58974d.m91136j();

    /* renamed from: g */
    private static final C58528ij f287704g = C58528ij.m90012L(C80212bf.TEST_SIGNAL, C80212bf.DEVICE_NAVIGATION_MODE, C80212bf.ASSISTANT_UI_DARK_MODE);

    /* renamed from: b */
    public final C103098p f287705b;

    /* renamed from: c */
    public final C22871g f287706c;

    /* renamed from: d */
    public final C58528ij f287707d;

    /* renamed from: e */
    public final C83305i f287708e;

    /* renamed from: f */
    public final C103078x f287709f;

    /* renamed from: h */
    private final Context f287710h;

    /* renamed from: i */
    private final C103032a f287711i;

    /* renamed from: j */
    private final C81372f f287712j;

    /* renamed from: k */
    private final AtomicBoolean f287713k = new AtomicBoolean(false);

    /* renamed from: l */
    private final C60836bq f287714l = new C60836bq();

    public C103076v(Context context, C103098p pVar, C103032a aVar, C103078x xVar, C22871g gVar, Set set, C81372f fVar, C83305i iVar) {
        this.f287710h = context;
        this.f287705b = pVar;
        this.f287711i = aVar;
        this.f287709f = xVar;
        this.f287706c = gVar;
        this.f287707d = (C58528ij) Collection.EL.stream(set).filter(C103061g.f287683a).collect(C58370cn.f155947b);
        this.f287712j = fVar;
        this.f287708e = iVar;
    }

    /* renamed from: c */
    public static C81368n m170871c(C81368n nVar, C80229bw bwVar) {
        C81363i iVar;
        C81363i iVar2;
        C81364j jVar = (C81364j) nVar.toBuilder();
        C81362h hVar = (C81362h) C81363i.f222692d.createBuilder();
        if (nVar.f222704b == 1) {
            iVar = (C81363i) nVar.f222705c;
        } else {
            iVar = C81363i.f222692d;
        }
        C80229bw bwVar2 = iVar.f222695b;
        if (bwVar2 == null) {
            bwVar2 = C80229bw.f220111b;
        }
        hVar.copyOnWrite();
        C81363i iVar3 = (C81363i) hVar.instance;
        bwVar2.getClass();
        iVar3.f222695b = bwVar2;
        iVar3.f222694a |= 1;
        if (nVar.f222704b == 1) {
            iVar2 = (C81363i) nVar.f222705c;
        } else {
            iVar2 = C81363i.f222692d;
        }
        C62971cq cqVar = iVar2.f222696c;
        C58485gu guVar = (C58485gu) Stream.CC.concat(Collection.EL.stream(cqVar), Stream.CC.m71935of(bwVar)).skip((long) Math.max(0, cqVar.size() - 19)).collect(C58370cn.f155946a);
        hVar.copyOnWrite();
        C81363i iVar4 = (C81363i) hVar.instance;
        C62971cq cqVar2 = iVar4.f222696c;
        if (!cqVar2.mo58948c()) {
            iVar4.f222696c = C62942bv.mutableCopy(cqVar2);
        }
        C62947c.addAll((Iterable) guVar, (List) iVar4.f222696c);
        jVar.copyOnWrite();
        C81368n nVar2 = (C81368n) jVar.instance;
        C81363i iVar5 = (C81363i) hVar.build();
        iVar5.getClass();
        nVar2.f222705c = iVar5;
        nVar2.f222704b = 1;
        return (C81368n) jVar.build();
    }

    /* renamed from: f */
    public static boolean m170872f(C80229bw bwVar, C80213bg bgVar) {
        return Collection.EL.stream(bwVar.f220113a).anyMatch(new C103065k(bgVar));
    }

    /* renamed from: a */
    public final void mo93594a(C80213bg bgVar, C80248co coVar, C80217bk bkVar) {
        C83305i iVar = this.f287708e;
        C82718po f = C82719pp.m132240f();
        f.mo76447b(coVar.name());
        ((C82489hb) f).f225395b = "EVENT_SIGNAL_SATISFIED_".concat(String.valueOf(C80212bf.m128095a(bgVar.f220080b).name()));
        iVar.mo75579d(f.mo76446a());
        C90875ai.m148465b(C103074t.f287702a, this.f287714l.mo57305b(new C103073s(this, bgVar, coVar, bkVar), C60826bg.f164896a), this.f287706c, "[NGA] handleEventSignal finished").mo85223a(C103057c.f287678a);
    }

    /* renamed from: b */
    public final void mo93595b() {
        C83305i iVar = this.f287708e;
        C82716pm c = C82717pn.m132233c();
        ((C82486gz) c).f225387b = "COORDINATOR_TRACKING_STARTED";
        iVar.mo75579d(c.mo76438a());
        if (this.f287713k.getAndSet(true)) {
            C83305i iVar2 = this.f287708e;
            C82716pm c2 = C82717pn.m132233c();
            ((C82486gz) c2).f225387b = "COORDINATOR_TRACKING_ERROR_ALREADY_RUNNING";
            iVar2.mo75579d(c2.mo76438a());
            ((C58970a) ((C58970a) f287703a.mo56226d()).mo56372aa(21445)).mo56386p("[NGA Pie]Another call to SetupSignalTracking when it is already running");
            return;
        }
        new C90873ag(this.f287705b.mo93592a(), this.f287706c, "[NGA] usecaseStore.readState() call finished.", new C103059e(this)).mo85223a(new C103060f(this));
        this.f287713k.set(false);
    }

    /* renamed from: d */
    public final C58835az mo93596d(C80229bw bwVar, C58495hd hdVar) {
        Optional optional;
        C80261p pVar;
        C80253h hVar;
        C80223bq bqVar;
        C80223bq bqVar2;
        C80231by byVar = (C80231by) C80234ca.f220121b.createBuilder();
        boolean z = true;
        for (C80213bg bgVar : bwVar.f220113a) {
            if (f287704g.contains(C80212bf.m128095a(bgVar.f220080b))) {
                C80230bx bxVar = C80230bx.TRIGGER_CONDITION_EVALUATION_UNKNOWN;
                switch (C80212bf.m128095a(bgVar.f220080b).ordinal()) {
                    case 0:
                    case 1:
                    case 2:
                    case 6:
                        ((C58970a) ((C58970a) f287703a.mo56225c()).mo56372aa(21428)).mo56389s("Signal condition %s is not an On-demand Signal.", C80212bf.m128095a(bgVar.f220080b).name());
                        optional = Optional.empty();
                        break;
                    case 3:
                        C81371e a = this.f287712j.mo75051a();
                        if (bgVar.f220080b == 6) {
                            pVar = (C80261p) bgVar.f220081c;
                        } else {
                            pVar = C80261p.f220198c;
                        }
                        if (pVar.f220201b && (a == C81371e.THREE_BUTTON || a == C81371e.TWO_BUTTON)) {
                            C80216bj bjVar = (C80216bj) C80217bk.f220088c.createBuilder();
                            C62912at atVar = C62912at.f169862a;
                            bjVar.copyOnWrite();
                            C80217bk bkVar = (C80217bk) bjVar.instance;
                            atVar.getClass();
                            bkVar.f220091b = atVar;
                            bkVar.f220090a = 5;
                            optional = Optional.m71637of((C80217bk) bjVar.build());
                            break;
                        } else {
                            optional = Optional.empty();
                            break;
                        }
                    case 4:
                        if (bgVar.f220080b == 7) {
                            hVar = (C80253h) bgVar.f220081c;
                        } else {
                            hVar = C80253h.f220183c;
                        }
                        if (hVar.f220186b != C82193a.m130503a(this.f287710h)) {
                            optional = Optional.empty();
                            break;
                        } else {
                            C80216bj bjVar2 = (C80216bj) C80217bk.f220088c.createBuilder();
                            C62912at atVar2 = C62912at.f169862a;
                            bjVar2.copyOnWrite();
                            C80217bk bkVar2 = (C80217bk) bjVar2.instance;
                            atVar2.getClass();
                            bkVar2.f220091b = atVar2;
                            bkVar2.f220090a = 5;
                            optional = Optional.m71637of((C80217bk) bjVar2.build());
                            break;
                        }
                    case 5:
                        if (bgVar.f220080b == 4) {
                            bqVar = (C80223bq) bgVar.f220081c;
                        } else {
                            bqVar = C80223bq.f220097c;
                        }
                        if (!bqVar.f220099a) {
                            optional = Optional.empty();
                            break;
                        } else {
                            C80216bj bjVar3 = (C80216bj) C80217bk.f220088c.createBuilder();
                            C80224br brVar = (C80224br) C80225bs.f220102c.createBuilder();
                            if (bgVar.f220080b == 4) {
                                bqVar2 = (C80223bq) bgVar.f220081c;
                            } else {
                                bqVar2 = C80223bq.f220097c;
                            }
                            String str = bqVar2.f220100b;
                            brVar.copyOnWrite();
                            C80225bs bsVar = (C80225bs) brVar.instance;
                            str.getClass();
                            bsVar.f220104a |= 1;
                            bsVar.f220105b = str;
                            bjVar3.copyOnWrite();
                            C80217bk bkVar3 = (C80217bk) bjVar3.instance;
                            C80225bs bsVar2 = (C80225bs) brVar.build();
                            bsVar2.getClass();
                            bkVar3.f220091b = bsVar2;
                            bkVar3.f220090a = 3;
                            optional = Optional.m71637of((C80217bk) bjVar3.build());
                            break;
                        }
                    default:
                        optional = Optional.empty();
                        break;
                }
                if (!optional.isPresent()) {
                    return new C58835az(C80230bx.ON_DEMAND_SIGNALS_NOT_SATISFIED, C80234ca.f220121b);
                }
                byVar.mo74292a(bgVar.f220082d, (C80217bk) optional.get());
            } else if (hdVar.containsKey(bgVar)) {
                byVar.mo74292a(bgVar.f220082d, (C80217bk) hdVar.get(bgVar));
            } else {
                z = false;
            }
        }
        if (!z) {
            return new C58835az(C80230bx.ON_DEMAND_SIGNALS_SATISFIED, C80234ca.f220121b);
        }
        return new C58835az(C80230bx.ALL_SIGNALS_SATISFIED, (C80234ca) byVar.build());
    }

    /* renamed from: e */
    public final void mo93597e(C80248co coVar, C80229bw bwVar) {
        for (C80213bg bgVar : bwVar.f220113a) {
            C83305i iVar = this.f287708e;
            C82718po f = C82719pp.m132240f();
            f.mo76447b(coVar.name());
            ((C82489hb) f).f225395b = "SET_UP_EVENT_SIGNAL_TRACKING_".concat(String.valueOf(C80212bf.m128095a(bgVar.f220080b).name()));
            iVar.mo75579d(f.mo76446a());
            C80230bx bxVar = C80230bx.TRIGGER_CONDITION_EVALUATION_UNKNOWN;
            switch (C80212bf.m128095a(bgVar.f220080b).ordinal()) {
                case 0:
                    ((C58970a) ((C58970a) f287703a.mo56226d()).mo56372aa(21430)).mo56389s("Signal condition %s is not yet handled.", C80212bf.m128095a(bgVar.f220080b).name());
                    break;
                case 1:
                case 2:
                    C80212bf.m128095a(bgVar.f220080b).name();
                    coVar.name();
                    this.f287711i.mo93575o(coVar, bgVar);
                    break;
                case 3:
                case 4:
                case 5:
                    C80212bf.m128095a(bgVar.f220080b).name();
                    break;
                case 6:
                    ((C58970a) ((C58970a) f287703a.mo56226d()).mo56372aa(21432)).mo56389s("Signal type not set for a condition provided by usecase: %s", coVar.name());
                    break;
            }
        }
    }
}
