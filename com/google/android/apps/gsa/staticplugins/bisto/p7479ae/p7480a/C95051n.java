package com.google.android.apps.gsa.staticplugins.bisto.p7479ae.p7480a;

import androidx.annotation.C0826b;
import com.google.android.apps.gsa.nga.api.C74723ca;
import com.google.android.apps.gsa.nga.api.C74724cb;
import com.google.android.apps.gsa.nga.api.a.ad;
import com.google.android.apps.gsa.nga.api.a.bw;
import com.google.android.apps.gsa.nga.api.a.cb;
import com.google.android.apps.gsa.nga.api.a.h;
import com.google.android.apps.gsa.nga.api.a.i;
import com.google.android.apps.gsa.nga.api.bh;
import com.google.android.apps.gsa.nga.api.p5883a.C74670ac;
import com.google.android.apps.gsa.nga.api.p5883a.C74672br;
import com.google.android.apps.gsa.nga.api.p5883a.C74674bv;
import com.google.android.apps.gsa.nga.shared.p6339f.p6341b.C81030c;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81043a;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81044b;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81045c;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81046d;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81051i;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81052j;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81053k;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81054l;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81055m;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81056n;
import com.google.android.apps.gsa.nga.shared.p6339f.p6343d.C81062c;
import com.google.android.apps.gsa.search.core.p6513aj.C84516aa;
import com.google.android.apps.gsa.shared.bisto.C89606ad;
import com.google.android.apps.gsa.shared.bisto.C89656k;
import com.google.android.apps.gsa.shared.bisto.C89687z;
import com.google.android.apps.gsa.shared.bisto.p7028a.C89496ch;
import com.google.android.apps.gsa.shared.bisto.p7029b.C89643n;
import com.google.android.apps.gsa.shared.util.p7159c.C90877ak;
import com.google.android.apps.gsa.staticplugins.bisto.p7465ac.p7473g.C94980q;
import com.google.android.apps.gsa.staticplugins.bisto.p7478ad.C95026a;
import com.google.android.apps.gsa.staticplugins.bisto.p7479ae.C95099bi;
import com.google.android.apps.gsa.staticplugins.bisto.p7479ae.C95130w;
import com.google.android.apps.gsa.staticplugins.bisto.p7489g.C95355bf;
import com.google.android.apps.gsa.staticplugins.bisto.p7489g.C95357bh;
import com.google.android.apps.gsa.staticplugins.bisto.p7510o.C95771bi;
import com.google.android.apps.gsa.staticplugins.bisto.p7514p.C95832d;
import com.google.android.apps.gsa.staticplugins.bisto.p7514p.C95834f;
import com.google.android.apps.gsa.staticplugins.bisto.p7514p.C95838j;
import com.google.android.apps.gsa.staticplugins.bisto.p7516r.C95850a;
import com.google.android.apps.search.assistant.surfaces.bisto.p9390c.p9392b.C124548d;
import com.google.android.apps.search.assistant.surfaces.bisto.p9403d.C124719q;
import com.google.android.libraries.gsa.p1876k.C22871g;
import com.google.android.libraries.gsa.p1876k.C22872h;
import com.google.android.libraries.search.p2904c.C37561eb;
import com.google.android.libraries.search.p2904c.C37672hs;
import com.google.android.libraries.search.p2904c.p2907ab.C37336c;
import com.google.android.p10712d.C142413ek;
import com.google.android.p10712d.C142531w;
import com.google.assistant.p3897e.p3917i.p3918a.C51247aq;
import com.google.assistant.p3897e.p3917i.p3918a.C51248ar;
import com.google.assistant.p3897e.p3917i.p3918a.C51249as;
import com.google.assistant.p3897e.p3917i.p3918a.C51250at;
import com.google.assistant.p3897e.p3917i.p3918a.C51303cs;
import com.google.assistant.p3897e.p3917i.p3918a.C51334dw;
import com.google.assistant.p3897e.p3917i.p3918a.C51337dz;
import com.google.assistant.p3897e.p3917i.p3918a.C51339ea;
import com.google.common.base.C58833ax;
import com.google.common.p4522b.C58485gu;
import com.google.common.p4526f.C58976aa;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.p4526f.C59104x;
import com.google.common.p4526f.p4527a.C58975e;
import com.google.common.p4552o.C60057jf;
import com.google.common.p4552o.C60087kg;
import com.google.common.p4552o.C60091kk;
import com.google.common.p4552o.C60092kl;
import com.google.common.util.concurrent.C60856cj;
import com.google.common.util.concurrent.C60870cx;
import com.google.protobuf.C63088z;
import com.google.speech.p5208h.C66626cx;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;
import p3186j$.util.Optional;

/* renamed from: com.google.android.apps.gsa.staticplugins.bisto.ae.a.n */
/* compiled from: PG */
public final class C95051n implements AutoCloseable, C95058u, C74723ca, C95044g, C89687z {

    /* renamed from: a */
    public static final C59071e f265910a = C59071e.m91332i("com.google.android.apps.gsa.staticplugins.bisto.ae.a.n");

    /* renamed from: A */
    private final C81030c f265911A;

    /* renamed from: b */
    public final C95046i f265912b;

    /* renamed from: c */
    public final C89656k f265913c;

    /* renamed from: d */
    public final C95099bi f265914d;

    /* renamed from: e */
    public final C95355bf f265915e;

    /* renamed from: f */
    public final Map f265916f = new HashMap();

    /* renamed from: g */
    public final C95357bh f265917g;

    /* renamed from: h */
    public Optional f265918h = Optional.empty();

    /* renamed from: i */
    public boolean f265919i;

    /* renamed from: j */
    public boolean f265920j;

    /* renamed from: k */
    public boolean f265921k;

    /* renamed from: l */
    public final Set f265922l = new HashSet();

    /* renamed from: m */
    public final Map f265923m = new HashMap();

    /* renamed from: n */
    public Optional f265924n = Optional.empty();

    /* renamed from: o */
    public C95045h f265925o;

    /* renamed from: p */
    private final C22871g f265926p;

    /* renamed from: q */
    private final C89606ad f265927q;

    /* renamed from: r */
    private final bh f265928r;

    /* renamed from: s */
    private final C58833ax f265929s;

    /* renamed from: t */
    private final C89496ch f265930t;

    /* renamed from: u */
    private final C95130w f265931u;

    /* renamed from: v */
    private final C94980q f265932v;

    /* renamed from: w */
    private final C95026a f265933w;

    /* renamed from: x */
    private final C84516aa f265934x;

    /* renamed from: y */
    private final boolean f265935y;

    /* renamed from: z */
    private volatile int f265936z = 0;

    public C95051n(C22871g gVar, C89606ad adVar, bh bhVar, C95046i iVar, C58833ax axVar, C89656k kVar, C95099bi biVar, C89496ch chVar, C95355bf bfVar, C95130w wVar, C81030c cVar, C95357bh bhVar2, C84516aa aaVar, C94980q qVar, C95026a aVar, C95850a aVar2) {
        C94980q qVar2 = qVar;
        this.f265926p = gVar;
        this.f265927q = adVar;
        this.f265928r = bhVar;
        this.f265912b = iVar;
        this.f265929s = axVar;
        this.f265913c = kVar;
        this.f265914d = biVar;
        this.f265931u = wVar;
        this.f265911A = cVar;
        this.f265917g = bhVar2;
        this.f265932v = qVar2;
        this.f265933w = aVar;
        adVar.mo83462h(this);
        if (axVar.mo56113h()) {
            ((C74724cb) axVar.mo56107c()).mo71098a(this);
        }
        qVar2.mo88892d(this, true);
        C58976aa aaVar2 = C58975e.f156826a;
        aVar2.f268408a.add(this);
        this.f265930t = chVar;
        this.f265915e = bfVar;
        this.f265934x = aaVar;
        this.f265935y = kVar.mo83555j(136);
    }

    /* renamed from: A */
    private final C37672hs m156997A(int i) {
        C37672hs a = this.f265911A.mo74823a();
        this.f265922l.add(a);
        this.f265923m.put(a, Integer.valueOf(i));
        return a;
    }

    /* renamed from: B */
    private final void m156998B(boolean z) {
        if (z && this.f265914d.mo89026d() && !this.f265915e.mo89279x()) {
            C59104x b = f265910a.mo56224b();
            b.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) b).mo56372aa(18140)).mo56386p("Playing open mic start sound");
            this.f265914d.mo89023b();
        }
    }

    /* renamed from: C */
    private final void m156999C(Optional optional, C37672hs hsVar) {
        if (optional.isPresent()) {
            this.f265912b.mo88887h((C95838j) optional.get());
            this.f265916f.put(hsVar, (C95838j) optional.get());
        }
    }

    /* renamed from: D */
    private final boolean m157000D(C37672hs hsVar) {
        return this.f265918h.isPresent() && this.f265916f.containsKey(hsVar);
    }

    /* renamed from: w */
    public static boolean m157001w(C37336c cVar) {
        C37561eb ebVar = (C37561eb) C90877ak.m148475i(cVar.mo40886c(), (Object) null);
        return (ebVar == null || ebVar.f99802a == 1) ? false : true;
    }

    /* renamed from: x */
    private final C81045c m157002x() {
        C81045c cVar = (C81045c) C81046d.f222125k.createBuilder();
        C124548d s = mo88979s();
        String e = this.f265931u.mo89055e();
        cVar.copyOnWrite();
        C81046d dVar = (C81046d) cVar.instance;
        e.getClass();
        dVar.f222127a |= 4;
        dVar.f222130d = e;
        String c = this.f265931u.mo89054c();
        cVar.copyOnWrite();
        C81046d dVar2 = (C81046d) cVar.instance;
        c.getClass();
        dVar2.f222127a |= 16;
        dVar2.f222132f = c;
        byte[] bArr = null;
        String O = s != null ? s.mo106474O() : null;
        boolean z = false;
        if (s != null) {
            C51249as asVar = (C51249as) C51250at.f133421d.createBuilder();
            asVar.copyOnWrite();
            C51250at atVar = (C51250at) asVar.instance;
            atVar.f133423a |= 1;
            atVar.f133425c = 1;
            C58485gu C = s.mo106462C();
            int size = C.size();
            for (int i = 0; i < size; i++) {
                C142531w wVar = (C142531w) C.get(i);
                C51247aq aqVar = (C51247aq) C51248ar.f133416d.createBuilder();
                C63088z zVar = wVar.f386759b;
                aqVar.copyOnWrite();
                C51248ar arVar = (C51248ar) aqVar.instance;
                zVar.getClass();
                arVar.f133418a |= 1;
                arVar.f133419b = zVar;
                C63088z zVar2 = wVar.f386760c;
                aqVar.copyOnWrite();
                C51248ar arVar2 = (C51248ar) aqVar.instance;
                zVar2.getClass();
                arVar2.f133418a |= 2;
                arVar2.f133420c = zVar2;
                asVar.mo53561a((C51248ar) aqVar.build());
            }
            bArr = ((C51250at) asVar.build()).toByteArray();
        }
        if (O != null) {
            cVar.copyOnWrite();
            C81046d dVar3 = (C81046d) cVar.instance;
            dVar3.f222127a |= 32;
            dVar3.f222133g = O;
        }
        if (bArr != null) {
            C63088z A = C63088z.m96139A(bArr);
            cVar.copyOnWrite();
            C81046d dVar4 = (C81046d) cVar.instance;
            dVar4.f222127a |= 64;
            dVar4.f222134h = A;
        }
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18099)).mo56359L("isDeviceLocked %b, isScreenOn %b, isScreenfulResultsEnabled %b", Boolean.valueOf(this.f265934x.f230023b.isDeviceLocked()), Boolean.valueOf(this.f265934x.mo78230d()), Boolean.valueOf(this.f265935y));
        if (!this.f265934x.f230023b.isDeviceLocked() && this.f265934x.mo78230d() && this.f265935y) {
            cVar.copyOnWrite();
            C81046d dVar5 = (C81046d) cVar.instance;
            dVar5.f222127a |= 256;
            dVar5.f222136j = true;
        }
        if (s == null || !s.mo106487aa()) {
            z = true;
        }
        cVar.copyOnWrite();
        C81046d dVar6 = (C81046d) cVar.instance;
        dVar6.f222127a |= 128;
        dVar6.f222135i = z;
        return cVar;
    }

    /* renamed from: y */
    private static C81055m m157003y(Optional optional) {
        if (!optional.isPresent()) {
            return (C81055m) C81056n.f222166c.createBuilder();
        }
        C81055m mVar = (C81055m) C81056n.f222166c.createBuilder();
        long j = ((C95834f) optional.get()).f268375a;
        mVar.copyOnWrite();
        C81056n nVar = (C81056n) mVar.instance;
        nVar.f222168a |= 1;
        nVar.f222169b = j;
        return mVar;
    }

    /* renamed from: z */
    private final C95838j m157004z(C37672hs hsVar) {
        return (C95838j) this.f265916f.get(hsVar);
    }

    /* renamed from: a */
    public final C37336c mo71067a(C37672hs hsVar) {
        C95049l lVar = new C95049l(this, hsVar);
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18102)).mo56386p("startListening");
        if (!C22872h.m42744d(C0826b.class)) {
            return (C37336c) C60856cj.m92910s(this.f265926p.mo28201a("startListening", lVar));
        }
        try {
            return (C37336c) lVar.mo17947a();
        } catch (Exception e) {
            throw new IllegalArgumentException("Must not happen", e);
        }
    }

    /* renamed from: b */
    public final C60870cx mo71068b(C37672hs hsVar) {
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18105)).mo56387q("stopListening. Invocation: %d", hsVar.f100059b);
        C95050m mVar = new C95050m(this, hsVar);
        if (!C22872h.m42744d(C0826b.class)) {
            return (C60870cx) C60856cj.m92910s(this.f265926p.mo28201a("stopListening", mVar));
        }
        try {
            return (C60870cx) mVar.mo17947a();
        } catch (Exception e) {
            throw new IllegalArgumentException("Must not happen", e);
        }
    }

    /* renamed from: c */
    public final Optional mo71094c(C37672hs hsVar) {
        return Optional.empty();
    }

    public final void close() {
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18107)).mo56386p("close");
        mo88971o();
        this.f265927q.mo83474t(this);
        this.f265932v.mo88893e(this);
        if (this.f265929s.mo56113h()) {
            ((C74724cb) this.f265929s.mo56107c()).mo71099b(this);
        }
    }

    /* renamed from: d */
    public final void mo71095d(ad adVar) {
        String str;
        i iVar;
        C37672hs hsVar = adVar.c;
        if (hsVar == null || !this.f265923m.containsKey(hsVar)) {
            C59104x d = f265910a.mo56226d();
            d.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) d).mo56372aa(18125)).mo56386p("#onError was called for unknown invocation token.");
            return;
        }
        Map map = this.f265923m;
        C37672hs hsVar2 = adVar.c;
        if (hsVar2 == null) {
            hsVar2 = C37672hs.f100056c;
        }
        Integer num = (Integer) map.get(hsVar2);
        if (num != null && num.equals(6)) {
            C95045h hVar = this.f265925o;
            if (hVar != null) {
                hVar.mo88976k((String) null);
            }
            this.f265919i = false;
        }
        if (adVar.a == 3) {
            h a = h.a(((i) adVar.b).a);
            if (a == null) {
                a = h.u;
            }
            if (a.equals(h.b) || a.equals(h.c) || a.equals(h.d)) {
                return;
            }
        }
        Map map2 = this.f265916f;
        C37672hs hsVar3 = adVar.c;
        if (hsVar3 == null) {
            hsVar3 = C37672hs.f100056c;
        }
        if (map2.containsKey(hsVar3)) {
            C37672hs hsVar4 = adVar.c;
            if (hsVar4 == null) {
                hsVar4 = C37672hs.f100056c;
            }
            if (m157000D(hsVar4)) {
                C37672hs hsVar5 = adVar.c;
                if (hsVar5 == null) {
                    hsVar5 = C37672hs.f100056c;
                }
                m157004z(hsVar5).mo89810k();
            }
        } else {
            C59071e eVar = f265910a;
            C59104x d2 = eVar.mo56226d();
            d2.mo56378ag(C58975e.f156826a, "DialogHandler");
            C59052c cVar = (C59052c) ((C59052c) d2).mo56372aa(18126);
            int i = adVar.a;
            int a2 = C74670ac.m120737a(i);
            int i2 = a2 - 1;
            if (a2 != 0) {
                if (i2 == 0) {
                    int i3 = 2;
                    if (i == 2 && (i3 = C74672br.m120741c(((Integer) adVar.b).intValue())) == 0) {
                        i3 = 1;
                    }
                    str = C74672br.m120739a(i3);
                } else if (i2 != 1) {
                    C59104x c = eVar.mo56225c();
                    c.mo56378ag(C58975e.f156826a, "DialogHandler");
                    ((C59052c) ((C59052c) c).mo56372aa(18106)).mo56386p("Unknown invocationError");
                    str = "unknown";
                } else {
                    if (i == 3) {
                        iVar = (i) adVar.b;
                    } else {
                        iVar = i.c;
                    }
                    h a3 = h.a(iVar.a);
                    if (a3 == null) {
                        a3 = h.u;
                    }
                    str = a3.name();
                }
                C37672hs hsVar6 = adVar.c;
                if (hsVar6 == null) {
                    hsVar6 = C37672hs.f100056c;
                }
                cVar.mo56352E("Received framework error %s for token %d not invoked. Ignoring", str, hsVar6.f100059b);
            } else {
                throw null;
            }
        }
        C95045h hVar2 = this.f265925o;
        if (hVar2 != null) {
            hVar2.mo88974i(0);
            ((C95771bi) this.f265925o).f268170n = true;
        }
        C37672hs hsVar7 = adVar.c;
        if (hsVar7 == null) {
            hsVar7 = C37672hs.f100056c;
        }
        mo88980t(hsVar7);
    }

    /* renamed from: e */
    public final void mo71096e(bw bwVar) {
        C59071e eVar = f265910a;
        C59104x b = eVar.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        C59052c cVar = (C59052c) ((C59052c) b).mo56372aa(18127);
        C37672hs hsVar = bwVar.a;
        if (hsVar == null) {
            hsVar = C37672hs.f100056c;
        }
        String a = C81062c.m129010a(Optional.m71637of(hsVar));
        int b2 = C74674bv.m120744b(bwVar.b);
        if (b2 == 0) {
            b2 = 1;
        }
        cVar.mo56354G("onErrorAfterAcceptingInvocation. Token:%s got rejected with status %s.", a, C74674bv.m120743a(b2));
        C37672hs hsVar2 = bwVar.a;
        if (hsVar2 == null || !this.f265923m.containsKey(hsVar2)) {
            C59104x d = eVar.mo56226d();
            d.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) d).mo56372aa(18128)).mo56386p("#onErrorAfterAcceptingInvocation was called for unknown invocation token.");
        } else if (this.f265936z == 0) {
            C37672hs hsVar3 = bwVar.a;
            if (hsVar3 == null) {
                hsVar3 = C37672hs.f100056c;
            }
            mo88980t(hsVar3);
        }
    }

    /* renamed from: f */
    public final void mo71097f(cb cbVar) {
        C95048k kVar = new C95048k(this, cbVar);
        if (C22872h.m42744d(C0826b.class)) {
            kVar.run();
        } else {
            this.f265926p.mo28212l("onQueryStatus", kVar);
        }
    }

    /* renamed from: g */
    public final void mo83589g() {
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18108)).mo56386p("gacsQueryStarted");
        this.f265921k = true;
        if (!this.f265923m.isEmpty()) {
            mo88971o();
        }
    }

    /* renamed from: h */
    public final int mo88965h() {
        return this.f265936z;
    }

    /* renamed from: i */
    public final void mo88966i(boolean z) {
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18123)).mo56389s("onEndpoint. shouldCloseMic: %b", Boolean.valueOf(z));
        C37672hs hsVar = null;
        for (C37672hs hsVar2 : this.f265923m.keySet()) {
            Integer num = (Integer) this.f265923m.get(hsVar2);
            if (num.equals(1) || num.equals(3) || num.equals(6)) {
                hsVar = hsVar2;
            }
        }
        if (hsVar != null) {
            this.f265928r.g(hsVar);
        } else {
            C59104x d = f265910a.mo56226d();
            d.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) d).mo56372aa(18124)).mo56386p("ignoring onEndpoint");
        }
        this.f265922l.clear();
        this.f265912b.mo88883d(z);
    }

    /* renamed from: j */
    public final boolean mo88875j(C37672hs hsVar) {
        return this.f265923m.containsKey(hsVar);
    }

    /* renamed from: k */
    public final void mo88967k(boolean z, boolean z2, Optional optional) {
        C59071e eVar = f265910a;
        C59104x b = eVar.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18129)).mo56358K("onGestureInvocation. AEP: %b, shouldOpenMic: %b", z, z2);
        if (this.f265920j) {
            C59104x b2 = eVar.mo56224b();
            b2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) b2).mo56372aa(18131)).mo56386p("onGestureInvocation is suppressed by follow on");
            return;
        }
        m156998B(z2);
        C37336c c = this.f265912b.mo88881c(z2);
        if (m157001w(c)) {
            C59104x c2 = eVar.mo56225c();
            c2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) c2).mo56372aa(18130)).mo56386p("WABD: AudioSourceOpeningStatus is failed.");
            return;
        }
        C37672hs A = m156997A(1);
        if (z) {
            this.f265917g.mo89292e(this.f265915e);
        }
        m156999C(optional, A);
        bh bhVar = this.f265928r;
        C81043a aVar = (C81043a) C81044b.f222115h.createBuilder();
        C81045c x = m157002x();
        x.copyOnWrite();
        C81046d dVar = (C81046d) x.instance;
        C81046d dVar2 = C81046d.f222125k;
        dVar.f222127a |= 1;
        dVar.f222128b = !z;
        C81046d dVar3 = (C81046d) x.build();
        aVar.copyOnWrite();
        C81044b bVar = (C81044b) aVar.instance;
        dVar3.getClass();
        bVar.f222119c = dVar3;
        bVar.f222118b = 1;
        C81055m y = m157003y(optional);
        aVar.copyOnWrite();
        C81044b bVar2 = (C81044b) aVar.instance;
        C81056n nVar = (C81056n) y.build();
        nVar.getClass();
        bVar2.f222122f = nVar;
        bVar2.f222117a |= 16;
        bhVar.f(c, A, (C81044b) aVar.build());
    }

    /* renamed from: l */
    public final void mo88968l(boolean z, boolean z2) {
        C59071e eVar = f265910a;
        C59104x b = eVar.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18138)).mo56389s("onTranscriptionRequest. AEP: %b", Boolean.valueOf(z));
        m156998B(z2);
        C37336c c = this.f265912b.mo88881c(z2);
        if (m157001w(c)) {
            C59104x c2 = eVar.mo56225c();
            c2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) c2).mo56372aa(18139)).mo56386p("WABD: AudioSourceOpeningStatus is failed.");
            return;
        }
        C37672hs A = m156997A(6);
        this.f265919i = true;
        this.f265928r.j(c, A, !z);
    }

    /* renamed from: m */
    public final void mo88969m(C95045h hVar) {
        C58976aa aaVar = C58975e.f156826a;
        this.f265925o = hVar;
    }

    /* renamed from: n */
    public final boolean mo88970n() {
        return this.f265919i;
    }

    /* renamed from: o */
    public final void mo88971o() {
        C59104x b = f265910a.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18122)).mo56389s("onCancel. shouldCloseMic: %b", true);
        this.f265912b.mo88883d(true);
        this.f265919i = false;
        this.f265920j = false;
        for (C37672hs c : this.f265923m.keySet()) {
            this.f265928r.c(c);
        }
        this.f265922l.clear();
    }

    /* renamed from: p */
    public final void mo88972p(boolean z, Optional optional) {
        C59071e eVar = f265910a;
        C59104x b = eVar.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18132)).mo56358K("onGestureOrFetchInvocation. AEP: %b, shouldOpenMic: %b", false, z);
        if (this.f265920j) {
            C59104x b2 = eVar.mo56224b();
            b2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) b2).mo56372aa(18134)).mo56386p("onGestureOrFetchInvocation is suppressed by follow on");
            return;
        }
        C37336c c = this.f265912b.mo88881c(z);
        if (m157001w(c)) {
            C59104x c2 = eVar.mo56225c();
            c2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) c2).mo56372aa(18133)).mo56386p("WABD: AudioSourceOpeningStatus is failed.");
            return;
        }
        C37672hs A = m156997A(3);
        m156999C(optional, A);
        bh bhVar = this.f265928r;
        C81043a aVar = (C81043a) C81044b.f222115h.createBuilder();
        C81045c x = m157002x();
        x.copyOnWrite();
        C81046d dVar = (C81046d) x.instance;
        C81046d dVar2 = C81046d.f222125k;
        dVar.f222127a |= 1;
        dVar.f222128b = true;
        C81046d dVar3 = (C81046d) x.build();
        aVar.copyOnWrite();
        C81044b bVar = (C81044b) aVar.instance;
        dVar3.getClass();
        bVar.f222119c = dVar3;
        bVar.f222118b = 1;
        C81053k kVar = (C81053k) C81054l.f222161d.createBuilder();
        kVar.copyOnWrite();
        C81054l lVar = (C81054l) kVar.instance;
        lVar.f222163a |= 1;
        lVar.f222164b = true;
        C81054l lVar2 = (C81054l) kVar.build();
        aVar.copyOnWrite();
        C81044b bVar2 = (C81044b) aVar.instance;
        lVar2.getClass();
        bVar2.f222121e = lVar2;
        bVar2.f222117a |= 8;
        C81055m y = m157003y(optional);
        aVar.copyOnWrite();
        C81044b bVar3 = (C81044b) aVar.instance;
        C81056n nVar = (C81056n) y.build();
        nVar.getClass();
        bVar3.f222122f = nVar;
        bVar3.f222117a |= 16;
        bhVar.f(c, A, (C81044b) aVar.build());
    }

    /* renamed from: q */
    public final void mo88973q(Optional optional) {
        C59071e eVar = f265910a;
        C59104x b = eVar.mo56224b();
        b.mo56378ag(C58975e.f156826a, "DialogHandler");
        ((C59052c) ((C59052c) b).mo56372aa(18135)).mo56389s("onHotwordInvocation. shouldOpenMic: %b", false);
        C124548d s = mo88979s();
        boolean z = !this.f265927q.mo83479y() && this.f265933w.mo88940b(s);
        if (this.f265927q.mo83479y()) {
            this.f265927q.mo83458d();
        }
        if (!z) {
            C59104x d = eVar.mo56226d();
            d.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) d).mo56372aa(18137)).mo56386p("onHotwordInvocation suppressed");
            this.f265917g.mo89293f(this.f265915e);
            return;
        }
        C37336c c = this.f265912b.mo88881c(false);
        if (m157001w(c)) {
            C59104x c2 = eVar.mo56225c();
            c2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) c2).mo56372aa(18136)).mo56386p("WABD: AudioSourceOpeningStatus is failed.");
            this.f265917g.mo89293f(this.f265915e);
            return;
        }
        C37672hs A = m156997A(2);
        this.f265924n = optional;
        if (optional.isPresent()) {
            this.f265912b.mo88887h((C95838j) optional.get());
            this.f265916f.put(A, (C95838j) optional.get());
        }
        bh bhVar = this.f265928r;
        C81043a aVar = (C81043a) C81044b.f222115h.createBuilder();
        C81045c x = m157002x();
        C51303cs csVar = (C51303cs) C51334dw.f133658ab.createBuilder();
        if (s != null && C124719q.HEADPHONES == s.mo106513k()) {
            C51337dz dzVar = (C51337dz) C51339ea.f133718c.createBuilder();
            C142413ek B = s.mo106461B();
            C59104x b2 = eVar.mo56224b();
            b2.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) b2).mo56372aa(18103)).mo56389s("device OHD state = %s", B);
            int f = C95130w.m157243f(B);
            dzVar.copyOnWrite();
            C51339ea eaVar = (C51339ea) dzVar.instance;
            eaVar.f133721b = f - 2;
            eaVar.f133720a |= 1;
            csVar.copyOnWrite();
            C51334dw dwVar = (C51334dw) csVar.instance;
            C51339ea eaVar2 = (C51339ea) dzVar.build();
            eaVar2.getClass();
            dwVar.f133662C = eaVar2;
            dwVar.f133688b |= 128;
        }
        x.copyOnWrite();
        C81046d dVar = (C81046d) x.instance;
        C51334dw dwVar2 = (C51334dw) csVar.build();
        C81046d dVar2 = C81046d.f222125k;
        dwVar2.getClass();
        dVar.f222129c = dwVar2;
        dVar.f222127a |= 2;
        C81046d dVar3 = (C81046d) x.build();
        aVar.copyOnWrite();
        C81044b bVar = (C81044b) aVar.instance;
        dVar3.getClass();
        bVar.f222119c = dVar3;
        bVar.f222118b = 1;
        C81051i iVar = (C81051i) C81052j.f222154f.createBuilder();
        if (s != null) {
            boolean e = C89643n.m145920e(s);
            iVar.copyOnWrite();
            C81052j jVar = (C81052j) iVar.instance;
            jVar.f222156a |= 4;
            jVar.f222158c = e;
            if (e) {
                C66626cx cxVar = C66626cx.BISTO_ON_EAR;
                iVar.copyOnWrite();
                C81052j jVar2 = (C81052j) iVar.instance;
                jVar2.f222160e = cxVar.f181272r;
                jVar2.f222156a |= 16;
            }
        }
        if (optional.isPresent()) {
            long j = ((C95832d) optional.get()).f268364c;
            iVar.copyOnWrite();
            C81052j jVar3 = (C81052j) iVar.instance;
            jVar3.f222156a |= 8;
            jVar3.f222159d = j;
        }
        aVar.copyOnWrite();
        C81044b bVar2 = (C81044b) aVar.instance;
        C81052j jVar4 = (C81052j) iVar.build();
        jVar4.getClass();
        bVar2.f222120d = jVar4;
        bVar2.f222117a |= 4;
        bhVar.d(c, A, (C81044b) aVar.build());
    }

    /* renamed from: r */
    public final C95832d mo88978r() {
        return (C95832d) m157004z((C37672hs) this.f265918h.get());
    }

    /* renamed from: s */
    public final C124548d mo88979s() {
        return this.f265930t.mo83401b(this.f265915e.mo89270k());
    }

    /* renamed from: t */
    public final void mo88980t(C37672hs hsVar) {
        if (mo88982v()) {
            mo88978r().mo89805f(C60091kk.HOTWORD_QUERY_RESPONSE_RECEIVED, (C60057jf) null, (C60087kg) C60092kl.f162479k.createBuilder(), (String) null);
        }
        Integer num = (Integer) this.f265923m.get(hsVar);
        if (num != null && num.equals(2) && this.f265913c.mo83555j(177)) {
            C95355bf bfVar = this.f265915e;
            C59104x b = C95357bh.f266784a.mo56224b();
            b.mo56378ag(C58975e.f156826a, "ClassicDeviceHelper");
            ((C59052c) ((C59052c) b).mo56372aa(14953)).mo56386p("Sent VoiceResponseComplete");
            bfVar.mo89257D(2, 8, new byte[0]);
        }
        this.f265923m.remove(hsVar);
        this.f265919i = false;
        this.f265920j = false;
        this.f265921k = false;
        this.f265918h = Optional.empty();
        this.f265924n = Optional.empty();
        this.f265916f.clear();
        this.f265915e.mo89277r(2);
    }

    /* renamed from: u */
    public final void mo88981u(int i) {
        if (!this.f265913c.mo83555j(161) || !(i == 3 || i == 4)) {
            this.f265936z = i;
            C59104x b = f265910a.mo56224b();
            b.mo56378ag(C58975e.f156826a, "DialogHandler");
            ((C59052c) ((C59052c) b).mo56372aa(18142)).mo56387q("Query status: %d", this.f265936z);
            C95045h hVar = this.f265925o;
            if (hVar != null) {
                hVar.mo88974i(this.f265936z);
            }
        }
    }

    /* renamed from: v */
    public final boolean mo88982v() {
        return this.f265918h.isPresent() && m157000D((C37672hs) this.f265918h.get());
    }
}
