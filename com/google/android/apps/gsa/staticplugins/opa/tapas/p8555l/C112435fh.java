package com.google.android.apps.gsa.staticplugins.opa.tapas.p8555l;

import com.google.android.apps.gsa.nga.engine.p6262y.p6271e.p6272a.C80005cz;
import com.google.android.apps.gsa.nga.engine.p6262y.p6271e.p6272a.C80007da;
import com.google.android.apps.gsa.nga.engine.p6262y.p6271e.p6272a.C80012i;
import com.google.android.apps.gsa.search.core.p6805i.C86124t;
import com.google.android.apps.gsa.shared.logger.p7054d.C89885b;
import com.google.android.apps.gsa.shared.p7066m.C90063do;
import com.google.android.apps.gsa.staticplugins.opa.tapas.framework.TapasJni;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8475b.p8482g.C111136ae;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8491c.p8492a.C111248k;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8555l.p8556a.C112145l;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8555l.p8563g.C112471ap;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8555l.p8563g.C112557l;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8555l.p8564h.C112600b;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113045at;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113048aw;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113078bz;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113083cd;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113090ck;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113091d;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113101n;
import com.google.android.apps.gsa.staticplugins.opa.tapas.p8571p.C113103p;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113339cj;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113395ef;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113396eg;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113397eh;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113398ei;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113399ej;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113405ep;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.C113415ez;
import com.google.android.apps.search.assistant.platform.p9171i.p9217c.p9220b.p9224d.C121437c;
import com.google.android.apps.search.assistant.platform.p9171i.p9217c.p9220b.p9224d.C121438d;
import com.google.android.apps.search.assistant.platform.p9171i.p9217c.p9220b.p9224d.C121455u;
import com.google.android.apps.search.assistant.platform.p9171i.p9230e.p9231a.C121537f;
import com.google.android.libraries.gsa.p1876k.C22871g;
import com.google.android.libraries.p1730f.C21370a;
import com.google.assistant.p3781ad.p3789d.C48570ad;
import com.google.assistant.p3781ad.p3789d.p3791b.C48667ab;
import com.google.assistant.p3781ad.p3789d.p3791b.p3792a.C48588ad;
import com.google.assistant.p3781ad.p3789d.p3791b.p3792a.C48661v;
import com.google.assistant.p3781ad.p3789d.p3791b.p3792a.C48665z;
import com.google.assistant.p3860as.C49740ac;
import com.google.common.base.C58881cr;
import com.google.common.base.C58886cw;
import com.google.common.p4522b.C58485gu;
import com.google.common.p4522b.C58528ij;
import com.google.common.p4526f.C58976aa;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.p4526f.C59104x;
import com.google.common.p4526f.p4527a.C58975e;
import com.google.common.p4552o.p4553a.C59506cc;
import com.google.common.p4552o.p4553a.C59508ce;
import com.google.common.p4552o.p4553a.C59509cf;
import com.google.common.util.concurrent.C60870cx;
import java.util.Collections;
import java.util.List;
import java.util.Map;
import java.util.Random;
import p3186j$.util.Collection;
import p3186j$.util.Objects;
import p3186j$.util.Optional;
import p3186j$.util.OptionalInt;
import p5460g.p5461a.C69464a;

/* renamed from: com.google.android.apps.gsa.staticplugins.opa.tapas.l.fh */
/* compiled from: PG */
public final class C112435fh extends C112145l {

    /* renamed from: a */
    public static final C121537f f311928a = C121537f.m200840b("CortexScoreAdjuster", C112145l.f311417q);

    /* renamed from: b */
    public static final C59071e f311929b = C59071e.m91332i("com.google.android.apps.gsa.staticplugins.opa.tapas.l.fh");

    /* renamed from: c */
    public final C86124t f311930c;

    /* renamed from: d */
    public final TapasJni f311931d;

    /* renamed from: e */
    public final C112600b f311932e;

    /* renamed from: f */
    public final C21370a f311933f;

    /* renamed from: g */
    public final C112471ap f311934g;

    /* renamed from: h */
    public final C111248k f311935h;

    /* renamed from: i */
    public final C112557l f311936i;

    /* renamed from: j */
    public final C22871g f311937j;

    /* renamed from: k */
    public final C22871g f311938k;

    /* renamed from: l */
    public final C112228cf f311939l;

    /* renamed from: m */
    public final C112229cg f311940m;

    /* renamed from: n */
    public final Random f311941n;

    /* renamed from: o */
    public final C111136ae f311942o;

    /* renamed from: p */
    public final boolean f311943p;

    /* renamed from: r */
    private final C69464a f311944r;

    public C112435fh(C86124t tVar, C112600b bVar, C112471ap apVar, C21370a aVar, C69464a aVar2, C111248k kVar, C22871g gVar, C22871g gVar2, C112557l lVar, TapasJni tapasJni, C112228cf cfVar, C112229cg cgVar, Random random, C111136ae aeVar) {
        this.f311930c = tVar;
        this.f311932e = bVar;
        this.f311934g = apVar;
        this.f311933f = aVar;
        this.f311944r = aVar2;
        this.f311935h = kVar;
        this.f311937j = gVar;
        this.f311938k = gVar2;
        this.f311936i = lVar;
        this.f311931d = tapasJni;
        this.f311939l = cfVar;
        this.f311940m = cgVar;
        this.f311941n = random;
        this.f311942o = aeVar;
        this.f311943p = tVar.mo79746e(C90063do.f249601gc);
    }

    /* renamed from: b */
    public static long m186260b(C48665z zVar, long j, int i) {
        return Collection.EL.stream(zVar.f125774b).filter(new C112411es(j, i)).mapToLong(C112412et.f311886a).sum();
    }

    /* renamed from: d */
    public static C80007da m186261d(Optional optional, C48588ad adVar) {
        C80007da daVar = adVar.f125587h;
        if (daVar == null) {
            daVar = C80007da.f219520C;
        }
        if (optional.isEmpty()) {
            return daVar;
        }
        C80005cz czVar = (C80005cz) daVar.toBuilder();
        C111136ae.m184907h(czVar, (String) optional.get());
        return (C80007da) czVar.build();
    }

    /* renamed from: j */
    public static void m186262j(Map map, List list) {
        map.clear();
        map.putAll(C113339cj.m187496d(list));
    }

    /* renamed from: a */
    public final C48667ab mo99422a() {
        return C48667ab.CORTEX_SCORE_ADJUSTER;
    }

    /* renamed from: c */
    public final C80012i mo99520c(List list, C113405ep epVar, C80007da daVar) {
        return (C80012i) f311928a.mo105235d("createTapasModelRequest", new C112404el(this, list, epVar, daVar));
    }

    /* renamed from: e */
    public final C112433ff mo99521e(C113415ez ezVar, C48588ad adVar, Optional optional, C113083cd cdVar, C58528ij ijVar) {
        C113399ej ejVar;
        C48588ad adVar2 = adVar;
        Map unmodifiableMap = Collections.unmodifiableMap(adVar2.f125582c);
        Map unmodifiableMap2 = Collections.unmodifiableMap(adVar2.f125583d);
        C112433ff ffVar = new C112433ff();
        ffVar.f311924a = ezVar;
        ffVar.f311925b = (C113396eg) ezVar.mo100207g().toBuilder();
        if ((adVar2.f125580a & 1) != 0) {
            C48661v vVar = adVar2.f125581b;
            if (vVar == null) {
                vVar = C48661v.f125758b;
            }
            f311928a.mo105241j("addAppUsageFeatures", new C112413eu(ffVar, vVar, this.f311933f.mo26870b()));
        }
        C121537f fVar = f311928a;
        fVar.mo105241j("addCommunicationFeatures", new C112418ez(ffVar, unmodifiableMap, unmodifiableMap2, ijVar));
        if ((adVar2.f125580a & 2) != 0) {
            C49740ac acVar = adVar2.f125585f;
            if (acVar == null) {
                acVar = C49740ac.f128432e;
            }
            fVar.mo105241j("addHabitsProfileFeatures", new C112432fe(this, ffVar, acVar));
        }
        if ((adVar2.f125580a & 4) != 0) {
            try {
                if (!optional.isEmpty()) {
                    C113415ez ezVar2 = ffVar.f311924a;
                    C113101n nVar = adVar2.f125586g;
                    if (nVar == null) {
                        nVar = C113101n.f313365l;
                    }
                    C113045at atVar = (C113045at) optional.get();
                    C113395ef d = C113083cd.m187081d(0.0f, 0.0f);
                    C113398ei eiVar = (C113398ei) C113399ej.f314007x.createBuilder();
                    eiVar.copyOnWrite();
                    C113399ej ejVar2 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar2.f314010b = d;
                    ejVar2.f314009a |= 1;
                    eiVar.copyOnWrite();
                    C113399ej ejVar3 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar3.f314011c = d;
                    ejVar3.f314009a |= 2;
                    eiVar.copyOnWrite();
                    C113399ej ejVar4 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar4.f314012d = d;
                    ejVar4.f314009a |= 4;
                    eiVar.copyOnWrite();
                    C113399ej ejVar5 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar5.f314013e = d;
                    ejVar5.f314009a |= 8;
                    eiVar.copyOnWrite();
                    C113399ej ejVar6 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar6.f314016h = d;
                    ejVar6.f314009a |= 64;
                    eiVar.copyOnWrite();
                    C113399ej ejVar7 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar7.f314017i = d;
                    ejVar7.f314009a |= 128;
                    eiVar.copyOnWrite();
                    C113399ej ejVar8 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar8.f314014f = d;
                    ejVar8.f314009a |= 16;
                    eiVar.copyOnWrite();
                    C113399ej ejVar9 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar9.f314015g = d;
                    ejVar9.f314009a |= 32;
                    eiVar.copyOnWrite();
                    C113399ej ejVar10 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar10.f314018j = d;
                    ejVar10.f314009a |= 256;
                    eiVar.copyOnWrite();
                    C113399ej ejVar11 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar11.f314019k = d;
                    ejVar11.f314009a |= 512;
                    eiVar.copyOnWrite();
                    C113399ej ejVar12 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar12.f314020l = d;
                    ejVar12.f314009a |= 1024;
                    eiVar.copyOnWrite();
                    C113399ej ejVar13 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar13.f314021m = d;
                    ejVar13.f314009a |= 2048;
                    eiVar.copyOnWrite();
                    C113399ej ejVar14 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar14.f314022n = d;
                    ejVar14.f314009a |= 4096;
                    eiVar.copyOnWrite();
                    C113399ej ejVar15 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar15.f314023o = d;
                    ejVar15.f314009a |= 8192;
                    eiVar.copyOnWrite();
                    C113399ej ejVar16 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar16.f314024p = d;
                    ejVar16.f314009a |= 16384;
                    eiVar.copyOnWrite();
                    C113399ej ejVar17 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar17.f314025q = d;
                    ejVar17.f314009a |= 32768;
                    eiVar.copyOnWrite();
                    C113399ej ejVar18 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar18.f314026r = d;
                    ejVar18.f314009a |= 65536;
                    eiVar.copyOnWrite();
                    C113399ej ejVar19 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar19.f314027s = d;
                    ejVar19.f314009a |= C89885b.S3REQUEST_VALUE;
                    eiVar.copyOnWrite();
                    C113399ej ejVar20 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar20.f314028t = d;
                    ejVar20.f314009a |= C89885b.HTTP_VALUE;
                    eiVar.copyOnWrite();
                    C113399ej ejVar21 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar21.f314029u = d;
                    ejVar21.f314009a |= 524288;
                    eiVar.copyOnWrite();
                    C113399ej ejVar22 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar22.f314030v = d;
                    ejVar22.f314009a |= 1048576;
                    eiVar.copyOnWrite();
                    C113399ej ejVar23 = (C113399ej) eiVar.instance;
                    d.getClass();
                    ejVar23.f314031w = d;
                    ejVar23.f314009a |= C89885b.NOW_VALUE;
                    if (nVar.f313368b.size() == 0) {
                        ejVar = (C113399ej) eiVar.build();
                    } else {
                        C113103p pVar = nVar.f313369c;
                        if (pVar == null) {
                            pVar = C113103p.f313378b;
                        }
                        C113091d a = C113048aw.m187028a(pVar);
                        C113395ef d2 = C113083cd.m187081d(0.0f, (float) a.f313354b);
                        eiVar.copyOnWrite();
                        C113399ej ejVar24 = (C113399ej) eiVar.instance;
                        d2.getClass();
                        ejVar24.f314011c = d2;
                        ejVar24.f314009a |= 2;
                        C113395ef d3 = C113083cd.m187081d(0.0f, (float) a.f313354b);
                        eiVar.copyOnWrite();
                        C113399ej ejVar25 = (C113399ej) eiVar.instance;
                        d3.getClass();
                        ejVar25.f314013e = d3;
                        ejVar25.f314009a |= 8;
                        C113395ef d4 = C113083cd.m187081d(0.0f, (float) a.f313354b);
                        eiVar.copyOnWrite();
                        C113399ej ejVar26 = (C113399ej) eiVar.instance;
                        d4.getClass();
                        ejVar26.f314017i = d4;
                        ejVar26.f314009a |= 128;
                        C113395ef d5 = C113083cd.m187081d(0.0f, (float) a.f313354b);
                        eiVar.copyOnWrite();
                        C113399ej ejVar27 = (C113399ej) eiVar.instance;
                        d5.getClass();
                        ejVar27.f314015g = d5;
                        ejVar27.f314009a |= 32;
                        C113395ef d6 = C113083cd.m187081d(0.0f, (float) a.f313354b);
                        eiVar.copyOnWrite();
                        C113399ej ejVar28 = (C113399ej) eiVar.instance;
                        d6.getClass();
                        ejVar28.f314019k = d6;
                        ejVar28.f314009a |= 512;
                        Map unmodifiableMap3 = Collections.unmodifiableMap(nVar.f313370d);
                        if (unmodifiableMap3.containsKey(ezVar2.mo100199L())) {
                            C113103p pVar2 = (C113103p) unmodifiableMap3.get(ezVar2.mo100199L());
                            pVar2.getClass();
                            C113091d a2 = C113048aw.m187028a(pVar2);
                            C113395ef d7 = C113083cd.m187081d((float) a2.f313354b, (float) a2.f313355c);
                            eiVar.copyOnWrite();
                            C113399ej ejVar29 = (C113399ej) eiVar.instance;
                            d7.getClass();
                            ejVar29.f314010b = d7;
                            ejVar29.f314009a |= 1;
                            C113395ef d8 = C113083cd.m187081d((float) a2.f313354b, (float) a.f313354b);
                            eiVar.copyOnWrite();
                            C113399ej ejVar30 = (C113399ej) eiVar.instance;
                            d8.getClass();
                            ejVar30.f314011c = d8;
                            ejVar30.f314009a |= 2;
                            Optional e = C113048aw.m187031e(atVar, pVar2);
                            if (e.isPresent()) {
                                C113395ef d9 = C113083cd.m187081d((float) ((C113091d) e.get()).f313354b, (float) ((C113091d) e.get()).f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar31 = (C113399ej) eiVar.instance;
                                d9.getClass();
                                ejVar31.f314021m = d9;
                                ejVar31.f314009a |= 2048;
                            }
                            Optional d10 = C113048aw.m187030d(atVar, pVar2);
                            if (d10.isPresent()) {
                                C113395ef d11 = C113083cd.m187081d((float) ((C113091d) d10.get()).f313354b, (float) ((C113091d) d10.get()).f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar32 = (C113399ej) eiVar.instance;
                                d11.getClass();
                                ejVar32.f314020l = d11;
                                ejVar32.f314009a |= 1024;
                            }
                        }
                        Map unmodifiableMap4 = Collections.unmodifiableMap(nVar.f313371e);
                        if (unmodifiableMap4.containsKey(Integer.valueOf(ezVar2.mo100204d()))) {
                            C113103p pVar3 = (C113103p) unmodifiableMap4.get(Integer.valueOf(ezVar2.mo100204d()));
                            pVar3.getClass();
                            C113091d a3 = C113048aw.m187028a(pVar3);
                            C113091d dVar = a3.f313356d;
                            float f = (float) (dVar == null ? C113091d.f313351e : dVar).f313354b;
                            if (dVar == null) {
                                dVar = C113091d.f313351e;
                            }
                            C113395ef d12 = C113083cd.m187081d(f, (float) dVar.f313355c);
                            eiVar.copyOnWrite();
                            C113399ej ejVar33 = (C113399ej) eiVar.instance;
                            d12.getClass();
                            ejVar33.f314012d = d12;
                            ejVar33.f314009a |= 4;
                            C113395ef d13 = C113083cd.m187081d((float) a3.f313354b, (float) a.f313354b);
                            eiVar.copyOnWrite();
                            C113399ej ejVar34 = (C113399ej) eiVar.instance;
                            d13.getClass();
                            ejVar34.f314013e = d13;
                            ejVar34.f314009a |= 8;
                            Optional e2 = C113048aw.m187031e(atVar, pVar3);
                            if (e2.isPresent()) {
                                C113091d dVar2 = ((C113091d) e2.get()).f313356d;
                                if (dVar2 == null) {
                                    dVar2 = C113091d.f313351e;
                                }
                                float f2 = (float) dVar2.f313354b;
                                C113091d dVar3 = ((C113091d) e2.get()).f313356d;
                                if (dVar3 == null) {
                                    dVar3 = C113091d.f313351e;
                                }
                                C113395ef d14 = C113083cd.m187081d(f2, (float) dVar3.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar35 = (C113399ej) eiVar.instance;
                                d14.getClass();
                                ejVar35.f314023o = d14;
                                ejVar35.f314009a |= 8192;
                            }
                            Optional d15 = C113048aw.m187030d(atVar, pVar3);
                            if (d15.isPresent()) {
                                C113091d dVar4 = ((C113091d) d15.get()).f313356d;
                                if (dVar4 == null) {
                                    dVar4 = C113091d.f313351e;
                                }
                                float f3 = (float) dVar4.f313354b;
                                C113091d dVar5 = ((C113091d) d15.get()).f313356d;
                                if (dVar5 == null) {
                                    dVar5 = C113091d.f313351e;
                                }
                                C113395ef d16 = C113083cd.m187081d(f3, (float) dVar5.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar36 = (C113399ej) eiVar.instance;
                                d16.getClass();
                                ejVar36.f314022n = d16;
                                ejVar36.f314009a |= 4096;
                            }
                        }
                        Map unmodifiableMap5 = Collections.unmodifiableMap(nVar.f313375i);
                        if (unmodifiableMap5.containsKey(Integer.valueOf(ezVar2.mo100210j().getNumber()))) {
                            C113103p pVar4 = (C113103p) unmodifiableMap5.get(Integer.valueOf(ezVar2.mo100210j().getNumber()));
                            pVar4.getClass();
                            C113091d a4 = C113048aw.m187028a(pVar4);
                            C113091d dVar6 = a4.f313356d;
                            float f4 = (float) (dVar6 == null ? C113091d.f313351e : dVar6).f313354b;
                            if (dVar6 == null) {
                                dVar6 = C113091d.f313351e;
                            }
                            C113395ef d17 = C113083cd.m187081d(f4, (float) dVar6.f313355c);
                            eiVar.copyOnWrite();
                            C113399ej ejVar37 = (C113399ej) eiVar.instance;
                            d17.getClass();
                            ejVar37.f314014f = d17;
                            ejVar37.f314009a |= 16;
                            C113395ef d18 = C113083cd.m187081d((float) a4.f313354b, (float) a.f313354b);
                            eiVar.copyOnWrite();
                            C113399ej ejVar38 = (C113399ej) eiVar.instance;
                            d18.getClass();
                            ejVar38.f314015g = d18;
                            ejVar38.f314009a |= 32;
                            Optional e3 = C113048aw.m187031e(atVar, pVar4);
                            if (e3.isPresent()) {
                                C113091d dVar7 = ((C113091d) e3.get()).f313356d;
                                if (dVar7 == null) {
                                    dVar7 = C113091d.f313351e;
                                }
                                float f5 = (float) dVar7.f313354b;
                                C113091d dVar8 = ((C113091d) e3.get()).f313356d;
                                if (dVar8 == null) {
                                    dVar8 = C113091d.f313351e;
                                }
                                C113395ef d19 = C113083cd.m187081d(f5, (float) dVar8.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar39 = (C113399ej) eiVar.instance;
                                d19.getClass();
                                ejVar39.f314025q = d19;
                                ejVar39.f314009a |= 32768;
                            }
                            Optional d20 = C113048aw.m187030d(atVar, pVar4);
                            if (d20.isPresent()) {
                                C113091d dVar9 = ((C113091d) d20.get()).f313356d;
                                if (dVar9 == null) {
                                    dVar9 = C113091d.f313351e;
                                }
                                float f6 = (float) dVar9.f313354b;
                                C113091d dVar10 = ((C113091d) d20.get()).f313356d;
                                if (dVar10 == null) {
                                    dVar10 = C113091d.f313351e;
                                }
                                C113395ef d21 = C113083cd.m187081d(f6, (float) dVar10.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar40 = (C113399ej) eiVar.instance;
                                d21.getClass();
                                ejVar40.f314024p = d21;
                                ejVar40.f314009a |= 16384;
                            }
                        }
                        Map unmodifiableMap6 = Collections.unmodifiableMap(nVar.f313374h);
                        if (unmodifiableMap6.containsKey(Integer.valueOf(ezVar2.mo100211k().f125915O))) {
                            C113103p pVar5 = (C113103p) unmodifiableMap6.get(Integer.valueOf(ezVar2.mo100211k().f125915O));
                            pVar5.getClass();
                            C113091d a5 = C113048aw.m187028a(pVar5);
                            C113091d dVar11 = a5.f313356d;
                            float f7 = (float) (dVar11 == null ? C113091d.f313351e : dVar11).f313354b;
                            if (dVar11 == null) {
                                dVar11 = C113091d.f313351e;
                            }
                            C113395ef d22 = C113083cd.m187081d(f7, (float) dVar11.f313355c);
                            eiVar.copyOnWrite();
                            C113399ej ejVar41 = (C113399ej) eiVar.instance;
                            d22.getClass();
                            ejVar41.f314016h = d22;
                            ejVar41.f314009a |= 64;
                            C113395ef d23 = C113083cd.m187081d((float) a5.f313354b, (float) a.f313354b);
                            eiVar.copyOnWrite();
                            C113399ej ejVar42 = (C113399ej) eiVar.instance;
                            d23.getClass();
                            ejVar42.f314017i = d23;
                            ejVar42.f314009a |= 128;
                            Optional e4 = C113048aw.m187031e(atVar, pVar5);
                            if (e4.isPresent()) {
                                C113091d dVar12 = ((C113091d) e4.get()).f313356d;
                                if (dVar12 == null) {
                                    dVar12 = C113091d.f313351e;
                                }
                                float f8 = (float) dVar12.f313354b;
                                C113091d dVar13 = ((C113091d) e4.get()).f313356d;
                                if (dVar13 == null) {
                                    dVar13 = C113091d.f313351e;
                                }
                                C113395ef d24 = C113083cd.m187081d(f8, (float) dVar13.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar43 = (C113399ej) eiVar.instance;
                                d24.getClass();
                                ejVar43.f314027s = d24;
                                ejVar43.f314009a |= C89885b.S3REQUEST_VALUE;
                            }
                            Optional d25 = C113048aw.m187030d(atVar, pVar5);
                            if (d25.isPresent()) {
                                C113091d dVar14 = ((C113091d) d25.get()).f313356d;
                                if (dVar14 == null) {
                                    dVar14 = C113091d.f313351e;
                                }
                                float f9 = (float) dVar14.f313354b;
                                C113091d dVar15 = ((C113091d) d25.get()).f313356d;
                                if (dVar15 == null) {
                                    dVar15 = C113091d.f313351e;
                                }
                                C113395ef d26 = C113083cd.m187081d(f9, (float) dVar15.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar44 = (C113399ej) eiVar.instance;
                                d26.getClass();
                                ejVar44.f314026r = d26;
                                ejVar44.f314009a |= 65536;
                            }
                        }
                        Map unmodifiableMap7 = Collections.unmodifiableMap(nVar.f313376j);
                        Optional O = ezVar2.mo100056O();
                        if (O.isPresent() && unmodifiableMap7.containsKey(O.get())) {
                            C113103p pVar6 = (C113103p) unmodifiableMap7.get(O.get());
                            pVar6.getClass();
                            C113091d a6 = C113048aw.m187028a(pVar6);
                            C113091d dVar16 = a6.f313356d;
                            float f10 = (float) (dVar16 == null ? C113091d.f313351e : dVar16).f313354b;
                            if (dVar16 == null) {
                                dVar16 = C113091d.f313351e;
                            }
                            C113395ef d27 = C113083cd.m187081d(f10, (float) dVar16.f313355c);
                            eiVar.copyOnWrite();
                            C113399ej ejVar45 = (C113399ej) eiVar.instance;
                            d27.getClass();
                            ejVar45.f314018j = d27;
                            ejVar45.f314009a |= 256;
                            C113395ef d28 = C113083cd.m187081d((float) a6.f313354b, (float) a.f313354b);
                            eiVar.copyOnWrite();
                            C113399ej ejVar46 = (C113399ej) eiVar.instance;
                            d28.getClass();
                            ejVar46.f314019k = d28;
                            ejVar46.f314009a |= 512;
                            Optional e5 = C113048aw.m187031e(atVar, pVar6);
                            if (e5.isPresent()) {
                                C113091d dVar17 = ((C113091d) e5.get()).f313356d;
                                if (dVar17 == null) {
                                    dVar17 = C113091d.f313351e;
                                }
                                float f11 = (float) dVar17.f313354b;
                                C113091d dVar18 = ((C113091d) e5.get()).f313356d;
                                if (dVar18 == null) {
                                    dVar18 = C113091d.f313351e;
                                }
                                C113395ef d29 = C113083cd.m187081d(f11, (float) dVar18.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar47 = (C113399ej) eiVar.instance;
                                d29.getClass();
                                ejVar47.f314029u = d29;
                                ejVar47.f314009a |= 524288;
                            }
                            Optional d30 = C113048aw.m187030d(atVar, pVar6);
                            if (d30.isPresent()) {
                                C113091d dVar19 = ((C113091d) d30.get()).f313356d;
                                if (dVar19 == null) {
                                    dVar19 = C113091d.f313351e;
                                }
                                float f12 = (float) dVar19.f313354b;
                                C113091d dVar20 = ((C113091d) d30.get()).f313356d;
                                if (dVar20 == null) {
                                    dVar20 = C113091d.f313351e;
                                }
                                C113395ef d31 = C113083cd.m187081d(f12, (float) dVar20.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar48 = (C113399ej) eiVar.instance;
                                d31.getClass();
                                ejVar48.f314028t = d31;
                                ejVar48.f314009a |= C89885b.HTTP_VALUE;
                            }
                        }
                        Optional d32 = C112557l.m186378d(ezVar2);
                        Map unmodifiableMap8 = Collections.unmodifiableMap(nVar.f313372f);
                        if (d32.isPresent() && unmodifiableMap8.containsKey(d32.get())) {
                            C113103p pVar7 = (C113103p) unmodifiableMap8.get(d32.get());
                            pVar7.getClass();
                            C113091d a7 = C113048aw.m187028a(pVar7);
                            C113395ef d33 = C113083cd.m187081d((float) a7.f313354b, (float) a7.f313355c);
                            eiVar.copyOnWrite();
                            C113399ej ejVar49 = (C113399ej) eiVar.instance;
                            d33.getClass();
                            ejVar49.f314030v = d33;
                            ejVar49.f314009a |= 1048576;
                        }
                        Optional b = C112557l.m186376b(ezVar2);
                        Map unmodifiableMap9 = Collections.unmodifiableMap(nVar.f313373g);
                        if (b.isPresent()) {
                            Optional e6 = cdVar.f313334o.mo99348a((C48570ad) b.get()).mo99343e();
                            if (e6.isPresent() && unmodifiableMap9.containsKey(e6.get())) {
                                C113103p pVar8 = (C113103p) unmodifiableMap9.get(e6.get());
                                pVar8.getClass();
                                C113091d a8 = C113048aw.m187028a(pVar8);
                                C113395ef d34 = C113083cd.m187081d((float) a8.f313354b, (float) a8.f313355c);
                                eiVar.copyOnWrite();
                                C113399ej ejVar50 = (C113399ej) eiVar.instance;
                                d34.getClass();
                                ejVar50.f314031w = d34;
                                ejVar50.f314009a |= C89885b.NOW_VALUE;
                            }
                        }
                        ejVar = (C113399ej) eiVar.build();
                    }
                    C113396eg egVar = ffVar.f311925b;
                    egVar.copyOnWrite();
                    C113397eh ehVar = (C113397eh) egVar.instance;
                    ejVar.getClass();
                    ehVar.f314005d = ejVar;
                    ehVar.f314002a |= 4;
                } else {
                    throw new IllegalArgumentException("required fields are not present in the context");
                }
            } catch (RuntimeException e7) {
                C59104x c = f311929b.mo56225c();
                c.mo56378ag(C58975e.f156826a, "CortexScoreAdjuster");
                ((C59052c) ((C59052c) ((C59052c) c).mo56382g(e7)).mo56372aa(27614)).mo56389s("Failed to compute user profile features: %s", e7);
                f311928a.mo105240i("tapasUserProfileFeaturesExtractor_extractFeaturesFromPrecomputedStats_exception");
            }
        } else {
            C113396eg egVar2 = ffVar.f311925b;
            C113399ej ejVar51 = C113399ej.f314007x;
            egVar2.copyOnWrite();
            C113397eh ehVar2 = (C113397eh) egVar2.instance;
            ejVar51.getClass();
            ehVar2.f314005d = ejVar51;
            ehVar2.f314002a |= 4;
        }
        return ffVar;
    }

    /* renamed from: f */
    public final C121438d mo99522f(C121437c cVar, C80012i iVar) {
        if (this.f311930c.mo79746e(C90063do.f249364cD)) {
            C58881cr a = C58886cw.m90973a(new C112414ev(this, iVar));
            if (!this.f311930c.mo79746e(C90063do.f249601gc)) {
                a.mo6453a();
            }
            ((C121455u) cVar).f337109a = Optional.m71637of(a);
        }
        C59506cc ccVar = (C59506cc) C59509cf.f157898d.createBuilder();
        C59508ce b = this.f311931d.mo99231b();
        ccVar.copyOnWrite();
        C59509cf cfVar = (C59509cf) ccVar.instance;
        cfVar.f157902c = b.f157897i;
        cfVar.f157900a |= 1;
        OptionalInt optionalInt = this.f311931d.f310694f;
        Objects.requireNonNull(ccVar);
        optionalInt.ifPresent(new C112417ey(ccVar));
        ((C121455u) cVar).f337110b = Optional.m71637of((C59509cf) ccVar.build());
        C58976aa aaVar = C58975e.f156826a;
        return cVar.mo105146a();
    }

    /* renamed from: g */
    public final C121438d mo99523g() {
        C121437c a = C121438d.m200684a();
        C59506cc ccVar = (C59506cc) C59509cf.f157898d.createBuilder();
        C59508ce b = this.f311931d.mo99231b();
        ccVar.copyOnWrite();
        C59509cf cfVar = (C59509cf) ccVar.instance;
        cfVar.f157902c = b.f157897i;
        cfVar.f157900a |= 1;
        ((C121455u) a).f337110b = Optional.m71637of((C59509cf) ccVar.build());
        return a.mo105146a();
    }

    /* renamed from: h */
    public final C60870cx mo99524h(C58485gu guVar, String str, C60870cx cxVar) {
        C113083cd cdVar = (C113083cd) this.f311944r.mo17428b();
        if (!this.f311943p) {
            C22871g gVar = cdVar.f313333n;
            cdVar.f313335p = gVar.mo28209i(C113090ck.m187088a(cdVar.f313323d, cdVar.f313324e, gVar), "is enabled", new C113078bz(cdVar, guVar, str));
        }
        if (this.f311943p) {
            return this.f311937j.mo28210j(cxVar, "addAllFeatures", new C112405em(this, guVar, str, cdVar));
        }
        return this.f311937j.mo28210j(cxVar, "addFeatures", new C112406en(this, guVar, cdVar));
    }

    /* renamed from: i */
    public final C60870cx mo99416i(C113405ep epVar, Map map) {
        C121537f fVar = f311928a;
        String s = epVar.mo100186s();
        return fVar.mo105234c("adjust".concat(s), new C112430fc(this, epVar, map));
    }
}
