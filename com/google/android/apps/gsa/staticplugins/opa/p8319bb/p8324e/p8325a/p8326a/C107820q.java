package com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.p8326a;

import android.app.assist.AssistContent;
import android.app.assist.AssistStructure;
import android.content.Context;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.text.TextUtils;
import com.evernote.android.state.BuildConfig;
import com.google.android.apps.gsa.assist.C9348as;
import com.google.android.apps.gsa.assist.C9356b;
import com.google.android.apps.gsa.assist.p501a.C9318f;
import com.google.android.apps.gsa.assist.p501a.C9321i;
import com.google.android.apps.gsa.assist.p507f.p508a.C9413b;
import com.google.android.apps.gsa.assistant.shared.C73798aa;
import com.google.android.apps.gsa.assistant.shared.bd;
import com.google.android.apps.gsa.assistant.shared.l.e;
import com.google.android.apps.gsa.nga.api.a.bx;
import com.google.android.apps.gsa.nga.api.a.by;
import com.google.android.apps.gsa.nga.api.a.bz;
import com.google.android.apps.gsa.nga.api.a.cb;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6277b.C80116d;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6277b.C80118f;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6277b.C80120h;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6277b.C80122j;
import com.google.android.apps.gsa.nga.shared.p6275aa.p6278c.C80151b;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81046d;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81048f;
import com.google.android.apps.gsa.nga.shared.p6339f.p6342c.C81050h;
import com.google.android.apps.gsa.nga.shared.p6344g.C81067a;
import com.google.android.apps.gsa.nga.shared.p6369ui.assistlayer.p6394n.C81921a;
import com.google.android.apps.gsa.nga.shared.p6407v.C83305i;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82338bm;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82567jz;
import com.google.android.apps.gsa.nga.shared.p6407v.p6410c.C82569ka;
import com.google.android.apps.gsa.opa.C83583an;
import com.google.android.apps.gsa.p8889z.p8890a.C118849l;
import com.google.android.apps.gsa.search.core.p6513aj.C84516aa;
import com.google.android.apps.gsa.search.core.p6519al.p6618bt.C85017a;
import com.google.android.apps.gsa.search.core.p6519al.p6735h.C85492i;
import com.google.android.apps.gsa.search.core.p6805i.C86124t;
import com.google.android.apps.gsa.search.core.p6809l.C86152a;
import com.google.android.apps.gsa.search.core.service.p6842a.C86593a;
import com.google.android.apps.gsa.search.shared.media.PlaybackStatus;
import com.google.android.apps.gsa.search.shared.p6930h.C87565h;
import com.google.android.apps.gsa.search.shared.p6930h.C87568k;
import com.google.android.apps.gsa.search.shared.p6930h.C87571n;
import com.google.android.apps.gsa.search.shared.service.C87684al;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88244um;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88260vb;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88261vc;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88262vd;
import com.google.android.apps.gsa.shared.logger.p7051b.C89849ae;
import com.google.android.apps.gsa.shared.logger.p7051b.C89856f;
import com.google.android.apps.gsa.shared.logger.p7051b.C89859i;
import com.google.android.apps.gsa.shared.p6968aa.C89037bh;
import com.google.android.apps.gsa.shared.p7066m.C90014bt;
import com.google.android.apps.gsa.shared.p7066m.C90040cs;
import com.google.android.apps.gsa.shared.p7066m.C90063do;
import com.google.android.apps.gsa.shared.p7066m.C90066dr;
import com.google.android.apps.gsa.shared.p7066m.C90126fx;
import com.google.android.apps.gsa.shared.search.Query;
import com.google.android.apps.gsa.shared.search.QueryTriggerType;
import com.google.android.apps.gsa.shared.util.p7159c.C90873ag;
import com.google.android.apps.gsa.shared.util.p7184t.C91093c;
import com.google.android.apps.gsa.staticplugins.accl.C92718b;
import com.google.android.apps.gsa.staticplugins.nga.p8044a.p8046b.C102999b;
import com.google.android.apps.gsa.staticplugins.opa.C109714ms;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106269ab;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106271ad;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106275c;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106279g;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106281i;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106283k;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106285m;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106286n;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106290r;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106292t;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8196c.p8199c.C106298z;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8202d.p8203a.C106318a;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8301a.C107502c;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8301a.C107504e;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8301a.p8302a.C107487m;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.C107505a;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.C107555d;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.C107556e;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107506a;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107511ae;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107518al;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107519am;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107520an;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107521ao;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107522ap;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107524c;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107525d;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107527f;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107531j;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107538q;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107539r;
import com.google.android.apps.gsa.staticplugins.opa.p8300as.p8303b.p8304a.C107540s;
import com.google.android.apps.gsa.staticplugins.opa.p8313ay.C107662av;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.C107932g;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.C107944s;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8320a.C107726e;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8320a.C107733l;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8322c.C107759j;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8322c.C107761l;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.C107852ad;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.C107839n;
import com.google.android.apps.gsa.staticplugins.opa.p8346bm.C108100a;
import com.google.android.apps.gsa.staticplugins.opa.p8400n.C109726d;
import com.google.android.apps.gsa.staticplugins.opa.p8595v.C113898b;
import com.google.android.apps.gsa.staticplugins.opa.p8595v.C113919w;
import com.google.android.apps.gsa.staticplugins.opa.p8595v.C113920x;
import com.google.android.apps.gsa.staticplugins.opa.tapas.intentlauncher.p8550e.C112096b;
import com.google.android.apps.gsa.staticplugins.opa.tapas.shared.p8581e.C113388b;
import com.google.android.libraries.gsa.p1876k.C22871g;
import com.google.android.libraries.gsa.p1876k.C22872h;
import com.google.android.libraries.search.logging.p3043f.C39191a;
import com.google.assistant.p3897e.p3910e.p3911a.C51190e;
import com.google.assistant.p3897e.p3910e.p3911a.C51195j;
import com.google.assistant.p3897e.p3917i.p3918a.C51334dw;
import com.google.assistant.p3897e.p3917i.p3918a.C51336dy;
import com.google.assistant.p3897e.p3917i.p3918a.C51350el;
import com.google.assistant.p3897e.p3921j.C51718bp;
import com.google.assistant.p3897e.p3921j.C51809dy;
import com.google.assistant.p3897e.p3921j.C52076ei;
import com.google.assistant.p3897e.p3921j.C52081en;
import com.google.assistant.p3897e.p3921j.C52083ep;
import com.google.assistant.p3897e.p3921j.C52090ew;
import com.google.assistant.p3897e.p3921j.C52091ex;
import com.google.assistant.p3897e.p3921j.C52232kc;
import com.google.assistant.p3994s.p3995a.C53275hw;
import com.google.assistant.p3994s.p3995a.C53287ih;
import com.google.assistant.p3994s.p3995a.C53306j;
import com.google.common.base.C58833ax;
import com.google.common.base.C58836b;
import com.google.common.p4522b.C58528ij;
import com.google.common.p4526f.C58976aa;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.p4526f.C59104x;
import com.google.common.p4526f.p4527a.C58970a;
import com.google.common.p4526f.p4527a.C58975e;
import com.google.common.p4552o.C59687cb;
import com.google.common.util.concurrent.C60870cx;
import com.google.p4449cd.p4456g.p4458b.C57987f;
import com.google.protobuf.C62940bt;
import com.google.protobuf.C62942bv;
import com.google.protobuf.C62971cq;
import com.google.speech.recognizer.p5233a.C67432aa;
import com.google.speech.recognizer.p5233a.C67438ag;
import dagger.C68214a;
import java.lang.ref.WeakReference;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import p3186j$.time.Duration;

/* renamed from: com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.q */
/* compiled from: PG */
public final class C107820q implements C107839n {

    /* renamed from: a */
    public static final C59071e f300003a = C59071e.m91332i("com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.q");

    /* renamed from: p */
    private static final C58528ij f300004p = C58528ij.m90013M("core.DISMISS_ASSISTANT", "text.START_DICTATION", "device.EXECUTE_APP_CONTROL", "device.SCREEN_NAVIGATION");

    /* renamed from: A */
    private final C58833ax f300005A;

    /* renamed from: B */
    private final C107759j f300006B;

    /* renamed from: C */
    private final C58833ax f300007C;

    /* renamed from: D */
    private final C85017a f300008D;

    /* renamed from: E */
    private final C107761l f300009E;

    /* renamed from: F */
    private final C87571n f300010F;

    /* renamed from: G */
    private final C85492i f300011G;

    /* renamed from: H */
    private final C58833ax f300012H;

    /* renamed from: I */
    private final C68214a f300013I;

    /* renamed from: J */
    private final C68214a f300014J;

    /* renamed from: K */
    private final C73798aa f300015K;

    /* renamed from: L */
    private String f300016L = BuildConfig.FLAVOR;

    /* renamed from: M */
    private final Object f300017M = new Object();

    /* renamed from: N */
    private final C81067a f300018N = new C81067a(10);

    /* renamed from: O */
    private final Map f300019O = new HashMap();

    /* renamed from: P */
    private final C109714ms f300020P;

    /* renamed from: Q */
    private final C107808e f300021Q;

    /* renamed from: R */
    private final C92718b f300022R;

    /* renamed from: b */
    public final Query f300023b;

    /* renamed from: c */
    public final C107733l f300024c;

    /* renamed from: d */
    public final C86152a f300025d;

    /* renamed from: e */
    public final C68214a f300026e;

    /* renamed from: f */
    public final C22871g f300027f;

    /* renamed from: g */
    public final C86124t f300028g;

    /* renamed from: h */
    public final C68214a f300029h;

    /* renamed from: i */
    public final C58833ax f300030i;

    /* renamed from: j */
    public final C113898b f300031j;

    /* renamed from: k */
    public final C113920x f300032k;

    /* renamed from: l */
    public final C106318a f300033l;

    /* renamed from: m */
    public final C58833ax f300034m;

    /* renamed from: n */
    public C58833ax f300035n = C58836b.f156633a;

    /* renamed from: o */
    public int f300036o = 1;

    /* renamed from: q */
    private final C87568k f300037q;

    /* renamed from: r */
    private final Context f300038r;

    /* renamed from: s */
    private final C107825v f300039s;

    /* renamed from: t */
    private final C108100a f300040t;

    /* renamed from: u */
    private final C22871g f300041u;

    /* renamed from: v */
    private final C68214a f300042v;

    /* renamed from: w */
    private final C68214a f300043w;

    /* renamed from: x */
    private final C68214a f300044x;

    /* renamed from: y */
    private final C68214a f300045y;

    /* renamed from: z */
    private final C58833ax f300046z;

    public C107820q(Query query, C107733l lVar, C87568k kVar, C87571n nVar, Context context, C107825v vVar, C92718b bVar, C108100a aVar, C22871g gVar, C68214a aVar2, C68214a aVar3, C68214a aVar4, C68214a aVar5, C86152a aVar6, C58833ax axVar, C58833ax axVar2, C68214a aVar7, C22871g gVar2, C86124t tVar, C107759j jVar, C68214a aVar8, C109714ms msVar, C85017a aVar9, C58833ax axVar3, C113898b bVar2, C113920x xVar, C106318a aVar10, C107761l lVar2, C85492i iVar, C58833ax axVar4, C68214a aVar11, C68214a aVar12, C58833ax axVar5, C73798aa aaVar, C58833ax axVar6) {
        C113920x xVar2 = xVar;
        C107808e eVar = new C107808e(this);
        this.f300021Q = eVar;
        this.f300023b = query;
        this.f300024c = lVar;
        this.f300037q = kVar;
        this.f300010F = nVar;
        this.f300038r = context;
        this.f300039s = vVar;
        this.f300022R = bVar;
        this.f300040t = aVar;
        this.f300041u = gVar;
        this.f300042v = aVar2;
        this.f300043w = aVar3;
        this.f300044x = aVar4;
        this.f300045y = aVar5;
        this.f300025d = aVar6;
        this.f300046z = axVar;
        this.f300005A = axVar2;
        this.f300026e = aVar7;
        this.f300027f = gVar2;
        this.f300028g = tVar;
        this.f300006B = jVar;
        this.f300029h = aVar8;
        this.f300020P = msVar;
        this.f300008D = aVar9;
        this.f300030i = axVar3;
        this.f300031j = bVar2;
        this.f300032k = xVar2;
        this.f300033l = aVar10;
        this.f300009E = lVar2;
        this.f300011G = iVar;
        xVar2.f315457d.add(new WeakReference(eVar));
        this.f300012H = axVar4;
        this.f300013I = aVar11;
        this.f300014J = aVar12;
        this.f300007C = axVar5;
        this.f300015K = aaVar;
        this.f300034m = axVar6;
    }

    /* renamed from: k */
    private static C58833ax m179000k(C107819p pVar) {
        return ((C107804a) pVar).f299975d.mo56106b(C107815l.f299996a).mo56106b(C107816m.f299997a);
    }

    /* renamed from: l */
    private final void m179001l() {
        if (!this.f300040t.mo96449n()) {
            this.f300040t.mo96446k(false);
            this.f300040t.mo96441f(true);
            this.f300040t.mo96447l(false);
            ((C109726d) this.f300043w.mo27525b()).mo76921b();
            this.f300024c.mo96255c();
        }
    }

    /* renamed from: m */
    private final void m179002m(C106286n nVar, C58833ax axVar) {
        C80120h hVar;
        String str;
        Query query;
        C81046d dVar;
        C106286n nVar2 = nVar;
        if (nVar2.f296546b == 1) {
            hVar = (C80120h) nVar2.f296547c;
        } else {
            hVar = C80120h.f219843o;
        }
        C80120h hVar2 = hVar;
        e a = e.a(hVar2.f219848d);
        if (a == null) {
            a = e.a;
        }
        if (!e.f.equals(a)) {
            m179001l();
        }
        C107825v vVar = this.f300039s;
        vVar.f300051c = false;
        vVar.f300050b = new C57987f();
        C92718b bVar = this.f300022R;
        C52091ex exVar = hVar2.f219847c;
        if (exVar == null) {
            exVar = C52091ex.f136710b;
        }
        C58976aa aaVar = C58975e.f156826a;
        C52090ew ewVar = (C52090ew) bVar.mo87449a(0).toBuilder();
        for (C52232kc kcVar : exVar.f136712a) {
            int size = ((C52091ex) ewVar.instance).f136712a.size();
            while (true) {
                size--;
                if (size >= 0) {
                    if (kcVar.f137065b.equals(ewVar.mo53789b(size).f137065b)) {
                        ewVar.mo53793f(size);
                        break;
                    }
                } else {
                    break;
                }
            }
            ewVar.mo53792e(kcVar);
        }
        bVar.mo87450b(0, (C52091ex) ewVar.build());
        if (this.f300005A.mo56113h() && hVar2.f219851g) {
            C9348as asVar = (C9348as) this.f300005A.mo56107c();
            ((C9321i) asVar.f32471d.mo27525b()).mo17528e();
            ((C9321i) asVar.f32471d.mo27525b()).mo17529f(C9318f.CONTEXTUAL);
        }
        this.f300011G.mo79000e(C53306j.MAIN_APP);
        ((C118849l) this.f300014J.mo27525b()).mo104047h(new C107810g(this.f300027f, this.f300006B, this.f300024c));
        Bundle bundle = new Bundle();
        if ((hVar2.f219845a & 4096) != 0) {
            C51350el elVar = hVar2.f219857m;
            if (elVar == null) {
                elVar = C51350el.f133749b;
            }
            bundle.putByteArray("android.opa.extra.POSITIONAL_ATTRIBUTES", elVar.toByteArray());
        }
        if ((hVar2.f219845a & 8192) != 0) {
            C51336dy dyVar = hVar2.f219858n;
            if (dyVar == null) {
                dyVar = C51336dy.f133713d;
            }
            bundle.putByteArray("android.opa.extra.EXTRA_FOREGROUND_APP", dyVar.toByteArray());
        }
        bundle.putBoolean("android.opa.extra.QUERY_FROM_LONG_PRESS_HOME", a.equals(e.bu) || a.equals(e.bq));
        bundle.putBoolean("android.opa.extra.QUERY_FROM_DIAG_SWIPE_GESTURE", a.equals(e.ax) || a.equals(e.bn));
        bundle.putBoolean("android.opa.extra.QUERY_FROM_ELMYRA", a.equals(e.ay) || a.equals(e.bo) || a.equals(e.am));
        bundle.putBoolean("android.opa.extra.INITIAL_QUERY", !a.equals(e.f));
        bundle.putBoolean("android.opa.extra.QUERY_INITIATED_BY_NGA", true);
        bundle.putBoolean("android.opa.extra.TRIGGERED_BY_HEADSET", m179010u(hVar2));
        C81048f fVar = hVar2.f219852h;
        if (fVar == null) {
            fVar = C81048f.f222138d;
        }
        C80151b bVar2 = fVar.f222142c;
        if (bVar2 == null) {
            bVar2 = C80151b.f219941c;
        }
        boolean z = bVar2.f219944b;
        bundle.putBoolean("android.opa.extra.BLOCK_RESPONSE_EXECUTION_ON_UI", !z);
        bundle.putBoolean("android.opa.extra.SUPPRESS_OPA_UI", z);
        bundle.putInt("android.opa.extra.TRIGGERED_BY", a.ca);
        if (((C84516aa) this.f300044x.mo27525b()).mo78228b() && this.f300028g.mo79746e(C90014bt.f247760nI) && this.f300028g.mo79746e(C90014bt.f247431gy)) {
            bundle.putBoolean("android.opa.extra.ENABLED_ON_OPA_LOCKSCREEN", true);
        }
        if (axVar.mo56113h()) {
            bundle.putBundle("nga-query-extras", (Bundle) axVar.mo56107c());
            str = ((Bundle) axVar.mo56107c()).getString("nga-foreground-app", BuildConfig.FLAVOR);
            if (!str.isEmpty()) {
                bundle.putString("android.opa.extra.FOREGROUND_APP_TRIGGERED_ON", str);
            }
            PlaybackStatus playbackStatus = (PlaybackStatus) ((Bundle) axVar.mo56107c()).getParcelable("nga-playback-status");
            if (playbackStatus != null) {
                bundle.putParcelable("android.speech.extra.PLAYBACK_STATUS_FROM_CLIENT", playbackStatus);
            }
            if (((Bundle) axVar.mo56107c()).getBoolean("android.opa.extra.CONTINUED_CONVERSATION", false)) {
                bundle.putBoolean("android.opa.extra.CONTINUED_CONVERSATION", true);
            }
        } else {
            str = null;
        }
        bundle.putBoolean("android.opa.extra.QUERY_FROM_HOMESCREEN", C83583an.m133147b(str, this.f300025d));
        if (hVar2.f219853i) {
            bundle.putBoolean("android.opa.extra.NGA_NON_VOICE", true);
            boolean z2 = !this.f300028g.mo79746e(C90126fx.f251056bc) || !e.h.equals(a) || !this.f300024c.mo96253a().mo84392cY();
            if (!this.f300028g.mo79746e(C90126fx.f251491jn) || !z2) {
                bundle.putInt("android.opa.extra.CLIENT_MODALITY_OVERRIDE", 2);
            }
        }
        Query as = this.f300023b.mo84245H(1, true, (QueryTriggerType) null).mo84307as(bundle);
        QueryTriggerType queryTriggerType = (QueryTriggerType) QueryTriggerType.f252812Y.get(hVar2.f219854j, QueryTriggerType.USER);
        if (!queryTriggerType.equals(QueryTriggerType.USER)) {
            as = as.mo84286aW(queryTriggerType);
        }
        String str2 = hVar2.f219849e;
        if (!TextUtils.isEmpty(str2)) {
            as = as.mo84275aL(str2);
        }
        if (this.f300028g.mo79746e(C90066dr.f249688k)) {
            if (str2.equals("and.opa.lockscreen.hotword")) {
                as = as.mo84286aW(QueryTriggerType.HOTWORD);
            }
            if (((C84516aa) this.f300044x.mo27525b()).mo78228b() && ((C84516aa) this.f300044x.mo27525b()).f230023b.isDeviceLocked() && !m179010u(hVar2)) {
                as = as.mo84291ab();
            }
        }
        String str3 = hVar2.f219850f;
        if (!TextUtils.isEmpty(str3)) {
            as = as.mo84344bc(str3);
        }
        Query query2 = as;
        String str4 = hVar2.f219846b;
        if (!str4.isEmpty()) {
            try {
                query2 = query2.mo84271aH(C39191a.m68622a(str4));
            } catch (IllegalArgumentException e) {
                C59104x c = f300003a.mo56225c();
                c.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                ((C59052c) ((C59052c) ((C59052c) c).mo56382g(e)).mo56372aa(26327)).mo56386p("Couldn't convert queryId to long.");
            }
        }
        if (this.f300028g.mo79746e(C90066dr.f249679b) && this.f300015K.mo65282f()) {
            query2 = query2.mo84287aX();
        }
        if (this.f300028g.mo79746e(C90040cs.f248670i)) {
            boolean b = C81921a.m130164b(this.f300038r);
            C59104x b2 = f300003a.mo56224b();
            b2.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
            ((C59052c) ((C59052c) b2).mo56372aa(26326)).mo56389s("hasSecondaryDisplayAndMainDisplayIsDisabled: %s", Boolean.valueOf(b));
            if (b) {
                query2 = query2.mo84302an("android.opa.extra.BLOCK_RESPONSE_EXECUTION_ON_UI", false);
            }
        }
        if ((hVar2.f219845a & 128) != 0) {
            C81048f fVar2 = hVar2.f219852h;
            C81048f fVar3 = fVar2 == null ? C81048f.f222138d : fVar2;
            if (fVar3.f222140a == 1) {
                if (fVar2 == null) {
                    fVar2 = C81048f.f222138d;
                }
                if (fVar2.f222140a == 1) {
                    dVar = (C81046d) fVar2.f222141b;
                } else {
                    dVar = C81046d.f222125k;
                }
                query = query.mo84301am().mo84286aW(QueryTriggerType.BISTO).mo84287aX();
                if ((dVar.f222127a & 1) != 0) {
                    query = query.mo84261Y(!dVar.f222128b);
                }
                if ((dVar.f222127a & 4) != 0) {
                    query = query.mo84278aO("user-agent-suffix", dVar.f222130d);
                }
                if ((dVar.f222127a & 8) != 0) {
                    query = query.mo84302an("is-in-driving-mode", dVar.f222131e);
                }
                if ((dVar.f222127a & 16) != 0) {
                    query = query.mo84278aO("device-model-suffix", dVar.f222132f);
                }
                if ((dVar.f222127a & 32) != 0) {
                    query = query.mo84278aO("android.opa.extra.DEVICE_MODEL_ID", dVar.f222133g);
                }
                if ((dVar.f222127a & 64) != 0) {
                    query = query.mo84303ao("android.opa.extra.DEVICE_ACTIONS_CONTEXT", dVar.f222134h.mo59174N());
                }
                if ((dVar.f222127a & 2) != 0) {
                    C51334dw dwVar = dVar.f222129c;
                    if (dwVar == null) {
                        dwVar = C51334dw.f133658ab;
                    }
                    query = query.mo84303ao("bisto-device-properties", dwVar.toByteArray());
                }
                if ((dVar.f222127a & 128) != 0) {
                    query = query.mo84302an("android.opa.extra.EXTRA_BISTO_PR_DISALLOWED", !dVar.f222135i);
                }
            }
            if (fVar3.f222140a == 4) {
                C81050h hVar3 = (C81050h) fVar3.f222141b;
                Query at = query.mo84308at();
                if ((hVar3.f222146a & 1) != 0) {
                    at = at.mo84278aO("user-agent-suffix", hVar3.f222147b);
                }
                if ((hVar3.f222146a & 2) != 0) {
                    at = at.mo84278aO("android.opa.extra.DEVICE_MODEL_ID", hVar3.f222148c);
                }
                if ((hVar3.f222146a & 16) != 0) {
                    C51718bp bpVar = hVar3.f222151f;
                    if (bpVar == null) {
                        bpVar = C51718bp.f135685d;
                    }
                    at = at.mo84303ao("android.opa.extra.QUERY_GACS_CAPABILITIES", bpVar.toByteArray());
                }
                if ((hVar3.f222146a & 4) != 0) {
                    at = at.mo84311aw("android.opa.extra.VOICE_SEARCH_TTS_ENCODING", hVar3.f222149d);
                }
                if ((hVar3.f222146a & 8) != 0) {
                    at = at.mo84311aw("android.opa.extra.VOICE_SEARCH_TTS_SAMPLE_RATE_HZ", hVar3.f222150e);
                }
                if ((hVar3.f222146a & 32) != 0) {
                    at = at.mo84302an("android.opa.extra.EXTRA_BISTO_PR_DISALLOWED", !hVar3.f222152g);
                }
                if ((hVar3.f222146a & 64) != 0) {
                    query = query.mo84278aO("android.opa.extra.EXTRA_HETERODYNE_TOKEN", hVar3.f222153h);
                }
            }
            if (fVar3.f222140a == 3) {
                query = query.mo84302an("android.opa.extra.TRIGGERED_BY_HEADSET", true);
            }
            C80151b bVar3 = fVar3.f222142c;
            if (!(bVar3 == null || (bVar3.f219943a & 1) == 0)) {
                query = query.mo84260X(bVar3.f219944b);
            }
        }
        if (query.mo84324bI() && (!axVar.mo56113h() || !((Bundle) axVar.mo56107c()).getBoolean("cancelled_by_bisto", false))) {
            this.f300040t.mo96441f(false);
        }
        Query c2 = mo96298c(query);
        if ((hVar2.f219845a & 128) != 0) {
            C81048f fVar4 = hVar2.f219852h;
            if (fVar4 == null) {
                fVar4 = C81048f.f222138d;
            }
            int i = fVar4.f222140a;
            if (i == 1 || i == 4) {
                if (this.f300007C.mo56113h()) {
                    bx createBuilder = by.b.createBuilder();
                    long j = c2.f252749G;
                    createBuilder.copyOnWrite();
                    createBuilder.instance.a = j;
                    by build = createBuilder.build();
                    bz createBuilder2 = cb.d.createBuilder();
                    createBuilder2.copyOnWrite();
                    cb cbVar = createBuilder2.instance;
                    build.getClass();
                    cbVar.b = build;
                    cbVar.a = 13;
                    ((C102999b) ((C68214a) this.f300007C.mo56107c()).mo27525b()).mo93556a(createBuilder2.build());
                    long j2 = c2.f252749G;
                } else {
                    C59104x c3 = f300003a.mo56225c();
                    c3.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                    ((C59052c) ((C59052c) c3).mo56372aa(26348)).mo56388r("No queryStatusUpdateSender(%d)", c2.f252749G);
                }
            }
        }
        C59104x b3 = f300003a.mo56224b();
        b3.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
        ((C59052c) ((C59052c) b3).mo56372aa(26324)).mo56388r("handleInitializeQueryEvent(%d)", c2.f252749G);
        this.f300024c.mo96257e(c2);
        this.f300036o = 2;
        if (this.f300028g.mo79746e(C90014bt.f247555jP)) {
            this.f300008D.mo78655c();
        }
    }

    /* renamed from: n */
    private final void m179003n(List list, long j) {
        Iterator it = list.iterator();
        while (it.hasNext()) {
            C106275c cVar = (C106275c) it.next();
            C89856f fVar = new C89856f();
            C89849ae a = C89849ae.m146281a(cVar.f296499b);
            if (a == null) {
                a = C89849ae.UNKNOWN_EVENT;
            }
            fVar.f246201a = a;
            fVar.f246204d = cVar.f296501d;
            for (Map.Entry entry : Collections.unmodifiableMap(cVar.f296500c).entrySet()) {
                fVar.mo83701c((String) entry.getKey(), (String) entry.getValue());
            }
            if ((cVar.f296498a & 4) != 0) {
                C59687cb cbVar = cVar.f296502e;
                if (cbVar == null) {
                    cbVar = C59687cb.f160034bf;
                }
                fVar.f246203c = cbVar;
            }
            fVar.mo83701c("rId", Long.toString(j));
            C58976aa aaVar = C58975e.f156826a;
            C89849ae a2 = C89849ae.m146281a(cVar.f296499b);
            if (a2 == null) {
                a2 = C89849ae.UNKNOWN_EVENT;
            }
            a2.name();
            ((C89859i) this.f300026e.mo27525b()).mo74236a(fVar.mo83699a());
        }
    }

    /* renamed from: o */
    private final void m179004o(List list, Query query) {
        if (this.f300028g.mo79746e(C90014bt.f247401gU) && !list.isEmpty()) {
            long j = query.f252749G;
            m179003n(list, j);
            synchronized (this.f300017M) {
                C81067a aVar = this.f300018N;
                Long valueOf = Long.valueOf(j);
                if (!aVar.contains(valueOf)) {
                    this.f300019O.put(valueOf, this.f300027f.mo28208h("[NGA] reliability-tracking-timed-out", Duration.ofSeconds(this.f300028g.mo79743a(C90014bt.f247293eS)).toMillis(), new C107814k(this, query)));
                }
            }
        }
    }

    /* renamed from: p */
    private final void m179005p(Query query) {
        C113919w wVar;
        C113920x xVar = this.f300032k;
        long j = query.f252749G;
        if (this.f300040t.mo96449n() || !this.f300028g.mo79746e(C90014bt.f247057V) || !query.mo84363bw("android.opa.extra.SUPPRESS_OPA_UI")) {
            wVar = C113919w.HANDED_OVER_TO_OPA;
        } else {
            wVar = C113919w.HANDED_OVER_TO_OPA_WITHOUT_UI;
        }
        xVar.mo100774c(j, wVar);
    }

    /* renamed from: q */
    private final void m179006q(C106286n nVar) {
        C107555d dVar = (C107555d) C107556e.f299210c.createBuilder();
        dVar.copyOnWrite();
        C107556e eVar = (C107556e) dVar.instance;
        eVar.f299213b = 17;
        eVar.f299212a |= 1;
        C62940bt btVar = C107540s.f299188a;
        C107538q qVar = (C107538q) C107539r.f299184c.createBuilder();
        int i = nVar.f296549e;
        qVar.copyOnWrite();
        C107539r rVar = (C107539r) qVar.instance;
        rVar.f299186a |= 1;
        rVar.f299187b = i;
        dVar.mo58885m(btVar, (C107539r) qVar.build());
        mo96303h((C107556e) dVar.build());
    }

    /* renamed from: r */
    private final void m179007r(String str) {
        C87684al alVar = new C87684al(C88244um.SET_FINAL_RECOGNIZED_TEXT);
        C62940bt btVar = C88260vb.f238727a;
        C88261vc vcVar = (C88261vc) C88262vd.f238728d.createBuilder();
        vcVar.copyOnWrite();
        C88262vd vdVar = (C88262vd) vcVar.instance;
        str.getClass();
        vdVar.f238730a |= 1;
        vdVar.f238731b = str;
        alVar.mo81965b(btVar, (C88262vd) vcVar.build());
        ((C107932g) this.f300042v.mo27525b()).mo96337a(alVar.mo81964a());
    }

    /* JADX WARNING: Code restructure failed: missing block: B:10:0x0070, code lost:
        if (r7.equals(com.google.android.apps.gsa.assistant.shared.l.e.c) != false) goto L_0x0043;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:13:0x007b, code lost:
        if (r7.equals(com.google.android.apps.gsa.assistant.shared.l.e.be) != false) goto L_0x0043;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:16:0x0090, code lost:
        if (((java.lang.Boolean) ((com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.p8326a.C107804a) r10).f299976e.mo56109e(false)).booleanValue() == false) goto L_0x0093;
     */
    /* JADX WARNING: Removed duplicated region for block: B:15:0x0081  */
    /* renamed from: s */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private final void m179008s(com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.p8326a.C107819p r10, boolean r11) {
        /*
            r9 = this;
            com.google.common.f.e r0 = f300003a
            com.google.common.f.x r0 = r0.mo56224b()
            com.google.common.f.aa r1 = com.google.common.p4526f.p4527a.C58975e.f156826a
            java.lang.String r2 = "NgaClientEventSubCtrl"
            r0.mo56378ag(r1, r2)
            java.lang.String r1 = "startOpaActivity"
            r2 = 26357(0x66f5, float:3.6934E-41)
            ((com.google.common.p4526f.C59052c) ((com.google.common.p4526f.C59052c) r0).mo56372aa(r2)).mo56386p(r1)
            com.google.android.apps.gsa.search.shared.h.h r0 = new com.google.android.apps.gsa.search.shared.h.h
            r0.<init>()
            r1 = 4
            r0.f236560f = r1
            r1 = 268468224(0x10008000, float:2.5342157E-29)
            r0.f236512P = r1
            r1 = 1
            r0.f236508L = r1
            com.google.android.apps.gsa.search.core.l.a r2 = r9.f300025d
            int r2 = com.google.android.apps.gsa.opa.C83583an.m133152g(r2)
            r0.f236558d = r2
            r0.f236535af = r1
            r0.mo81686b()
            r0.f236537ah = r1
            com.google.android.apps.gsa.search.core.i.t r2 = r9.f300028g
            com.google.android.apps.gsa.shared.m.d r3 = com.google.android.apps.gsa.shared.p7066m.C90029ch.f248282bp
            boolean r2 = r2.mo79746e(r3)
            r3 = 0
            java.lang.Boolean r4 = java.lang.Boolean.valueOf(r3)
            r5 = 2
            if (r2 == 0) goto L_0x0045
        L_0x0043:
            r3 = 2
            goto L_0x0093
        L_0x0045:
            com.google.android.apps.gsa.search.core.i.t r2 = r9.f300028g
            com.google.android.apps.gsa.shared.m.d r6 = com.google.android.apps.gsa.shared.p7066m.C90022ca.f248122x
            boolean r2 = r2.mo79746e(r6)
            com.google.android.apps.gsa.search.core.i.t r6 = r9.f300028g
            com.google.android.apps.gsa.shared.m.d r7 = com.google.android.apps.gsa.shared.p7066m.C90126fx.f251462jK
            boolean r6 = r6.mo79746e(r7)
            if (r2 != 0) goto L_0x005a
            if (r6 == 0) goto L_0x007e
            r6 = 1
        L_0x005a:
            com.google.common.base.ax r7 = m179000k(r10)
            com.google.android.apps.gsa.assistant.shared.l.e r8 = com.google.android.apps.gsa.assistant.shared.l.e.a
            java.lang.Object r7 = r7.mo56109e(r8)
            com.google.android.apps.gsa.assistant.shared.l.e r7 = (com.google.android.apps.gsa.assistant.shared.l.e) r7
            int r8 = r7.ca
            if (r2 == 0) goto L_0x0073
            com.google.android.apps.gsa.assistant.shared.l.e r2 = com.google.android.apps.gsa.assistant.shared.l.e.c
            boolean r2 = r7.equals(r2)
            if (r2 == 0) goto L_0x0073
            goto L_0x0043
        L_0x0073:
            if (r6 == 0) goto L_0x007e
            com.google.android.apps.gsa.assistant.shared.l.e r2 = com.google.android.apps.gsa.assistant.shared.l.e.be
            boolean r2 = r7.equals(r2)
            if (r2 == 0) goto L_0x007e
            goto L_0x0043
        L_0x007e:
            if (r11 == 0) goto L_0x0081
            goto L_0x0043
        L_0x0081:
            r11 = r10
            com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.a r11 = (com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.p8326a.C107804a) r11
            com.google.common.base.ax r11 = r11.f299976e
            java.lang.Object r11 = r11.mo56109e(r4)
            java.lang.Boolean r11 = (java.lang.Boolean) r11
            boolean r11 = r11.booleanValue()
            if (r11 == 0) goto L_0x0093
            goto L_0x0043
        L_0x0093:
            r0.f236540ak = r3
            r11 = r10
            com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.a r11 = (com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.p8326a.C107804a) r11
            java.lang.String r2 = r11.f299974c
            if (r2 == 0) goto L_0x009e
            r0.f236534ae = r2
        L_0x009e:
            com.google.android.apps.gsa.shared.search.Query r2 = r11.f299973b
            if (r2 == 0) goto L_0x00a4
            r0.f236536ag = r2
        L_0x00a4:
            com.google.android.apps.gsa.shared.search.Query r2 = r11.f299972a
            if (r2 == 0) goto L_0x00aa
            r0.f236565k = r2
        L_0x00aa:
            dagger.a r2 = r9.f300044x
            java.lang.Object r2 = r2.mo27525b()
            com.google.android.apps.gsa.search.core.aj.aa r2 = (com.google.android.apps.gsa.search.core.p6513aj.C84516aa) r2
            boolean r2 = r2.mo78228b()
            if (r2 == 0) goto L_0x00ea
            com.google.android.apps.gsa.assistant.shared.l.e r2 = com.google.android.apps.gsa.assistant.shared.l.e.bm
            r0.f236556b = r2
            com.google.android.apps.gsa.search.core.i.t r2 = r9.f300028g
            com.google.android.apps.gsa.shared.m.d r3 = com.google.android.apps.gsa.shared.p7066m.C90126fx.f251468jQ
            boolean r2 = r2.mo79746e(r3)
            if (r2 == 0) goto L_0x00ea
            com.google.common.base.ax r10 = m179000k(r10)
            com.google.android.apps.gsa.assistant.shared.l.e r2 = com.google.android.apps.gsa.assistant.shared.l.e.be
            p3186j$.util.Objects.requireNonNull(r2)
            com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.n r3 = new com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.n
            r3.<init>(r2)
            com.google.common.base.ax r10 = r10.mo56106b(r3)
            java.lang.Object r10 = r10.mo56109e(r4)
            java.lang.Boolean r10 = (java.lang.Boolean) r10
            boolean r10 = r10.booleanValue()
            if (r10 == 0) goto L_0x00ea
            r0.f236507K = r1
            com.google.android.apps.gsa.assistant.shared.l.e r10 = com.google.android.apps.gsa.assistant.shared.l.e.be
            r0.f236556b = r10
        L_0x00ea:
            com.google.android.apps.gsa.shared.search.Query r10 = r11.f299973b
            if (r10 == 0) goto L_0x00ef
            goto L_0x00f1
        L_0x00ef:
            com.google.android.apps.gsa.shared.search.Query r10 = r11.f299972a
        L_0x00f1:
            if (r10 == 0) goto L_0x0103
            java.lang.String r11 = r10.mo84355bn()
            boolean r11 = android.text.TextUtils.isEmpty(r11)
            if (r11 != 0) goto L_0x0103
            java.lang.String r10 = r10.mo84355bn()
            r0.f236523a = r10
        L_0x0103:
            r9.mo96304i(r0)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8324e.p8325a.p8326a.C107820q.m179008s(com.google.android.apps.gsa.staticplugins.opa.bb.e.a.a.p, boolean):void");
    }

    /* renamed from: t */
    private final void m179009t(String str, boolean z) {
        C87565h hVar = new C87565h();
        hVar.f236560f = 1;
        hVar.f236512P = 268468224;
        hVar.f236541al = true;
        hVar.f236507K = true;
        if (true == TextUtils.isEmpty(str)) {
            str = null;
        }
        hVar.f236523a = str;
        hVar.f236558d = C83583an.m133152g(this.f300025d);
        hVar.f236535af = true;
        hVar.f236550au = z;
        mo96304i(hVar);
    }

    /* renamed from: u */
    private static boolean m179010u(C80120h hVar) {
        return hVar.f219855k || hVar.f219856l;
    }

    /* renamed from: a */
    public final /* synthetic */ void mo96296a() {
    }

    /* renamed from: b */
    public final void mo96297b(C107504e eVar, C58833ax axVar, C107944s sVar) {
        Object obj;
        C80122j jVar;
        C80118f fVar;
        C80116d dVar;
        C106279g gVar;
        boolean z;
        C106292t tVar;
        C106283k kVar;
        C106271ad adVar;
        C106298z zVar;
        C106281i iVar;
        C106290r rVar;
        C107504e eVar2 = eVar;
        C58976aa aaVar = C58975e.f156826a;
        C107502c a = C107502c.m178394a(eVar2.f299118b);
        if (a == null) {
            a = C107502c.UNDEFINED;
        }
        if (a == C107502c.NGA_CLIENT_EVENT) {
            C62940bt r2 = C62942bv.checkIsLite(C107487m.f299082a);
            eVar2.mo58887l(r2);
            if (eVar2.f169962ag.mo58857o(r2.f169971d)) {
                C62940bt r22 = C62942bv.checkIsLite(C107487m.f299082a);
                eVar2.mo58887l(r22);
                Object l = eVar2.f169962ag.mo58854l(r22.f169971d);
                if (l == null) {
                    obj = r22.f169969b;
                } else {
                    obj = r22.mo58889c(l);
                }
                C106286n nVar = (C106286n) obj;
                int i = nVar.f296546b;
                C106285m mVar = C106285m.INITIALIZE_QUERY_EVENT_DATA;
                C113919w wVar = C113919w.NO_CONNECTIVITY;
                String str = null;
                int i2 = 4;
                switch (C106285m.m177064a(nVar.f296546b).ordinal()) {
                    case 0:
                        m179002m(nVar, axVar);
                        return;
                    case 1:
                        if (nVar.f296546b == 2) {
                            jVar = (C80122j) nVar.f296547c;
                        } else {
                            jVar = C80122j.f219860d;
                        }
                        C107825v vVar = this.f300039s;
                        C67438ag agVar = jVar.f219864c;
                        if (agVar == null) {
                            agVar = C67438ag.f183256k;
                        }
                        vVar.mo96306a(agVar);
                        return;
                    case 2:
                        if (nVar.f296546b == 3) {
                            fVar = (C80118f) nVar.f296547c;
                        } else {
                            fVar = C80118f.f219836e;
                        }
                        C67438ag agVar2 = fVar.f219840c;
                        if (agVar2 == null) {
                            agVar2 = C67438ag.f183256k;
                        }
                        String str2 = fVar.f219841d;
                        Query b = this.f300024c.mo96254b();
                        m179004o(nVar.f296548d, b);
                        m179005p(b);
                        C59104x b2 = f300003a.mo56224b();
                        b2.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                        ((C59052c) ((C59052c) b2).mo56372aa(26321)).mo56388r("handleCommitRecognitionEvent(%d)", b.f252749G);
                        if (this.f300040t.mo96449n()) {
                            if (!this.f300028g.mo79746e(C90014bt.f247420gn)) {
                                mo96305j(13);
                            }
                            m179007r(str2);
                            if (this.f300028g.mo79746e(C90014bt.f247554jO)) {
                                C107555d dVar2 = (C107555d) C107556e.f299210c.createBuilder();
                                dVar2.copyOnWrite();
                                C107556e eVar3 = (C107556e) dVar2.instance;
                                eVar3.f299213b = 24;
                                eVar3.f299212a |= 1;
                                C62940bt btVar = C107506a.f299121a;
                                C107525d dVar3 = (C107525d) C107527f.f299158c.createBuilder();
                                dVar3.copyOnWrite();
                                C107527f fVar2 = (C107527f) dVar3.instance;
                                fVar2.f299161b = 0;
                                fVar2.f299160a |= 1;
                                dVar2.mo58885m(btVar, (C107527f) dVar3.build());
                                mo96303h((C107556e) dVar2.build());
                            }
                        } else if (!b.mo84363bw("android.opa.extra.SUPPRESS_OPA_UI")) {
                            m179008s(new C107804a((Query) null, b, str2, axVar, C58836b.f156633a), false);
                        }
                        C107825v vVar2 = this.f300039s;
                        C67432aa aaVar2 = (C67432aa) agVar2.toBuilder();
                        aaVar2.copyOnWrite();
                        C67438ag agVar3 = (C67438ag) aaVar2.instance;
                        agVar3.f183259b = 1;
                        agVar3.f183258a |= 1;
                        vVar2.mo96306a((C67438ag) aaVar2.build());
                        C107825v vVar3 = this.f300039s;
                        vVar3.f300051c = true;
                        vVar3.f300049a.mo28212l("closeSuccessfully", new C107824u(vVar3.f300050b));
                        ((C107852ad) sVar.f300327a.f300348c.mo27525b()).f300121b.mo77931a().mo77924f(str2);
                        if (axVar.mo56113h()) {
                            long j = ((Bundle) axVar.mo56107c()).getLong("nga-request-timestamp");
                            if (j != 0) {
                                C107733l lVar = this.f300024c;
                                Query ay = b.mo84313ay("android.opa.extra.NGA_REQUEST_TIMESTAMP_FOR_LOGGING", j);
                                if (C22872h.m42744d(C86593a.class)) {
                                    lVar.f299774a.mo80684A(ay);
                                } else {
                                    lVar.f299775b.mo28212l("Commit the query on the UI thread", new C107726e(lVar, ay));
                                }
                            }
                        }
                        this.f300016L = BuildConfig.FLAVOR;
                        return;
                    case 3:
                        this.f300027f.mo28212l("NgaClientEventSubController#cancelRecognitionEvent", new C107809f(this, nVar));
                        if (nVar.f296546b == 4) {
                            dVar = (C80116d) nVar.f296547c;
                        } else {
                            dVar = C80116d.f219831d;
                        }
                        String str3 = dVar.f219834b;
                        if (this.f300028g.mo79746e(C90014bt.f247554jO) && this.f300016L.equals(str3)) {
                            this.f300020P.mo98044a();
                            return;
                        }
                        return;
                    case 4:
                        m179001l();
                        if (nVar.f296546b == 5) {
                            gVar = (C106279g) nVar.f296547c;
                        } else {
                            gVar = C106279g.f296506g;
                        }
                        C106279g gVar2 = gVar;
                        C52081en enVar = gVar2.f296510c;
                        if (enVar == null) {
                            enVar = C52081en.f136679i;
                        }
                        C52081en enVar2 = enVar;
                        C107761l lVar2 = this.f300009E;
                        String str4 = gVar2.f296509b;
                        boolean z2 = gVar2.f296513f;
                        C51190e eVar4 = (C51190e) C51195j.f133264n.createBuilder();
                        eVar4.copyOnWrite();
                        C51195j jVar2 = (C51195j) eVar4.instance;
                        enVar2.getClass();
                        jVar2.f133275j = enVar2;
                        jVar2.f133266a |= 128;
                        Bundle bundle = new Bundle();
                        bundle.putByteArray("android.opa.extra.ASSISTANT_RESPONSE", ((C51195j) eVar4.build()).toByteArray());
                        bundle.putBoolean("android.opa.extra.QUERY_INITIATED_BY_NGA", true);
                        bundle.putBoolean("android.opa.extra.QUERY_RESPONSE_GENERATED_BY_NGA", true);
                        bundle.putBoolean("android.opa.extra.EXTRA_QUERY_SEND_EXECUTION_RESPONSE_TO_NGA", z2);
                        Query as = lVar2.f299838b.mo84259V().mo84244G(true).mo84307as(bundle);
                        if (!str4.isEmpty()) {
                            try {
                                as = as.mo84271aH(C39191a.m68622a(str4));
                            } catch (IllegalArgumentException e) {
                                ((C58970a) ((C58970a) ((C58970a) C107761l.f299837a.mo56225c()).mo56382g(e)).mo56372aa(26163)).mo56389s("Cannot convert queryId(%s) to long.", str4);
                            }
                        }
                        m179004o(nVar.f296548d, as);
                        m179005p(as);
                        C59104x b3 = f300003a.mo56224b();
                        b3.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                        ((C59052c) ((C59052c) b3).mo56372aa(26323)).mo56388r("handleConversationDeltaEvent(%d)", as.f252749G);
                        if ((gVar2.f296508a & 8) != 0) {
                            str = gVar2.f296512e;
                        }
                        if (!this.f300040t.mo96449n()) {
                            if (!enVar2.f136684d.isEmpty()) {
                                Iterator it = enVar2.f136684d.iterator();
                                while (true) {
                                    if (it.hasNext()) {
                                        C52083ep epVar = (C52083ep) it.next();
                                        if (epVar.f136692b == 4) {
                                            C51809dy dyVar = ((C52076ei) epVar.f136693c).f136668c;
                                            if (dyVar == null) {
                                                dyVar = C51809dy.f135933f;
                                            }
                                            if (!f300004p.contains(dyVar.f135936b)) {
                                            }
                                        }
                                    } else {
                                        z = this.f300028g.mo79746e(C90126fx.f251512kH);
                                    }
                                }
                                m179008s(new C107804a(as, (Query) null, str, axVar, C58833ax.m90834k(Boolean.valueOf(z))), false);
                            }
                            z = false;
                            m179008s(new C107804a(as, (Query) null, str, axVar, C58833ax.m90834k(Boolean.valueOf(z))), false);
                        } else {
                            if (!this.f300028g.mo79746e(C90014bt.f247420gn)) {
                                mo96305j(13);
                            }
                            if (str != null) {
                                m179007r(str);
                            }
                            this.f300024c.mo96257e(mo96298c(as));
                        }
                        this.f300036o = 2;
                        return;
                    case 6:
                        if (!axVar.mo56113h()) {
                            C59104x c = f300003a.mo56225c();
                            c.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                            ((C59052c) ((C59052c) c).mo56372aa(26343)).mo56386p("handleUpdateAssistData: Missing extra bundle");
                            return;
                        }
                        Bundle bundle2 = (Bundle) axVar.mo56107c();
                        AssistStructure assistStructure = (AssistStructure) bundle2.getParcelable("assist-structure");
                        AssistContent assistContent = (AssistContent) bundle2.getParcelable("assist-content");
                        Bundle bundle3 = bundle2.getBundle("assist-data");
                        Bitmap bitmap = (Bitmap) bundle2.getParcelable("assist-screenshot");
                        if (this.f300005A.mo56113h()) {
                            C9348as asVar = (C9348as) this.f300005A.mo56107c();
                            C9413b bVar = (C9413b) asVar.f32470c.mo27525b();
                            bVar.mo17669e(bitmap);
                            ((C9356b) asVar.f32469b.mo27525b()).mo17545a(asVar.f32468a).mo17502a(bundle3, assistStructure, assistContent, C9318f.CONTEXTUAL, bVar, 1);
                            return;
                        }
                        C59104x d = f300003a.mo56226d();
                        d.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                        ((C59052c) ((C59052c) d).mo56372aa(26342)).mo56386p("Dropping assist data update, functionality is not present in this build.");
                        return;
                    case 7:
                        boolean n = this.f300040t.mo96449n();
                        if (this.f300012H.mo56113h()) {
                            C113388b bVar2 = (C113388b) ((C68214a) this.f300012H.mo56107c()).mo27525b();
                            if (!n) {
                                i2 = 3;
                            }
                            bVar2.mo99681p(i2);
                        }
                        ((C107662av) this.f300013I.mo27525b()).mo96210f(6);
                        if (!n) {
                            if (nVar.f296546b == 10) {
                                tVar = (C106292t) nVar.f296547c;
                            } else {
                                tVar = C106292t.f296559c;
                            }
                            m179009t(tVar.f296562b, false);
                        } else {
                            mo96305j(16);
                        }
                        this.f300016L = BuildConfig.FLAVOR;
                        m179006q(nVar);
                        return;
                    case 8:
                        if (this.f300040t.mo96449n()) {
                            C59104x d2 = f300003a.mo56226d();
                            d2.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                            ((C59052c) ((C59052c) d2).mo56372aa(26335)).mo56386p("Warmer Welcome cannot be shown as OPA is already in foreground");
                        } else {
                            new C90873ag(((C89037bh) this.f300045y.mo27525b()).mo27378c(), this.f300041u, "check network availability", new C107806c(this)).mo85223a(C107807d.f299980a);
                        }
                        m179006q(nVar);
                        return;
                    case 9:
                        if (nVar.f296546b == 15) {
                            C106269ab abVar = (C106269ab) nVar.f296547c;
                            long j2 = abVar.f296488b;
                            if (this.f300040t.mo96449n()) {
                                C107555d dVar4 = (C107555d) C107556e.f299210c.createBuilder();
                                dVar4.copyOnWrite();
                                C107556e eVar5 = (C107556e) dVar4.instance;
                                eVar5.f299213b = 19;
                                eVar5.f299212a |= 1;
                                dVar4.mo58885m(C107511ae.f299134a, abVar);
                                mo96303h((C107556e) dVar4.build());
                                return;
                            }
                            this.f300006B.mo96271g(j2, (Bitmap) null);
                            return;
                        }
                        return;
                    case 10:
                        if (this.f300028g.mo79746e(C90014bt.f247287eM)) {
                            C87571n nVar2 = this.f300010F;
                            Context context = this.f300038r;
                            C53275hw hwVar = (C53275hw) C53287ih.f139693l.createBuilder();
                            hwVar.copyOnWrite();
                            C53287ih ihVar = (C53287ih) hwVar.instance;
                            ihVar.f139698d = 1;
                            ihVar.f139695a |= 1;
                            hwVar.copyOnWrite();
                            C53287ih ihVar2 = (C53287ih) hwVar.instance;
                            ihVar2.f139702h = 15;
                            ihVar2.f139695a |= 64;
                            hwVar.copyOnWrite();
                            C53287ih ihVar3 = (C53287ih) hwVar.instance;
                            ihVar3.f139703i = 31;
                            ihVar3.f139695a |= 128;
                            nVar2.mo81698j(context, (C53287ih) hwVar.build());
                        } else {
                            if (this.f300040t.mo96449n()) {
                                mo96305j(23);
                            } else {
                                C87565h hVar = new C87565h();
                                hVar.f236499C = true;
                                hVar.f236512P = 268468224;
                                hVar.f236558d = C83583an.m133152g(this.f300025d);
                                hVar.f236535af = true;
                                if (((C84516aa) this.f300044x.mo27525b()).mo78228b()) {
                                    hVar.f236556b = e.bm;
                                }
                                mo96304i(hVar);
                            }
                            this.f300016L = BuildConfig.FLAVOR;
                        }
                        m179006q(nVar);
                        return;
                    case 11:
                        mo96300e(nVar.f296546b == 16 ? ((Long) nVar.f296547c).longValue() : 0);
                        return;
                    case 12:
                        C62971cq cqVar = nVar.f296548d;
                        if (nVar.f296546b == 20) {
                            kVar = (C106283k) nVar.f296547c;
                        } else {
                            kVar = C106283k.f296519c;
                        }
                        m179003n(cqVar, C39191a.m68622a(kVar.f296522b));
                        return;
                    case 13:
                        this.f300027f.mo28212l("handleNotifyNgaToOpaCardStateEvent", new C107805b(this, nVar));
                        m179006q(nVar);
                        return;
                    case 14:
                        if (this.f300028g.mo79746e(C90014bt.f247271dx)) {
                            C107519am amVar = (C107519am) C107520an.f299147c.createBuilder();
                            if (nVar.f296546b == 22) {
                                adVar = (C106271ad) nVar.f296547c;
                            } else {
                                adVar = C106271ad.f296489c;
                            }
                            float f = adVar.f296492b;
                            amVar.copyOnWrite();
                            C107520an anVar = (C107520an) amVar.instance;
                            anVar.f299149a |= 1;
                            anVar.f299150b = f;
                            C107555d dVar5 = (C107555d) C107556e.f299210c.createBuilder();
                            dVar5.copyOnWrite();
                            C107556e eVar6 = (C107556e) dVar5.instance;
                            eVar6.f299213b = 23;
                            eVar6.f299212a |= 1;
                            dVar5.mo58885m(C107518al.f299146a, (C107520an) amVar.build());
                            mo96303h((C107556e) dVar5.build());
                        }
                        m179006q(nVar);
                        return;
                    case 15:
                        if (nVar.f296546b == 23) {
                            zVar = (C106298z) nVar.f296547c;
                        } else {
                            zVar = C106298z.f296567c;
                        }
                        String str5 = zVar.f296570b;
                        if (this.f300028g.mo79746e(C90014bt.f247554jO) && !this.f300040t.mo96449n() && !((C84516aa) this.f300044x.mo27525b()).mo78228b() && !this.f300024c.mo96254b().mo84363bw("android.opa.extra.SUPPRESS_OPA_UI")) {
                            this.f300016L = str5;
                            C58836b bVar3 = C58836b.f156633a;
                            m179008s(new C107804a((Query) null, (Query) null, (String) null, bVar3, bVar3), true);
                            return;
                        }
                        return;
                    case 16:
                        if (nVar.f296546b == 24) {
                            iVar = (C106281i) nVar.f296547c;
                        } else {
                            iVar = C106281i.f296515c;
                        }
                        C107555d dVar6 = (C107555d) C107556e.f299210c.createBuilder();
                        dVar6.copyOnWrite();
                        C107556e eVar7 = (C107556e) dVar6.instance;
                        eVar7.f299213b = 25;
                        eVar7.f299212a |= 1;
                        dVar6.mo58885m(C107531j.f299167a, iVar);
                        mo96303h((C107556e) dVar6.build());
                        m179006q(nVar);
                        return;
                    case 17:
                        if (this.f300028g.mo79746e(C90063do.f249515ew)) {
                            Context context2 = this.f300038r;
                            new C91093c(context2).mo65089a(C112096b.m185961a(context2));
                        } else if (!this.f300040t.mo96449n()) {
                            if (nVar.f296546b == 25) {
                                rVar = (C106290r) nVar.f296547c;
                            } else {
                                rVar = C106290r.f296555c;
                            }
                            m179009t(rVar.f296558b, true);
                        } else {
                            mo96305j(27);
                        }
                        this.f300016L = BuildConfig.FLAVOR;
                        m179006q(nVar);
                        return;
                    case 18:
                        C59104x b4 = f300003a.mo56224b();
                        b4.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
                        ((C59052c) ((C59052c) b4).mo56372aa(26331)).mo56386p("Nga Entry Point event data not set.");
                        return;
                    default:
                        return;
                }
            }
        }
    }

    /* renamed from: c */
    public final Query mo96298c(Query query) {
        if (!this.f300046z.mo56113h()) {
            return query;
        }
        String l = ((bd) this.f300046z.mo56107c()).l();
        if (TextUtils.isEmpty(l)) {
            return query;
        }
        return query.mo84278aO("android.opa.extra.APP_INTEGRATION_CLIENT_PACKAGE_NAME", l);
    }

    /* renamed from: d */
    public final void mo96299d(boolean z) {
        C107555d dVar = (C107555d) C107556e.f299210c.createBuilder();
        dVar.copyOnWrite();
        C107556e eVar = (C107556e) dVar.instance;
        eVar.f299213b = 14;
        eVar.f299212a |= 1;
        C62940bt btVar = C107524c.f299156a;
        C107521ao aoVar = (C107521ao) C107522ap.f299151c.createBuilder();
        aoVar.copyOnWrite();
        C107522ap apVar = (C107522ap) aoVar.instance;
        apVar.f299153a |= 1;
        apVar.f299154b = z;
        dVar.mo58885m(btVar, (C107522ap) aoVar.build());
        mo96303h((C107556e) dVar.build());
    }

    /* renamed from: e */
    public final void mo96300e(long j) {
        if (this.f300028g.mo79746e(C90014bt.f247401gU)) {
            C59104x b = f300003a.mo56224b();
            b.mo56378ag(C58975e.f156826a, "NgaClientEventSubCtrl");
            ((C59052c) ((C59052c) b).mo56372aa(26340)).mo56388r("handleTrackingQuery(%d)", j);
            this.f300032k.mo100774c(j, C113919w.HANDOVER_CONFIRMED);
            synchronized (this.f300017M) {
                Map map = this.f300019O;
                Long valueOf = Long.valueOf(j);
                C60870cx cxVar = (C60870cx) map.remove(valueOf);
                if (cxVar != null) {
                    cxVar.cancel(false);
                    if (this.f300030i.mo56113h()) {
                        C82567jz c = C82569ka.m131549c();
                        ((C82338bm) c).f224930b = "timeout_cancel";
                        ((C83305i) this.f300030i.mo56107c()).mo75579d(c.mo75772a());
                    }
                } else {
                    this.f300018N.add(valueOf);
                }
            }
        }
    }

    /* renamed from: f */
    public final void mo96301f(long j) {
        synchronized (this.f300017M) {
            C60870cx cxVar = (C60870cx) this.f300019O.remove(Long.valueOf(j));
            if (cxVar != null) {
                cxVar.cancel(false);
                if (this.f300030i.mo56113h()) {
                    C82567jz c = C82569ka.m131549c();
                    ((C82338bm) c).f224930b = "timeout_cancel";
                    ((C83305i) this.f300030i.mo56107c()).mo75579d(c.mo75772a());
                }
            }
        }
    }

    /* renamed from: g */
    public final void mo96302g(long j, C89849ae aeVar) {
        if (this.f300028g.mo79746e(C90014bt.f247057V)) {
            mo96301f(j);
            if (!this.f300032k.mo100775d(j, C113919w.END_STATE_LOGGED)) {
                this.f300032k.mo100774c(j, C113919w.END_STATE_LOGGED);
                C89856f fVar = new C89856f();
                fVar.mo83701c("rId", Long.toString(j));
                fVar.f246201a = aeVar;
                ((C89859i) this.f300026e.mo27525b()).mo74236a(fVar.mo83699a());
            }
        }
    }

    /* renamed from: h */
    public final void mo96303h(C107556e eVar) {
        Query a = this.f300024c.mo96253a();
        C87684al alVar = new C87684al(C88244um.OPA_SESSION_SERVICE_EVENT);
        alVar.mo81965b(C107505a.f299120a, eVar);
        alVar.mo81966c(a);
        ((C107932g) this.f300042v.mo27525b()).mo96337a(alVar.mo81964a());
    }

    /* renamed from: i */
    public final void mo96304i(C87565h hVar) {
        String a = this.f300025d.f232820b.mo79804a();
        if (!TextUtils.isEmpty(a) && this.f300046z.mo56113h()) {
            ((bd) this.f300046z.mo56107c()).n(a, hVar);
        }
        this.f300037q.mo81688b(this.f300038r, hVar.mo81685a());
    }

    /* renamed from: j */
    public final void mo96305j(int i) {
        C107555d dVar = (C107555d) C107556e.f299210c.createBuilder();
        dVar.copyOnWrite();
        C107556e eVar = (C107556e) dVar.instance;
        eVar.f299213b = i - 1;
        eVar.f299212a |= 1;
        mo96303h((C107556e) dVar.build());
    }
}
