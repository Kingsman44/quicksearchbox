package com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8323d;

import com.google.android.apps.gsa.nga.api.C74720bx;
import com.google.android.apps.gsa.search.core.p6491a.C84349ah;
import com.google.android.apps.gsa.search.core.p6491a.C84378x;
import com.google.android.apps.gsa.search.core.p6805i.C86124t;
import com.google.android.apps.gsa.search.core.service.p6842a.C86593a;
import com.google.android.apps.gsa.search.shared.service.C87684al;
import com.google.android.apps.gsa.search.shared.service.p6935b.C87757cl;
import com.google.android.apps.gsa.search.shared.service.p6935b.C87758cm;
import com.google.android.apps.gsa.search.shared.service.p6935b.C87759cn;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88244um;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88260vb;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88261vc;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88262vd;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88380zn;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88381zo;
import com.google.android.apps.gsa.search.shared.service.p6935b.C88382zp;
import com.google.android.apps.gsa.shared.logger.C89949q;
import com.google.android.apps.gsa.shared.p7066m.C90066dr;
import com.google.android.apps.gsa.shared.search.Query;
import com.google.android.apps.gsa.staticplugins.accl.C92718b;
import com.google.android.apps.gsa.staticplugins.opa.p8189ak.p8192b.C106221b;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.C107932g;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8320a.C107725d;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8320a.C107733l;
import com.google.android.apps.gsa.staticplugins.opa.p8319bb.p8322c.C107759j;
import com.google.android.apps.gsa.staticplugins.opa.p8346bm.C108100a;
import com.google.android.libraries.gsa.conversation.clientop.C22434e;
import com.google.android.libraries.gsa.conversation.p1852f.C22585l;
import com.google.android.libraries.gsa.conversation.p1855h.C22688aa;
import com.google.android.libraries.gsa.conversation.p1855h.C22689ab;
import com.google.android.libraries.gsa.conversation.p1855h.C22697b;
import com.google.android.libraries.gsa.conversation.p1855h.C22708l;
import com.google.android.libraries.gsa.conversation.p1855h.C22722z;
import com.google.android.libraries.gsa.p1876k.C22872h;
import com.google.assistant.p3897e.p3921j.C51809dy;
import com.google.assistant.p3897e.p3921j.C52091ex;
import com.google.common.base.C58833ax;
import com.google.common.base.C58836b;
import com.google.common.p4526f.C58976aa;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.p4526f.C59104x;
import com.google.common.p4526f.p4527a.C58975e;
import com.google.common.p4552o.C60321oe;
import com.google.common.p4552o.C60548tz;
import com.google.common.p4552o.C60555uf;
import com.google.common.p4552o.p4553a.C59449a;
import com.google.common.p4552o.p4553a.C59476b;
import com.google.common.util.concurrent.C60870cx;
import com.google.common.util.concurrent.SettableFuture;
import com.google.protobuf.C62940bt;
import com.google.protos.p4816ai.p4818b.C63196b;
import dagger.C68214a;
import p3186j$.util.Objects;

/* renamed from: com.google.android.apps.gsa.staticplugins.opa.bb.d.ad */
/* compiled from: PG */
public final class C107768ad extends C22697b {

    /* renamed from: a */
    private static final C59071e f299854a = C59071e.m91332i("com.google.android.apps.gsa.staticplugins.opa.bb.d.ad");

    /* renamed from: b */
    private final int f299855b;

    /* renamed from: c */
    private final C68214a f299856c;

    /* renamed from: e */
    private final C68214a f299857e;

    /* renamed from: f */
    private final C84378x f299858f;

    /* renamed from: g */
    private final C68214a f299859g;

    /* renamed from: h */
    private final C58833ax f299860h;

    /* renamed from: i */
    private final C68214a f299861i;

    /* renamed from: j */
    private final C106221b f299862j;

    /* renamed from: k */
    private final C58833ax f299863k;

    /* renamed from: l */
    private boolean f299864l;

    /* renamed from: m */
    private final C108100a f299865m;

    public C107768ad(int i, C68214a aVar, C68214a aVar2, C68214a aVar3, C84378x xVar, C58833ax axVar, C68214a aVar4, C106221b bVar, C108100a aVar5, C58833ax axVar2) {
        this.f299855b = i;
        this.f299856c = aVar;
        this.f299857e = aVar2;
        this.f299859g = aVar3;
        this.f299858f = xVar;
        this.f299860h = axVar;
        this.f299861i = aVar4;
        this.f299862j = bVar;
        this.f299865m = aVar5;
        this.f299863k = axVar2;
    }

    /* renamed from: t */
    private static C58833ax m178925t(C58833ax axVar) {
        if (!axVar.mo56113h()) {
            return C58836b.f156633a;
        }
        C84349ah ahVar = (C84349ah) axVar.mo56107c();
        return ahVar instanceof C84349ah ? C58833ax.m90834k(ahVar.f229566a) : C58836b.f156633a;
    }

    /* renamed from: a */
    public final void mo27813a(C22722z zVar) {
        if (this.f299855b != 3) {
            C84378x xVar = this.f299858f;
            Objects.requireNonNull(xVar);
            m42246p(zVar, new C107767ac(xVar));
            this.f299858f.mo77899d(zVar);
            this.f299862j.mo95445c(zVar);
        }
    }

    /* renamed from: b */
    public final C60870cx mo27814b(C51809dy dyVar, C58833ax axVar) {
        C58833ax axVar2;
        if (!this.f299865m.mo96449n() && this.f299863k.mo56113h() && ((C74720bx) this.f299863k.mo56107c()).mo71089f().a()) {
            if (!axVar.mo56113h() || !((C22434e) axVar.mo56107c()).mo27592b().mo56113h()) {
                axVar2 = C58836b.f156633a;
            } else {
                C58833ax axVar3 = ((C22585l) ((C22434e) axVar.mo56107c()).mo27592b().mo56107c()).f62228b;
                if (!axVar3.mo56113h() || !(axVar3.mo56107c() instanceof C84349ah)) {
                    axVar2 = C58836b.f156633a;
                } else {
                    axVar2 = C58833ax.m90834k(((C84349ah) axVar3.mo56107c()).f229566a);
                }
            }
            boolean z = false;
            if (axVar2.mo56113h() && (((Query) axVar2.mo56107c()).mo84324bI() || ((Query) axVar2.mo56107c()).mo84411cr())) {
                z = true;
            }
            Boolean valueOf = Boolean.valueOf(z);
            C59104x b = f299854a.mo56224b();
            b.mo56378ag(C58975e.f156826a, "SessionConversationSur");
            ((C59052c) ((C59052c) b).mo56372aa(26188)).mo56389s("DisplayUI action invoked while Opa is not in foreground. IsBistoOrGacs: %b", valueOf);
            if (valueOf.booleanValue()) {
                return f62475d;
            }
        }
        C107775ak akVar = (C107775ak) this.f299859g.mo27525b();
        SettableFuture settableFuture = new SettableFuture();
        StringBuilder sb = new StringBuilder();
        sb.append(akVar.f299891c.f253779b.nextLong());
        sb.append('_');
        sb.append(dyVar.hashCode());
        String sb2 = sb.toString();
        akVar.f299893e.put(sb2, settableFuture);
        akVar.f299892d.put(sb2, dyVar);
        akVar.f299890b.mo77903h(dyVar, C58833ax.m90834k(sb2), axVar);
        String str = dyVar.f135936b;
        return settableFuture;
    }

    /* renamed from: c */
    public final void mo27815c(C59476b bVar) {
        C60548tz tzVar = (C60548tz) C60555uf.f164065cO.createBuilder();
        tzVar.copyOnWrite();
        C60555uf ufVar = (C60555uf) tzVar.instance;
        ufVar.f164093a |= 2;
        ufVar.f164258m = 1237;
        C59449a aVar = (C59449a) bVar.toBuilder();
        int i = this.f299855b;
        aVar.copyOnWrite();
        C59476b bVar2 = (C59476b) aVar.instance;
        bVar2.f157799a |= 1;
        bVar2.f157802d = i;
        tzVar.copyOnWrite();
        C60555uf ufVar2 = (C60555uf) tzVar.instance;
        C59476b bVar3 = (C59476b) aVar.build();
        bVar3.getClass();
        ufVar2.f164175bc = bVar3;
        ufVar2.f164251f |= 67108864;
        C89949q.m146525j((C60555uf) tzVar.build(), (C60321oe) null, (C63196b) null, (String) null);
    }

    /* renamed from: d */
    public final void mo27816d(C58833ax axVar) {
        if (this.f299855b != 3) {
            C58976aa aaVar = C58975e.f156826a;
            C107733l lVar = (C107733l) this.f299857e.mo27525b();
            if (C22872h.m42744d(C86593a.class)) {
                lVar.f299780g.mo80545b();
            } else {
                lVar.f299775b.mo28212l("GlobalEventBusAccessor#uonCclConversationEnded", new C107725d(lVar));
            }
            ((C107759j) this.f299861i.mo27525b()).mo96267c((Query) m178925t(axVar).mo56111f());
            if (this.f299864l) {
                ((C107733l) this.f299857e.mo27525b()).mo96260h(false);
            }
        }
    }

    /* renamed from: e */
    public final void mo27817e(C22688aa aaVar, C58833ax axVar) {
        if (this.f299855b != 3) {
            this.f299865m.f300694h = 0;
            this.f299864l = false;
            if (this.f299860h.mo56113h()) {
                ((C92718b) this.f299860h.mo56107c()).mo87450b(this.f299855b, ((C22708l) aaVar).f62509b);
            }
            C22708l lVar = (C22708l) aaVar;
            this.f299858f.mo77900e(lVar.f62508a);
            C87758cm cmVar = (C87758cm) C87759cn.f237518c.createBuilder();
            C52091ex exVar = lVar.f62509b;
            cmVar.copyOnWrite();
            C87759cn cnVar = (C87759cn) cmVar.instance;
            cnVar.f237521b = exVar;
            cnVar.f237520a |= 1;
            C87684al alVar = new C87684al(C88244um.CONVERSATION_PARAMS_RECEIVED);
            alVar.mo81965b(C87757cl.f237517a, (C87759cn) cmVar.build());
            ((C107932g) this.f299856c.mo27525b()).mo96337a(alVar.mo81964a());
            C58833ax t = m178925t(axVar);
            if (t.mo56113h()) {
                Query query = (Query) t.mo56107c();
                if (!query.mo84363bw("android.opa.extra.QUERY_RESPONSE_GENERATED_BY_NGA")) {
                    ((C107759j) this.f299861i.mo27525b()).mo96270f(query, lVar.f62509b);
                }
            }
        }
    }

    /* renamed from: f */
    public final void mo27818f(C22689ab abVar) {
        if (this.f299855b != 3) {
            C58976aa aaVar = C58975e.f156826a;
            this.f299858f.mo77901f(abVar);
        }
    }

    /* renamed from: g */
    public final void mo27819g() {
        this.f299858f.mo77902g();
    }

    /* renamed from: h */
    public final void mo27694h(String str, String str2, boolean z) {
        C87684al alVar = new C87684al(C88244um.UPDATE_RECOGNIZED_TEXT);
        C62940bt btVar = C88380zn.f238990a;
        C88381zo zoVar = (C88381zo) C88382zp.f238991e.createBuilder();
        zoVar.copyOnWrite();
        C88382zp zpVar = (C88382zp) zoVar.instance;
        str.getClass();
        zpVar.f238993a |= 1;
        zpVar.f238994b = str;
        zoVar.copyOnWrite();
        C88382zp zpVar2 = (C88382zp) zoVar.instance;
        str2.getClass();
        zpVar2.f238993a |= 2;
        zpVar2.f238995c = str2;
        alVar.mo81965b(btVar, (C88382zp) zoVar.build());
        ((C107932g) this.f299856c.mo27525b()).mo96337a(alVar.mo81964a());
        if (z) {
            C87684al alVar2 = new C87684al(C88244um.SET_FINAL_RECOGNIZED_TEXT);
            C62940bt btVar2 = C88260vb.f238727a;
            C88261vc vcVar = (C88261vc) C88262vd.f238728d.createBuilder();
            vcVar.copyOnWrite();
            C88262vd vdVar = (C88262vd) vcVar.instance;
            str.getClass();
            vdVar.f238730a |= 1;
            vdVar.f238731b = str;
            alVar2.mo81965b(btVar2, (C88262vd) vcVar.build());
            ((C107932g) this.f299856c.mo27525b()).mo96337a(alVar2.mo81964a());
        }
    }

    /* renamed from: i */
    public final void mo27820i(C51809dy dyVar, C58833ax axVar) {
        this.f299858f.mo77903h(dyVar, C58836b.f156633a, axVar);
    }

    /* renamed from: j */
    public final void mo27821j(boolean z) {
        C58976aa aaVar = C58975e.f156826a;
        boolean z2 = this.f299864l;
        if (z2) {
            if (z) {
                z = true;
            } else {
                return;
            }
        }
        this.f299864l = z2 | z;
        ((C107733l) this.f299857e.mo27525b()).mo96260h(z);
    }

    /* renamed from: k */
    public final void mo27822k() {
    }

    /* renamed from: n */
    public final boolean mo27824n() {
        C108100a aVar = this.f299865m;
        return aVar.f300693g.mo26871c() >= aVar.f300694h + ((C86124t) aVar.f300687a.mo27525b()).mo79743a(C90066dr.f249671N);
    }

    /* renamed from: u */
    public final void mo27828u() {
    }
}
