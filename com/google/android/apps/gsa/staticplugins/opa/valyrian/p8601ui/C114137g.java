package com.google.android.apps.gsa.staticplugins.opa.valyrian.p8601ui;

import android.app.Activity;
import android.support.p033v7.widget.C0640fb;
import android.support.p033v7.widget.C0673gh;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.PopupMenu;
import com.google.android.apps.gsa.assistant.shared.p5829r.C73906a;
import com.google.android.apps.gsa.nga.shared.p6369ui.p6370a.C81517a;
import com.google.android.apps.gsa.search.core.p6805i.C86124t;
import com.google.android.apps.gsa.shared.p7066m.C90014bt;
import com.google.android.apps.gsa.shared.p7066m.C90029ch;
import com.google.android.apps.gsa.shared.p7066m.C90063do;
import com.google.android.apps.gsa.shared.p7130s.p7131a.C90476a;
import com.google.android.apps.gsa.shared.util.p7159c.C90934cd;
import com.google.android.apps.gsa.shared.util.p7184t.C91097g;
import com.google.android.apps.gsa.staticplugins.nga.p8092ui.p8095b.C104149a;
import com.google.android.apps.gsa.staticplugins.opa.C109037fg;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108226ax;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108232bc;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108235bf;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108237bh;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108241bl;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108262cf;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108273cq;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108321ej;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108324em;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108327ep;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108328eq;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108412ht;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108423id;
import com.google.android.apps.gsa.staticplugins.opa.chatui.C108451je;
import com.google.android.apps.gsa.staticplugins.opa.p8185ah.C106171l;
import com.google.android.apps.gsa.staticplugins.opa.util.C113768ak;
import com.google.android.apps.gsa.staticplugins.opa.valyrian.C114050dp;
import com.google.android.apps.gsa.staticplugins.opa.valyrian.p8597b.C113954b;
import com.google.android.apps.gsa.staticplugins.opa.valyrian.p8599d.C114034q;
import com.google.android.googlequicksearchbox.R;
import com.google.android.libraries.gsa.p1876k.C22871g;
import com.google.android.libraries.logging.C28292j;
import com.google.android.libraries.logging.C28295m;
import com.google.android.libraries.logging.p2185ve.p2199f.C28421h;
import com.google.android.libraries.onegoogle.accountmenu.SelectedAccountDisc;
import com.google.android.libraries.p1730f.C21370a;
import com.google.common.base.C58833ax;
import com.google.common.base.C58839bc;
import com.google.common.base.C58881cr;
import com.google.common.p4522b.C58557jl;
import com.google.common.p4526f.C58976aa;
import com.google.common.p4526f.C58979ad;
import com.google.common.p4526f.C59052c;
import com.google.common.p4526f.C59071e;
import com.google.common.p4526f.C59104x;
import com.google.common.p4526f.p4527a.C58975e;
import java.util.ArrayList;
import java.util.List;

/* renamed from: com.google.android.apps.gsa.staticplugins.opa.valyrian.ui.g */
/* compiled from: PG */
public final class C114137g extends C0640fb implements C108235bf {

    /* renamed from: a */
    public static final C59071e f316369a = C59071e.m91332i("com.google.android.apps.gsa.staticplugins.opa.valyrian.ui.g");

    /* renamed from: A */
    private final C58881cr f316370A;

    /* renamed from: B */
    private final C58833ax f316371B;

    /* renamed from: C */
    private final C73906a f316372C;

    /* renamed from: D */
    private final boolean f316373D;

    /* renamed from: b */
    public final C90476a f316374b;

    /* renamed from: c */
    public final C108226ax f316375c;

    /* renamed from: d */
    public C108237bh f316376d;

    /* renamed from: e */
    public final C108423id f316377e;

    /* renamed from: f */
    C108412ht f316378f;

    /* renamed from: g */
    public final ArrayList f316379g;

    /* renamed from: h */
    public final C21370a f316380h;

    /* renamed from: i */
    public final C108327ep f316381i;

    /* renamed from: j */
    public C108321ej f316382j;

    /* renamed from: k */
    public C108324em f316383k;

    /* renamed from: l */
    public View f316384l;

    /* renamed from: m */
    public final C86124t f316385m;

    /* renamed from: n */
    public final List f316386n = new ArrayList();

    /* renamed from: o */
    public final C104149a f316387o;

    /* renamed from: p */
    public C109037fg f316388p;

    /* renamed from: q */
    private final LayoutInflater f316389q;

    /* renamed from: r */
    private final C91097g f316390r;

    /* renamed from: s */
    private final Activity f316391s;

    /* renamed from: t */
    private final C114106ak f316392t;

    /* renamed from: u */
    private int f316393u;

    /* renamed from: v */
    private final List f316394v = new ArrayList();

    /* renamed from: w */
    private final C28421h f316395w;

    /* renamed from: x */
    private final C22871g f316396x;

    /* renamed from: y */
    private final C113954b f316397y;

    /* renamed from: z */
    private final C58881cr f316398z;

    public C114137g(C91097g gVar, C108226ax axVar, C108237bh bhVar, C108423id idVar, C58881cr crVar, C58881cr crVar2, C90476a aVar, C21370a aVar2, C108328eq eqVar, Activity activity, C86124t tVar, C104149a aVar3, C81517a aVar4, C22871g gVar2, C114106ak akVar, C113954b bVar, C58833ax axVar2, C73906a aVar5, C28421h hVar) {
        C86124t tVar2 = tVar;
        axVar.getClass();
        this.f316375c = axVar;
        this.f316376d = bhVar;
        this.f316377e = idVar;
        this.f316374b = aVar;
        this.f316380h = aVar2;
        this.f316379g = new ArrayList();
        boolean z = true;
        setHasStableIds(true);
        this.f316381i = eqVar.mo96788a();
        this.f316390r = gVar;
        this.f316391s = activity;
        this.f316392t = akVar;
        this.f316385m = tVar2;
        this.f316387o = aVar3;
        this.f316396x = gVar2;
        this.f316397y = bVar;
        this.f316398z = crVar;
        this.f316370A = crVar2;
        this.f316371B = axVar2;
        this.f316372C = aVar5;
        this.f316395w = hVar;
        if (aVar4.mo75125b() != 2 && !tVar2.mo79746e(C90029ch.f248283bq)) {
            z = false;
        }
        this.f316373D = z;
        this.f316389q = LayoutInflater.from(activity);
    }

    /* renamed from: m */
    private final void m189306m(ImageView imageView, SelectedAccountDisc selectedAccountDisc) {
        if (this.f316385m.mo79746e(C90014bt.f247560jU)) {
            C114034q.m188818n(imageView, selectedAccountDisc, this.f316391s, this.f316371B, new C114136f(this), this.f316397y, this.f316390r, this.f316385m, this.f316395w);
            return;
        }
        ImageView imageView2 = imageView;
        C114034q.m188813i(this.f316391s, imageView2, (PopupMenu.OnMenuItemClickListener) this.f316398z.mo6453a(), (C113768ak) this.f316370A.mo6453a(), this.f316371B, this.f316372C, this.f316390r);
    }

    /* renamed from: n */
    private final void m189307n(String str, int i) {
        if (i < 0 || i >= this.f316379g.size()) {
            C59104x d = f316369a.mo56226d();
            d.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
            C59052c cVar = (C59052c) d;
            cVar.mo56380ai(C58979ad.MEDIUM);
            ((C59052c) cVar.mo56372aa(28633)).mo56359L("DrlChatAdapter: %s position out of bound. position: %d, itemCount: %d", str, Integer.valueOf(i), Integer.valueOf(this.f316379g.size()));
            m189309p();
        }
    }

    /* renamed from: o */
    private final boolean m189308o() {
        return this.f316376d.mo96656ab() && this.f316385m.mo79746e(C90014bt.f247617kY);
    }

    /* renamed from: p */
    private final void m189309p() {
        if (this.f316379g.isEmpty()) {
            C59104x b = f316369a.mo56224b();
            b.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
            ((C59052c) ((C59052c) b).mo56372aa(28632)).mo56386p("logUiItems isEmpty");
        }
        ArrayList arrayList = this.f316379g;
        int size = arrayList.size();
        for (int i = 0; i < size; i++) {
            C108232bc bcVar = (C108232bc) arrayList.get(i);
            C58976aa aaVar = C58975e.f156826a;
            this.f316379g.size();
        }
    }

    /* renamed from: a */
    public final int mo95351a() {
        return this.f316379g.size();
    }

    /* renamed from: b */
    public final C108232bc mo95352b(int i) {
        C58976aa aaVar = C58975e.f156826a;
        if (i >= 0 && i < this.f316379g.size()) {
            return (C108232bc) this.f316379g.get(i);
        }
        m189307n("getElementAt", i);
        return null;
    }

    /* renamed from: c */
    public final C108232bc mo95353c() {
        return (C108232bc) C58557jl.m90132m(this.f316379g, (Object) null);
    }

    /* renamed from: d */
    public final void mo95354d(int i) {
        mo101179g(String.format("notifyItemAtIndexChanged: index %d", new Object[]{Integer.valueOf(i)}));
        notifyItemChanged(i);
    }

    /* renamed from: e */
    public final int mo101177e(C58839bc bcVar) {
        for (int size = this.f316379g.size() - 1; size >= 0; size--) {
            C108232bc b = mo95352b(size);
            b.getClass();
            if (bcVar.mo5941a(b)) {
                return size;
            }
        }
        return -1;
    }

    /* renamed from: f */
    public final void mo101178f(C108232bc bcVar) {
        if (bcVar == null) {
            C59104x d = f316369a.mo56226d();
            d.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
            C59052c cVar = (C59052c) d;
            cVar.mo56380ai(C58979ad.MEDIUM);
            ((C59052c) cVar.mo56372aa(28623)).mo56387q("addElement: null, getElementCount: %s", this.f316379g.size());
            return;
        }
        bcVar.f301041w = this.f316385m;
        bcVar.f301042x = this.f316387o.mo93970a();
        int i = -1;
        int size = this.f316379g.size() - 1;
        while (true) {
            if (size < 0) {
                break;
            }
            C108232bc b = mo95352b(size);
            b.getClass();
            int jz = b.mo96576jz(bcVar.f301029k);
            if (jz == 2) {
                mo101183k(b);
                jz = 2;
            }
            if (jz != 2 && jz != 3) {
                i = size;
                break;
            }
            size--;
        }
        int i2 = i + 1;
        mo101179g(String.format("addElement insertPosition=%s newItem=%s", new Object[]{Integer.valueOf(i2), bcVar}));
        ArrayList arrayList = this.f316379g;
        mo101182j(bcVar);
        arrayList.add(i2, bcVar);
        notifyItemInserted(i2);
        mo101180h(bcVar);
    }

    /* renamed from: g */
    public final void mo101179g(String str) {
        int i = this.f316393u + 1;
        this.f316393u = i;
        List list = this.f316394v;
        int size = this.f316379g.size();
        list.add("modifySeq=" + i + " ElementCount=" + size + " " + str + "\n");
        C58976aa aaVar = C58975e.f156826a;
        C58557jl.m90131l(this.f316394v);
        while (this.f316394v.size() > 10) {
            this.f316394v.remove(0);
        }
    }

    public final int getItemCount() {
        return this.f316379g.size();
    }

    public final long getItemId(int i) {
        C58976aa aaVar = C58975e.f156826a;
        m189307n("getItemId", i);
        C108232bc b = mo95352b(i);
        b.getClass();
        return b.f301027i;
    }

    public final int getItemViewType(int i) {
        C58976aa aaVar = C58975e.f156826a;
        m189307n("getItemViewType", i);
        C108232bc b = mo95352b(i);
        b.getClass();
        return b.mo95830h();
    }

    /* renamed from: h */
    public final void mo101180h(C108232bc bcVar) {
        C58976aa aaVar = C58975e.f156826a;
        this.f316396x.mo28207g("Notify listeners with item added.", new C114134d(this, bcVar));
    }

    /* renamed from: i */
    public final void mo101181i() {
        if (this.f316379g.size() > 0) {
            int size = this.f316379g.size() - 1;
            mo101179g(String.format("removeLastElement lastPosition=%s element=%s", new Object[]{Integer.valueOf(size), (C108232bc) this.f316379g.remove(size)}));
            notifyItemRemoved(size);
            mo101184l();
        }
    }

    /* renamed from: j */
    public final void mo101182j(C108232bc bcVar) {
        C28292j jVar = new C28292j(bcVar.mo95829g());
        if (bcVar.mo96597d()) {
            jVar.f76976d = true;
        }
        jVar.mo33794h(1);
        bcVar.mo96608r(jVar);
        bcVar.f301035q = this.f316380h.mo26870b();
        this.f316381i.mo96786b(bcVar);
    }

    /* renamed from: k */
    public final void mo101183k(C108232bc bcVar) {
        C108232bc b;
        int size = this.f316379g.size();
        do {
            size--;
            if (size >= 0) {
                b = mo95352b(size);
                b.getClass();
            } else {
                return;
            }
        } while (!b.equals(bcVar));
        mo101179g(String.format("remove i=%s element=%s", new Object[]{Integer.valueOf(size), bcVar}));
        this.f316379g.remove(size);
        notifyItemRemoved(size);
        mo101184l();
    }

    /* renamed from: l */
    public final void mo101184l() {
        C58976aa aaVar = C58975e.f156826a;
        this.f316396x.mo28207g("Notify listeners with item removed.", new C114122b(this));
    }

    public final /* synthetic */ void onBindViewHolder(C0673gh ghVar, int i) {
        ImageView imageView;
        int i2 = i;
        C108241bl blVar = (C108241bl) ghVar;
        C108232bc b = mo95352b(i2);
        if (b != null) {
            if (b.mo95830h() != blVar.mItemViewType) {
                C59104x d = f316369a.mo56226d();
                d.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
                C59052c cVar = (C59052c) d;
                cVar.mo56380ai(C58979ad.MEDIUM);
                ((C59052c) cVar.mo56372aa(28638)).mo56361N("onBindViewHolder: May cause inconsistent render, ChatUiItem: [type= %s stableId= %d veId=%d] ViewHolder: [type=%s, itemId=%d]", C108241bl.m179898a(b.mo95830h()), Long.valueOf(b.f301027i), Integer.valueOf(b.mo95829g()), C108241bl.m179898a(blVar.mItemViewType), Long.valueOf(blVar.mItemId));
                m189309p();
                if (this.f316385m.mo79746e(C90063do.f249359bz)) {
                    return;
                }
            } else {
                C59104x b2 = f316369a.mo56224b();
                b2.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
                ((C59052c) ((C59052c) b2).mo56372aa(28637)).mo56360M("#onBindViewHolder: position %d viewHolder %s ChatUiElement %s, ElementCount %s", Integer.valueOf(i), blVar, C108241bl.m179898a(b.mo95830h()), Integer.valueOf(this.f316379g.size()));
            }
            blVar.f301070T = this.f316382j;
            blVar.f301071U = this.f316383k;
            if (this.f316373D && (b instanceof C108262cf) && b.mo95830h() == 1) {
                ((C108262cf) b).f301169J = true;
                blVar.f301072V = new C114135e(this, b, blVar, i2);
            }
            b.f301040v = blVar.mo96686b();
            b.mo95832j(blVar, this.f316376d);
            blVar.mo96688d(b);
            C28295m.m52919e(blVar.itemView, b.f301030l);
            if (b instanceof C108451je) {
                imageView = (ImageView) blVar.itemView.findViewById(R.id.chatui_user_bubble_profile_icon);
            } else if (b instanceof C108262cf) {
                imageView = (ImageView) blVar.itemView.findViewById(R.id.chatui_google_bubble_profile_icon);
            } else {
                if ((b instanceof C108273cq) && m189308o()) {
                    C108273cq.m179977b(blVar);
                }
                imageView = null;
            }
            if (imageView == null) {
                return;
            }
            if (!this.f316371B.mo56113h() || !((C106171l) this.f316371B.mo56107c()).f296304b.f230023b.isDeviceLocked()) {
                C114034q.m188819o(imageView, this.f316397y);
                return;
            }
            return;
        }
        C59104x b3 = f316369a.mo56224b();
        b3.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
        ((C59052c) ((C59052c) b3).mo56372aa(28636)).mo56393w("onBindViewHolder: OUT OF CHAT ELEMENT BOUNDS, index = %d, count = %d", i2, this.f316379g.size());
    }

    public final /* synthetic */ C0673gh onCreateViewHolder(ViewGroup viewGroup, int i) {
        C58976aa aaVar = C58975e.f156826a;
        C90934cd.m148548a();
        C108241bl.m179898a(i);
        this.f316379g.size();
        ViewGroup viewGroup2 = (ViewGroup) this.f316389q.inflate(R.layout.chatui_element, viewGroup, false);
        switch (i) {
            case 0:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96645R(), viewGroup2, false));
                m189306m((ImageView) viewGroup2.findViewById(R.id.chatui_user_bubble_profile_icon), (SelectedAccountDisc) viewGroup2.findViewById(R.id.selected_account_disc));
                break;
            case 1:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96674q(), viewGroup2, false));
                m189306m((ImageView) viewGroup2.findViewById(R.id.chatui_google_bubble_profile_icon), (SelectedAccountDisc) viewGroup2.findViewById(R.id.selected_account_disc));
                break;
            case 2:
            case 3:
            case 19:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96659b(), viewGroup2, false));
                break;
            case 5:
                viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_hero_bubble, viewGroup2, false));
                break;
            case 6:
                viewGroup2.addView(this.f316389q.inflate(R.layout.valyrian_background_text, viewGroup2, false));
                break;
            case 7:
                viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_sticker_item, viewGroup2, false));
                break;
            case 8:
                if (!m189308o()) {
                    viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_history, viewGroup2, false));
                    break;
                } else {
                    viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_drl_history_my_activity, viewGroup2, false));
                    break;
                }
            case 9:
                viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_image_user_bubble, viewGroup2, false));
                break;
            case 10:
                viewGroup2.addView(this.f316389q.inflate(R.layout.audio_waveform_view, viewGroup2, false));
                break;
            case 11:
                viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_dismiss_message, viewGroup2, false));
                break;
            case 12:
                viewGroup2.addView(this.f316389q.inflate(R.layout.message_carousel_recyclerview, viewGroup2, false));
                break;
            case 17:
                viewGroup2.addView(this.f316389q.inflate(R.layout.lockhart_greeting_item, viewGroup2, false));
                break;
            case 18:
            case 22:
                break;
            case 20:
                viewGroup2.addView(this.f316389q.inflate(R.layout.photo_grid_view, viewGroup2, false));
                break;
            case 21:
                viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_voice_match_promo_item, viewGroup2, false));
                break;
            case 23:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96670m(), viewGroup2, false));
                break;
            case 24:
                viewGroup2.addView(this.f316389q.inflate(R.layout.drl_history_background_text, viewGroup2, false));
                break;
            case 25:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96669l(), viewGroup2, false));
                m189306m((ImageView) viewGroup2.findViewById(R.id.chatui_user_bubble_profile_icon), (SelectedAccountDisc) viewGroup2.findViewById(R.id.selected_account_disc));
                break;
            case 26:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96668k(), viewGroup2, false));
                m189306m((ImageView) viewGroup2.findViewById(R.id.chatui_google_bubble_profile_icon), (SelectedAccountDisc) viewGroup2.findViewById(R.id.selected_account_disc));
                break;
            case 27:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96628A(), viewGroup2, false));
                break;
            case 28:
                viewGroup2.addView(this.f316389q.inflate(R.layout.share_fab_view, viewGroup2, false));
                break;
            case 29:
                viewGroup2.addView(this.f316389q.inflate(R.layout.share_mini_card_view, viewGroup2, false));
                break;
            case 30:
                viewGroup2.addView(this.f316389q.inflate(this.f316376d.mo96629B(), viewGroup2, false));
                break;
            case 32:
                if (this.f316385m.mo79746e(C90014bt.f247793np)) {
                    View inflate = this.f316389q.inflate(R.layout.chatui_rich_suggestion_container, viewGroup2, false);
                    this.f316384l = inflate;
                    inflate.getClass();
                    return new C108241bl(inflate);
                }
                break;
            case 34:
                viewGroup2.addView(this.f316389q.inflate(R.layout.chatui_fragment_holder, viewGroup2, false));
                break;
            default:
                C59104x c = f316369a.mo56225c();
                c.mo56378ag(C58975e.f156826a, "DrlChatAdapter");
                ((C59052c) ((C59052c) c).mo56372aa(28622)).mo56387q("Unknown ChatUiElement ViewType: %d", i);
                break;
        }
        return new C108241bl(viewGroup2);
    }

    public final /* synthetic */ void onViewAttachedToWindow(C0673gh ghVar) {
        C108241bl blVar = (C108241bl) ghVar;
        this.f316392t.mo101149a();
    }

    public final /* synthetic */ void onViewRecycled(C0673gh ghVar) {
        ((C108241bl) ghVar).mo96687c();
    }

    public final String toString() {
        StringBuilder sb = new StringBuilder("DynamicResponseLayerChatAdapter ");
        for (String append : this.f316394v) {
            sb.append(append);
            sb.append(" ");
        }
        sb.append("ChatUiListenerCount=");
        sb.append(this.f316386n.size());
        sb.append(" ");
        for (C114050dp dpVar : this.f316386n) {
            sb.append(dpVar.getClass().getName());
            sb.append(" ");
        }
        return sb.toString();
    }
}
